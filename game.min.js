!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(module,exports,__webpack_require__){(function(global,process){(function webpackShim(module,exports,require,define,__webpack_shim__define__module__export__){if(/**
 * melonJS Game Engine v4.1.1
 * http://www.melonjs.org
 * @license {@link http://www.opensource.org/licenses/mit-license.php|MIT}
 * @copyright (C) 2011 - 2017, Olivier Biot, Jason Oster, Aaron McLeod
 */
function(){function t(){if(!n){if(!document.body)return setTimeout(t,13);for(document.removeEventListener&&document.removeEventListener("DOMContentLoaded",t,!1),window.removeEventListener("load",t,!1);i.length;)i.shift().call(window,[]);n=!0,"function"==typeof define&&define.amd&&define("me",[],function(){return me})}}window.me=window.me||{};var e=!1,n=!1,i=[];window.onReady=function(r){n?r.call(window,[]):(i.push(r),e||("complete"===document.readyState?window.setTimeout(t,0):(document.addEventListener&&document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)),e=!0))},!0!==me.skipAutoInit?window.onReady(function(){me.boot()}):me.init=function(){me.boot(),t()},window.throttle||(window.throttle=function(t,e,n){var i,r=window.performance.now();return"boolean"!=typeof e&&(e=!1),function(){var o=window.performance.now(),s=o-r,a=arguments;if(!(s<t))return r=o,n.apply(null,a);!1===e&&(clearTimeout(i),i=setTimeout(function(){return r=o,n.apply(null,a)},s))}}),"undefined"==typeof console&&(console={log:function(){},info:function(){},error:function(){alert(Array.prototype.slice.call(arguments).join(", "))}})}(),!Function.prototype.bind){var Empty=function(){};Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError("Function.prototype.bind called on incompatible "+e);var n=Array.prototype.slice.call(arguments,1),i=function(){if(this instanceof i){var r=e.apply(this,n.concat(Array.prototype.slice.call(arguments)));return Object(r)===r?r:this}return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))};return e.prototype&&(Empty.prototype=e.prototype,i.prototype=new Empty,Empty.prototype=null),i}}if(Function.prototype.defer=function(){return setTimeout(this.bind.apply(this,arguments),.01)},Object.defineProperty||(Object.defineProperty=function(t,e,n){if(!t.__defineGetter__)throw new TypeError("Object.defineProperty not supported");n.get&&t.__defineGetter__(e,n.get),n.set&&t.__defineSetter__(e,n.set)}),Object.create||(Object.create=function(t){var e=function(){};return e.prototype=t,new e}),Object.is||(Object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!==t&&e!==e}),Object.assign||function(){Object.assign=function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}}(),function(){function t(){function i(){return this.init.apply(this,arguments),this}for(var r={},o=new Array(arguments.length),s=0;s<arguments.length;s++)o.push(arguments[s]);if(i.prototype=Object.create(this.prototype),o.forEach(function(t){e(i,r,t.__methods__||t)}),!("init"in i.prototype))throw new TypeError("extend: Class is missing a constructor named `init`");return Object.defineProperty(i.prototype,"_super",{value:n}),Object.defineProperty(i,"__methods__",{value:r}),i.extend=t,i}function e(t,e,n){Object.keys(n).forEach(function(i){if(e[i]=n[i],"function"!=typeof n[i])throw new TypeError("extend: Method `"+i+"` is not a function");Object.defineProperty(t.prototype,i,{configurable:!0,value:n[i]})})}function n(t,e,n){return t.prototype[e].apply(this,n)}var i=function(){Object.apply(this,arguments)};i.prototype=Object.create(Object.prototype),i.prototype.constructor=i,Object.defineProperty(i,"extend",{value:t}),me.Object=i}(),me.Error=me.Object.extend.bind(Error)({init:function(t){this.name="me.Error",this.message=t}}),Math.sign||(Math.sign=function(t){return t=+t,0===t||isNaN(t)?Number(t):t>0?1:-1}),Number.prototype.clamp=function(t,e){return this<t?t:this>e?e:+this},Number.prototype.random=function(t,e){return e||(e=t,t=this),~~(Math.random()*(e-t))+t},Number.prototype.randomFloat=function(t,e){return e||(e=t,t=this),Math.random()*(e-t)+t},Number.prototype.weightedRandom=function(t,e){return e||(e=t,t=this),~~(Math.pow(Math.random(),2)*(e-t))+t},Number.prototype.round=function(t,e){var n=Math.pow(10,e||t||0);return~~(.5+(t=arguments.length<2?this:t)*n)/n},Number.prototype.toHex=function(){return"0123456789ABCDEF".charAt(this-this%16>>4)+"0123456789ABCDEF".charAt(this%16)},Number.prototype.degToRad=function(t){return(t||this)/180*Math.PI},Number.prototype.radToDeg=function(t){return(t||this)*(180/Math.PI)},String.prototype.trim||String.prototype.trim||function(){var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(t,"")}}(),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/,"")}),String.prototype.isNumeric=function(){return!isNaN(this)&&""!==this.trim()},String.prototype.isBoolean=function(){var t=this.trim();return"true"===t||"false"===t},String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),String.prototype.toHex=function(){for(var t="",e=0;e<this.length;)t+=this.charCodeAt(e++).toString(16);return t},Array.prototype.remove=function(t){var e=Array.prototype.indexOf.call(this,t);return-1!==e&&Array.prototype.splice.call(this,e,1),this},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=0,i=this.length;i--;n++)t.call(e||this,this[n],n,this)}),Array.isArray||(Array.isArray=function(t){return t instanceof Array}),Array.prototype.random=function(t){return t[(0).random(t.length)]},Array.prototype.weightedRandom=function(t){return t[(0).weightedRandom(t.length)]},me.TypedArray=function(t){var e=0;if(Array.isArray(t))this.concat(t.slice());else{if(1!==arguments.length||"number"!=typeof t)throw new me.Error("TypedArray polyfill: Unsupported constructor arguments",arguments);for(e=0;e<t;e++)this.push(0)}},me.TypedArray.prototype=Array.prototype,me.TypedArray.prototype.set=function(t,e){if(e=e||0,t.length+e>this.length)throw new me.Error("TypedArray pollyfill: Buffer overflow in set");for(var n=0;n<t.length;n++,e++)this[e]=t[n]},window.Float32Array=window.Float32Array||me.TypedArray,window.Uint8Array=window.Uint8Array||me.TypedArray,window.Uint16Array=window.Uint16Array||me.TypedArray,window.Uint32Array=window.Uint32Array||me.TypedArray,void 0===window.performance&&(window.performance={}),void 0===Date.now&&(Date.now=function(){return(new Date).getTime()}),!window.performance.now){var timeOffset=Date.now();window.performance.timing&&window.performance.timing.navigationStart&&(timeOffset=window.performance.timing.navigationStart),window.performance.now=function(){return Date.now()-timeOffset}}!function(t){"use strict";function e(t,e){function i(t){if(!this||this.constructor!==i)return new i(t);this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,t&&n.call(this,t)}return e||_(t,"size",{get:g}),t.constructor=i,i.prototype=t,i}function n(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}function i(t){return this.has(t)&&(this._keys.splice(y,1),this._values.splice(y,1),this._itp.forEach(function(t){y<t[0]&&t[0]--})),-1<y}function r(t){return this.has(t)?this._values[y]:void 0}function o(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(y=t.length;y--&&!w(t[y],e););else y=t.indexOf(e);return-1<y}function s(t){return o.call(this,this._values,t)}function a(t){return o.call(this,this._keys,t)}function u(t,e){return this.has(t)?this._values[y]=e:this._values[this._keys.push(t)-1]=e,this}function h(t){return this.has(t)||this._values.push(t),this}function l(){(this._keys||0).length=this._values.length=0}function c(){return m(this._itp,this._keys)}function f(){return m(this._itp,this._values)}function d(){return m(this._itp,this._keys,this._values)}function p(){return m(this._itp,this._values,this._values)}function m(t,e,n){var i=[0],r=!1;return t.push(i),{next:function(){var o,s=i[0];return!r&&s<e.length?(o=n?[e[s],n[s]]:e[s],i[0]++):(r=!0,t.splice(t.indexOf(i),1)),{done:r,value:o}}}}function g(){return this._values.length}function v(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}}var y,_=Object.defineProperty,w=Object.is;"undefined"==typeof WeakMap&&(t.WeakMap=e({delete:i,clear:l,get:r,has:a,set:u},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(t.Map=e({delete:i,has:a,get:r,set:u,keys:c,values:f,entries:d,forEach:v,clear:l})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(t.Set=e({has:s,add:h,delete:i,clear:l,keys:f,values:f,entries:p,forEach:v})),"undefined"==typeof WeakSet&&(t.WeakSet=e({delete:i,add:h,clear:l,has:s},!0))}(void 0!==exports&&void 0!==global?global:window),/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://github.com/stefanpenner/es6-promise
 * @version   3.2.1
 */
function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){F=t}function i(t){X=t}function r(){return function(){N(s)}}function o(){return function(){setTimeout(s,1)}}function s(){for(var t=0;t<G;t+=2){(0,Z[t])(Z[t+1]),Z[t]=void 0,Z[t+1]=void 0}G=0}function a(t,e){var n=this,i=new this.constructor(h);void 0===i[Q]&&C(i);var r=n._state;if(r){var o=arguments[r-1];X(function(){A(r,i,o,n._result)})}else b(n,i,t,e);return i}function u(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(h);return v(n,t),n}function h(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function c(){return new TypeError("A promises callback cannot return that same promise.")}function f(t){try{return t.then}catch(t){return it.error=t,it}}function d(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}function p(t,e,n){X(function(t){var i=!1,r=d(n,e,function(n){i||(i=!0,e!==n?v(t,n):_(t,n))},function(e){i||(i=!0,w(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&r&&(i=!0,w(t,r))},t)}function m(t,e){e._state===et?_(t,e._result):e._state===nt?w(t,e._result):b(e,void 0,function(e){v(t,e)},function(e){w(t,e)})}function g(t,n,i){n.constructor===t.constructor&&i===K&&constructor.resolve===J?m(t,n):i===it?w(t,it.error):void 0===i?_(t,n):e(i)?p(t,n,i):_(t,n)}function v(e,n){e===n?w(e,l()):t(n)?g(e,n,f(n)):_(e,n)}function y(t){t._onerror&&t._onerror(t._result),x(t)}function _(t,e){t._state===tt&&(t._result=e,t._state=et,0!==t._subscribers.length&&X(x,t))}function w(t,e){t._state===tt&&(t._state=nt,t._result=e,X(y,t))}function b(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+et]=n,r[o+nt]=i,0===o&&t._state&&X(x,t)}function x(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,r,o=t._result,s=0;s<e.length;s+=3)i=e[s],r=e[s+n],i?A(n,i,r,o):r(o);t._subscribers.length=0}}function T(){this.error=null}function E(t,e){try{return t(e)}catch(t){return rt.error=t,rt}}function A(t,n,i,r){var o,s,a,u,h=e(i);if(h){if(o=E(i,r),o===rt?(u=!0,s=o.error,o=null):a=!0,n===o)return void w(n,c())}else o=r,a=!0;n._state!==tt||(h&&a?v(n,o):u?w(n,s):t===et?_(n,o):t===nt&&w(n,o))}function S(t,e){try{e(function(e){v(t,e)},function(e){w(t,e)})}catch(e){w(t,e)}}function P(){return ot++}function C(t){t[Q]=ot++,t._state=void 0,t._result=void 0,t._subscribers=[]}function O(t){return new lt(this,t).promise}function R(t){var e=this;return new e(U(t)?function(n,i){for(var r=t.length,o=0;o<r;o++)e.resolve(t[o]).then(n,i)}:function(t,e){e(new TypeError("You must pass an array to race."))})}function M(t){var e=this,n=new e(h);return w(n,t),n}function k(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function I(t){this[Q]=P(),this._result=this._state=void 0,this._subscribers=[],h!==t&&("function"!=typeof t&&k(),this instanceof I?S(this,t):B())}function L(t,e){this._instanceConstructor=t,this.promise=new t(h),this.promise[Q]||C(this.promise),Array.isArray(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&_(this.promise,this._result))):w(this.promise,D())}function D(){return new Error("Array Methods must be provided an Array")}function j(){var t;if(void 0!==global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=ht)}var z;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var N,F,V,U=z,G=0,X=function(t,e){Z[G]=t,Z[G+1]=e,2===(G+=2)&&(F?F(s):V())},H="undefined"!=typeof window?window:void 0,W=H||{},q=W.MutationObserver||W.WebKitMutationObserver,Y="undefined"==typeof self&&void 0!==process&&"[object process]"==={}.toString.call(process),$="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3);V=Y?function(){return function(){process.nextTick(s)}}():q?function(){var t=0,e=new q(s),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():$?function(){var t=new MessageChannel;return t.port1.onmessage=s,function(){t.port2.postMessage(0)}}():void 0===H&&"function"==typeof require?function(){try{var t=require,e=t("vertx");return N=e.runOnLoop||e.runOnContext,r()}catch(t){return o()}}():o();var K=a,J=u,Q=Math.random().toString(36).substring(16),tt=void 0,et=1,nt=2,it=new T,rt=new T,ot=0,st=O,at=R,ut=M,ht=I;I.all=st,I.race=at,I.resolve=J,I.reject=ut,I._setScheduler=n,I._setAsap=i,I._asap=X,I.prototype={constructor:I,then:K,catch:function(t){return this.then(null,t)}};var lt=L;L.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===tt&&n<t;n++)this._eachEntry(e[n],n)},L.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===J){var r=f(t);if(r===K&&t._state!==tt)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===ht){var o=new n(h);g(o,t,r),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(i(t),e)},L.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===tt&&(this._remaining--,t===nt?w(i,n):this._result[e]=n),0===this._remaining&&_(i,this._result)},L.prototype._willSettleAt=function(t,e){var n=this;b(t,void 0,function(t){n._settledAt(et,e,t)},function(t){n._settledAt(nt,e,t)})};var ct=j,ft={Promise:ht,polyfill:ct};"function"==typeof define&&define.amd?define(function(){return ft}):void 0!==module&&module.exports?module.exports=ft:void 0!==this&&(this.ES6Promise=ft),ct()}.call(this),function(){function t(){var t={};return document.location.hash&&document.location.hash.substr(1).split("&").filter(function(t){return""!==t}).forEach(function(e){var n=e.split("="),i=n.shift(),r=n.join("=");t[i]=r||!0}),t}me.mod="melonJS",me.version="4.1.1",me.sys={fps:60,updatesPerSecond:60,interpolation:!1,scale:null,gravity:void 0,stopOnAudioError:!0,pauseOnBlur:!0,resumeOnFocus:!0,stopOnBlur:!1,preRender:!1,checkVersion:function(t,e){e=e||me.version;for(var n=t.split("."),i=e.split("."),r=Math.min(n.length,i.length),o=0,s=0;s<r&&!(o=+n[s]-+i[s]);s++);return o||n.length-i.length}};var e=!1;Object.defineProperty(me,"initialized",{get:function(){return e}}),me.boot=function(){e||(me.device._check(),me.save._init(),me.game.HASH=t(),me.loader.setNocache(me.game.HASH.nocache||!1),me.timer.init(),me.state.init(),me.pool.init(),!1===me.device.isMobile&&me.input._enableKeyboardEvent(),me.levelDirector.reset(),e=!0)}}(),function(){me.game=function(){var t={},e=!1,n=!0,i=!1,r=0,o=1,s=0,a=0,u=0,h=1e3/60,l=0,c=null,f=0,d=null;return t.viewport=null,t.world=null,t.mergeGroup=!0,t.sortOn="z",t.onLevelLoaded=function(){},t.HASH=null,t.init=function(i,r){e||(i=i||me.video.renderer.getWidth(),r=r||me.video.renderer.getHeight(),t.viewport=new me.Viewport(0,0,i,r),t.world=new me.Container(0,0,i,r),t.world.name="rootContainer",t.world._root=!0,me.collision.init(),d=me.video.renderer,me.event.publish(me.event.GAME_INIT),me.input._translatePointerEvents(),n=!0,e=!0)},t.reset=function(){me.collision.quadTree.clear(),t.world.destroy(),t.viewport&&t.viewport.reset(),d.reset(),me.event.publish(me.event.GAME_RESET),t.updateFrameRate()},t.updateFrameRate=function(){r=0,o=~~(.5+60/me.sys.fps),h=1e3/me.sys.updatesPerSecond,s=0,a=10*h,i=me.sys.fps>me.sys.updatesPerSecond},t.getParentContainer=function(t){return t.ancestor},t.repaint=function(){n=!0},t.update=function(e){if(++r%o==0)for(r=0,me.timer.update(e),me.input._updateGamepads(),s+=me.timer.getDelta(),s=Math.min(s,a),l=me.sys.interpolation?me.timer.getDelta():h,u=me.sys.interpolation?l:Math.max(l,f);s>=u||me.sys.interpolation;)if(c=window.performance.now(),me.collision.quadTree.clear(),me.collision.quadTree.insertContainer(t.world),n=t.world.update(l)||n,n=t.viewport.update(l)||n,me.timer.lastUpdate=window.performance.now(),f=me.timer.lastUpdate-c,s-=u,me.sys.interpolation){s=0;break}},t.draw=function(e){if(n||i){e=e||t.viewport;var r=e.pos.x+e.offset.x,o=e.pos.y+e.offset.y;t.world.currentTransform.translate(-r,-o),d.clear(),me.video.renderer.save(),e.currentTransform.isIdentity()||d.transform(e.currentTransform),t.world.draw(d,e),d.restore(),t.world.currentTransform.translate(r,o),e.draw(d)}n=!1,d.flush()},t}()}(),function(){var t=function(t){return t.substring(0,1).toUpperCase()+t.substring(1,t.length)};me.agent=function(){var e={},n=["ms","MS","moz","webkit","o"];return e.prefixed=function(e,i){if(i=i||window,e in i)return i[e];var r,o=t(e);return n.some(function(t){var e=t+o;return r=e in i?i[e]:void 0}),r},e.setPrefixed=function(e,i,r){if(r=r||window,e in r)return void(r[e]=i);var o=t(e);n.some(function(t){var e=t+o;return e in r&&(r[e]=i,!0)})},e}()}(),function(){me.device=function(){function t(t){t.reading?(n.accelerationX=t.reading.accelerationX,n.accelerationY=t.reading.accelerationY,n.accelerationZ=t.reading.accelerationZ):(n.accelerationX=t.accelerationIncludingGravity.x,n.accelerationY=t.accelerationIncludingGravity.y,n.accelerationZ=t.accelerationIncludingGravity.z)}function e(t){n.gamma=t.gamma,n.beta=t.beta,n.alpha=t.alpha}var n={},i=!1,r=!1,o=null,s=!0,a=function(t){return t.preventDefault(),window.scroll(0,0),!1};return n._check=function(){me.device._detectDevice(),me.device.isMobile&&!me.device.cocoon&&n.enableSwipe(!1),me.device.pointerEvent=me.agent.prefixed("PointerEvent",window),me.device.maxTouchPoints=me.agent.prefixed("maxTouchPoints",navigator)||0,window.gesture=me.agent.prefixed("gesture"),me.device.touch="createTouch"in document||"ontouchstart"in window||me.device.cocoon||me.device.pointerEvent&&me.device.maxTouchPoints>0,me.device.wheel="onwheel"in document.createElement("div"),me.device.hasAccelerometer=void 0!==window.DeviceMotionEvent||void 0!==window.Windows&&"function"==typeof Windows.Devices.Sensors.Accelerometer,this.hasPointerLockSupport=me.agent.prefixed("pointerLockElement",document),this.hasPointerLockSupport&&(document.exitPointerLock=me.agent.prefixed("exitPointerLock",document)),window.DeviceOrientationEvent&&(me.device.hasDeviceOrientation=!0),this.hasFullscreenSupport=me.agent.prefixed("fullscreenEnabled",document)||document.mozFullScreenEnabled,document.exitFullscreen=me.agent.prefixed("cancelFullScreen",document)||me.agent.prefixed("exitFullscreen",document),navigator.vibrate=me.agent.prefixed("vibrate",navigator);try{n.localStorage=!!window.localStorage}catch(t){n.localStorage=!1}window.addEventListener("blur",function(){me.sys.stopOnBlur&&me.state.stop(!0),me.sys.pauseOnBlur&&me.state.pause(!0)},!1),window.addEventListener("focus",function(){me.sys.stopOnBlur&&me.state.restart(!0),me.sys.resumeOnFocus&&me.state.resume(!0)},!1);var t,e;void 0!==document.hidden?(t="hidden",e="visibilitychange"):void 0!==document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):void 0!==document.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),"string"==typeof e&&document.addEventListener(e,function(){document[t]?(me.sys.stopOnBlur&&me.state.stop(!0),me.sys.pauseOnBlur&&me.state.pause(!0)):(me.sys.stopOnBlur&&me.state.restart(!0),me.sys.resumeOnFocus&&me.state.resume(!0))},!1)},n._detectDevice=function(){me.device.iOS=/iPhone|iPad|iPod/i.test(me.device.ua),me.device.android=/Android/i.test(me.device.ua),me.device.android2=/Android 2/i.test(me.device.ua),me.device.chromeOS=/CrOS/.test(me.device.ua),me.device.wp=/Windows Phone/i.test(me.device.ua),me.device.BlackBerry=/BlackBerry/i.test(me.device.ua),me.device.Kindle=/Kindle|Silk.*Mobile Safari/i.test(me.device.ua),me.device.isMobile=/Mobi/i.test(me.device.ua)||me.device.iOS||me.device.android||me.device.wp||me.device.BlackBerry||me.device.Kindle||!1,me.device.ejecta=void 0!==window.ejecta,me.device.cocoon=navigator.isCocoonJS||void 0!==window.Cocoon},n.ua=navigator.userAgent,n.localStorage=!1,n.hasAccelerometer=!1,n.hasDeviceOrientation=!1,n.hasFullscreenSupport=!1,n.hasPointerLockSupport=!1,n.nativeBase64="function"==typeof window.atob,n.maxTouchPoints=0,n.touch=!1,n.wheel=!1,n.isMobile=!1,n.iOS=!1,n.android=!1,n.android2=!1,n.ejecta=!1,n.cocoon=!1,n.chromeOS=!1,n.wp=!1,n.BlackBerry=!1,n.Kindle=!1,n.orientation=0,n.accelerationX=0,n.accelerationY=0,n.accelerationZ=0,n.gamma=0,n.beta=0,n.alpha=0,n.language=navigator.language||navigator.browserLanguage||navigator.userLanguage||"en",n.enableSwipe=function(t){!1!==t?!1===s&&(window.document.removeEventListener("touchmove",a,!1),s=!0):!0===s&&(window.document.addEventListener("touchmove",a,!1),s=!1)},n.requestFullscreen=function(t){this.hasFullscreenSupport&&(t=t||me.video.getWrapper(),t.requestFullscreen=me.agent.prefixed("requestFullscreen",t)||t.mozRequestFullScreen,t.requestFullscreen())},n.exitFullscreen=function(){this.hasFullscreenSupport&&document.exitFullscreen()},n.getPixelRatio=function(){if(null===o){var t;t=void 0!==me.video.renderer?me.video.renderer.getScreenContext():me.Renderer.prototype.getContext2d(document.createElement("canvas"));var e=window.devicePixelRatio||1,n=me.agent.prefixed("backingStorePixelRatio",t)||1;o=e/n}return o},n.getStorage=function(t){switch(t=t||"local"){case"local":return me.save;default:throw new me.Error("storage type "+t+" not supported")}},n.turnOnPointerLock=function(){if(this.hasPointerLockSupport){var t=me.video.getWrapper();if(me.device.ua.match(/Firefox/i)){var e=function(){(me.agent.prefixed("fullscreenElement",document)||document.mozFullScreenElement)===t&&(document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),t.requestPointerLock=me.agent.prefixed("requestPointerLock",t),t.requestPointerLock())};document.addEventListener("fullscreenchange",e,!1),document.addEventListener("mozfullscreenchange",e,!1),me.device.requestFullscreen()}else t.requestPointerLock()}},n.turnOffPointerLock=function(){this.hasPointerLockSupport&&document.exitPointerLock()},n.watchAccelerometer=function(){if(me.device.hasAccelerometer){if(!i){if("undefined"==typeof Windows)window.addEventListener("devicemotion",t,!1);else{var e=Windows.Devices.Sensors.Accelerometer.getDefault();if(e){var n=e.minimumReportInterval,r=n>=16?n:25;e.reportInterval=r,e.addEventListener("readingchanged",t,!1)}}i=!0}return!0}return!1},n.unwatchAccelerometer=function(){if(i){if("undefined"==typeof Windows)window.removeEventListener("devicemotion",t,!1);else{Windows.Device.Sensors.Accelerometer.getDefault().removeEventListener("readingchanged",t,!1)}i=!1}},n.watchDeviceOrientation=function(){return me.device.hasDeviceOrientation&&!r&&(window.addEventListener("deviceorientation",e,!1),r=!0),!1},n.unwatchDeviceOrientation=function(){r&&(window.removeEventListener("deviceorientation",e,!1),r=!1)},n.vibrate=function(t){navigator.vibrate&&navigator.vibrate(t)},n}(),Object.defineProperty(me.device,"isFullscreen",{get:function(){if(me.device.hasFullscreenSupport){return(me.agent.prefixed("fullscreenElement",document)||document.mozFullScreenElement)===me.video.getWrapper()}return!1}}),Object.defineProperty(me.device,"sound",{get:function(){return!Howler.noAudio}})}(),function(){me.timer=function(){var t={},e=0,n=0,i=0,r=0,o=0,s=Math.ceil(1e3/me.sys.fps),a=1e3/me.sys.fps*1.25,u=[],h=0,l=function(t){for(var e=0,n=u.length;e<n;e++)if(u[e].timerId===t){u.splice(e,1);break}},c=function(t){for(var e=0,n=u.length;e<n;e++){var i=u[e];i.pauseable&&me.state.isPaused()||(i.elapsed+=t),i.elapsed>=i.delay&&(i.fn.apply(this),!0===i.repeat?i.elapsed-=i.delay:me.timer.clearTimeout(i.timerId))}};return t.tick=1,t.fps=0,t.lastUpdate=window.performance.now(),t.init=function(){t.reset(),r=i=0},t.reset=function(){i=r=window.performance.now(),o=0,n=0,e=0},t.setTimeout=function(t,e,n){return u.push({fn:t,delay:e,elapsed:0,repeat:!1,timerId:++h,pauseable:!0===n||!0}),h},t.setInterval=function(t,e,n){return u.push({fn:t,delay:e,elapsed:0,repeat:!0,timerId:++h,pauseable:!0===n||!0}),h},t.clearTimeout=function(t){l.defer(this,t)},t.clearInterval=function(t){l.defer(this,t)},t.getTime=function(){return r},t.getDelta=function(){return o},t.countFPS=function(){e++,n+=o,e%10==0&&(this.fps=(~~(1e3*e/n)).clamp(0,me.sys.fps),n=0,e=0)},t.update=function(e){return i=r,r=e,o=r-i,t.tick=o>a&&me.sys.interpolation?o/s:1,c(o),o},t}()}(),function(){me.pool=function(){var t={},e={};return t.init=function(){t.register("me.Entity",me.Entity),t.register("me.CollectableEntity",me.CollectableEntity),t.register("me.LevelEntity",me.LevelEntity),t.register("me.Tween",me.Tween,!0),t.register("me.Color",me.Color,!0),t.register("me.Particle",me.Particle,!0),t.register("me.Sprite",me.Sprite),t.register("me.Vector2d",me.Vector2d,!0),t.register("me.Glyph",me.Glyph,!0),t.register("me.Matrix2d",me.Matrix2d,!0)},t.register=function(t,n,i){if(void 0===n)throw new me.Error("Cannot register object '"+t+"', invalid class");e[t]={class:n,pool:i?[]:void 0}},t.pull=function(t){for(var n=new Array(arguments.length),i=0;i<arguments.length;i++)n[i]=arguments[i];var r=e[t];if(r){var o,s=r.class,a=r.pool;return a&&(o=a.pop())?(n.shift(),"function"==typeof o.onResetEvent?o.onResetEvent.apply(o,n):o.init.apply(o,n)):(n[0]=s,o=new(s.bind.apply(s,n)),a&&(o.className=t)),o}throw new me.Error("Cannot instantiate entity of type '"+t+"'")},t.purge=function(){for(var t in e)e[t]&&(e[t].pool=[])},t.push=function(t){var n=t.className;void 0!==n&&e[n]&&e[n].pool.push(t)},t.exists=function(t){return t in e},t}()}(),function(){me.Vector2d=me.Object.extend({init:function(t,e){return this.set(t||0,e||0)},_set:function(t,e){return this.x=t,this.y=e,this},set:function(t,e){if(t!==+t||e!==+e)throw new me.Vector2d.Error("invalid x,y parameters (not a number)");return this._set(t,e)},setZero:function(){return this.set(0,0)},setV:function(t){return this._set(t.x,t.y)},add:function(t){return this._set(this.x+t.x,this.y+t.y)},sub:function(t){return this._set(this.x-t.x,this.y-t.y)},scale:function(t,e){return this._set(this.x*t,this.y*(void 0!==e?e:t))},toIso:function(){return this._set(this.x-this.y,.5*(this.x+this.y))},to2d:function(){return this._set(this.y+this.x/2,this.y-this.x/2)},scaleV:function(t){return this._set(this.x*t.x,this.y*t.y)},div:function(t){return this._set(this.x/t,this.y/t)},abs:function(){return this._set(this.x<0?-this.x:this.x,this.y<0?-this.y:this.y)},clamp:function(t,e){return new me.Vector2d(this.x.clamp(t,e),this.y.clamp(t,e))},clampSelf:function(t,e){return this._set(this.x.clamp(t,e),this.y.clamp(t,e))},minV:function(t){return this._set(this.x<t.x?this.x:t.x,this.y<t.y?this.y:t.y)},maxV:function(t){return this._set(this.x>t.x?this.x:t.x,this.y>t.y?this.y:t.y)},floor:function(){return new me.Vector2d(Math.floor(this.x),Math.floor(this.y))},floorSelf:function(){return this._set(Math.floor(this.x),Math.floor(this.y))},ceil:function(){return new me.Vector2d(Math.ceil(this.x),Math.ceil(this.y))},ceilSelf:function(){return this._set(Math.ceil(this.x),Math.ceil(this.y))},negate:function(){return new me.Vector2d(-this.x,-this.y)},negateSelf:function(){return this._set(-this.x,-this.y)},copy:function(t){return this._set(t.x,t.y)},equals:function(t){return this.x===t.x&&this.y===t.y},normalize:function(){var t=this.length();return t>0?this._set(this.x/t,this.y/t):this},perp:function(){return this._set(this.y,-this.x)},rotate:function(t){var e=this.x,n=this.y;return this._set(e*Math.cos(t)-n*Math.sin(t),e*Math.sin(t)+n*Math.cos(t))},dotProduct:function(t){return this.x*t.x+this.y*t.y},length2:function(){return this.dotProduct(this)},length:function(){return Math.sqrt(this.length2())},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},angle:function(t){return Math.acos((this.dotProduct(t)/(this.length()*t.length())).clamp(-1,1))},project:function(t){return this.scale(this.dotProduct(t)/t.length2())},projectN:function(t){return this.scale(this.dotProduct(t))},clone:function(){return new me.Vector2d(this.x,this.y)},toString:function(){return"x:"+this.x+",y:"+this.y}}),me.Vector2d.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.Vector2d.Error"}})}(),function(){me.Vector3d=me.Object.extend({init:function(t,e,n){return this.set(t||0,e||0,n||0)},_set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},set:function(t,e,n){if(t!==+t||e!==+e||n!==+n)throw new me.Vector3d.Error("invalid x, y, z parameters (not a number)");return this._set(t,e,n)},setZero:function(){return this.set(0,0,0)},setV:function(t){return this._set(t.x,t.y,void 0!==t.z?t.z:this.z)},add:function(t){return this._set(this.x+t.x,this.y+t.y,this.z+(t.z||0))},sub:function(t){return this._set(this.x-t.x,this.y-t.y,this.z-(t.z||0))},scale:function(t,e,n){return e=void 0!==e?e:t,n=void 0!==n?n:t,this._set(this.x*t,this.y*e,this.z*n)},scaleV:function(t){return this._set(this.x*t.x,this.y*t.y,this.z*(t.z||1))},toIso:function(){return this._set(this.x-this.y,.5*(this.x+this.y),this.z)},to2d:function(){return this._set(this.y+this.x/2,this.y-this.x/2,this.z)},div:function(t){return this._set(this.x/t,this.y/t,this.z/t)},abs:function(){return this._set(this.x<0?-this.x:this.x,this.y<0?-this.y:this.y,this.z<0?-this.z:this.z)},clamp:function(t,e){return new me.Vector3d(this.x.clamp(t,e),this.y.clamp(t,e),this.z.clamp(t,e))},clampSelf:function(t,e){return this._set(this.x.clamp(t,e),this.y.clamp(t,e),this.z.clamp(t,e))},minV:function(t){var e=t.z||0;return this._set(this.x<t.x?this.x:t.x,this.y<t.y?this.y:t.y,this.z<e?this.z:e)},maxV:function(t){var e=t.z||0;return this._set(this.x>t.x?this.x:t.x,this.y>t.y?this.y:t.y,this.z>e?this.z:e)},floor:function(){return new me.Vector3d(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},floorSelf:function(){return this._set(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},ceil:function(){return new me.Vector3d(Math.ceil(this.x),Math.ceil(this.y),Math.ceil(this.z))},ceilSelf:function(){return this._set(Math.ceil(this.x),Math.ceil(this.y),Math.ceil(this.z))},negate:function(){return new me.Vector3d(-this.x,-this.y,-this.z)},negateSelf:function(){return this._set(-this.x,-this.y,-this.z)},copy:function(t){return this._set(t.x,t.y,void 0!==t.z?t.z:this.z)},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===(t.z||this.z)},normalize:function(){var t=this.length();return t>0?this._set(this.x/t,this.y/t,this.z/t):this},perp:function(){return this._set(this.y,-this.x,this.z)},rotate:function(t){var e=this.x,n=this.y;return this._set(e*Math.cos(t)-n*Math.sin(t),e*Math.sin(t)+n*Math.cos(t),this.z)},dotProduct:function(t){return this.x*t.x+this.y*t.y+this.z*(t.z||1)},length2:function(){return this.dotProduct(this)},length:function(){return Math.sqrt(this.length2())},distance:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-(t.z||0);return Math.sqrt(e*e+n*n+i*i)},angle:function(t){return Math.acos((this.dotProduct(t)/(this.length()*t.length())).clamp(-1,1))},project:function(t){return this.scale(this.dotProduct(t)/t.length2())},projectN:function(t){return this.scale(this.dotProduct(t))},clone:function(){return new me.Vector3d(this.x,this.y,this.z)},toString:function(){return"x:"+this.x+",y:"+this.y+",z:"+this.z}}),me.Vector3d.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.Vector3d.Error"}})}(),function(){me.ObservableVector2d=me.Vector2d.extend({init:function(t,e,n){if(Object.defineProperty(this,"x",{get:function(){return this._x},set:function(t){this.onUpdate(t,this._y,this._x,this._y),this._x=t}}),Object.defineProperty(this,"y",{get:function(){return this._y},set:function(t){this.onUpdate(this._x,t,this._x,this._y),this._y=t}}),void 0===n)throw new me.ObservableVector2d.Error("undefined `onUpdate` callback");this.setCallback(n.onUpdate),this._x=t||0,this._y=e||0},_set:function(t,e){return this.onUpdate(t,e,this._x,this._y),this._x=t,this._y=e,this},setMuted:function(t,e){return this._x=t,this._y=e,this},setCallback:function(t){if("function"!=typeof t)throw new me.ObservableVector2d.Error("invalid `onUpdate` callback");return this.onUpdate=t,this},add:function(t){return this._set(this._x+t.x,this._y+t.y)},sub:function(t){return this._set(this._x-t.x,this._y-t.y)},scale:function(t,e){return this._set(this._x*t,this._y*(void 0!==e?e:t))},scaleV:function(t){return this._set(this._x*t.x,this._y*t.y)},div:function(t){return this._set(this._x/t,this._y/t)},abs:function(){return this._set(this._x<0?-this._x:this._x,this._y<0?-this._y:this._y)},clamp:function(t,e){return new me.ObservableVector2d(this.x.clamp(t,e),this.y.clamp(t,e),{onUpdate:this.onUpdate})},clampSelf:function(t,e){return this._set(this._x.clamp(t,e),this._y.clamp(t,e))},minV:function(t){return this._set(this._x<t.x?this._x:t.x,this._y<t.y?this._y:t.y)},maxV:function(t){return this._set(this._x>t.x?this._x:t.x,this._y>t.y?this._y:t.y)},floor:function(){return new me.ObservableVector2d(Math.floor(this._x),Math.floor(this._y),{onUpdate:this.onUpdate})},floorSelf:function(){return this._set(Math.floor(this._x),Math.floor(this._y))},ceil:function(){return new me.ObservableVector2d(Math.ceil(this._x),Math.ceil(this._y),{onUpdate:this.onUpdate})},ceilSelf:function(){return this._set(Math.ceil(this._x),Math.ceil(this._y))},negate:function(){return new me.ObservableVector2d(-this._x,-this._y,{onUpdate:this.onUpdate})},negateSelf:function(){return this._set(-this._x,-this._y)},copy:function(t){return this._set(t.x,t.y)},equals:function(t){return this._x===t.x&&this._y===t.y},normalize:function(){var t=this.length();return t>0?this._set(this._x/t,this._y/t):this},perp:function(){return this._set(this._y,-this._x)},rotate:function(t){var e=this._x,n=this._y;return this._set(e*Math.cos(t)-n*Math.sin(t),e*Math.sin(t)+n*Math.cos(t))},dotProduct:function(t){return this._x*t.x+this._y*t.y},distance:function(t){return Math.sqrt((this._x-t.x)*(this._x-t.x)+(this._y-t.y)*(this._y-t.y))},clone:function(){return new me.ObservableVector2d(this._x,this._y,{onUpdate:this.onUpdate})},toVector2d:function(){return new me.Vector2d(this._x,this._y)},toString:function(){return"x:"+this._x+",y:"+this._y}}),me.ObservableVector2d.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.ObservableVector2d.Error"}})}(),function(){me.ObservableVector3d=me.Vector3d.extend({init:function(t,e,n,i){if(Object.defineProperty(this,"x",{get:function(){return this._x},set:function(t){this.onUpdate(t,this._y,this._z,this._x,this._y,this._z),this._x=t}}),Object.defineProperty(this,"y",{get:function(){return this._y},set:function(t){this.onUpdate(this._x,t,this._z,this._x,this._y,this._z),this._y=t}}),Object.defineProperty(this,"z",{get:function(){return this._z},set:function(t){this.onUpdate(this._x,this._y,t,this._x,this._y,this._z),this._z=t}}),void 0===i)throw new me.ObservableVector3d.Error("undefined `onUpdate` callback");this.setCallback(i.onUpdate),this._x=t||0,this._y=e||0,this._z=n||0},_set:function(t,e,n){return this.onUpdate(t,e,n,this._x,this._y,this._z),this._x=t,this._y=e,this._z=n,this},setMuted:function(t,e,n){return this._x=t,this._y=e,this._z=n,this},setCallback:function(t){if("function"!=typeof t)throw new me.ObservableVector2d.Error("invalid `onUpdate` callback");return this.onUpdate=t,this},add:function(t){return this._set(this._x+t.x,this._y+t.y,this._z+(t.z||0))},sub:function(t){return this._set(this._x-t.x,this._y-t.y,this._z-(t.z||0))},scale:function(t,e,n){return e=void 0!==e?e:t,n=void 0!==n?n:t,this._set(this._x*t,this._y*e,this._z*n)},scaleV:function(t){return this._set(this._x*t.x,this._y*t.y,this._z*(t.z||1))},div:function(t){return this._set(this._x/t,this._y/t,this._z/t)},abs:function(){return this._set(this._x<0?-this._x:this._x,this._y<0?-this._y:this._y,this._Z<0?-this._z:this._z)},clamp:function(t,e){return new me.ObservableVector3d(this._x.clamp(t,e),this._y.clamp(t,e),this._z.clamp(t,e),{onUpdate:this.onUpdate})},clampSelf:function(t,e){return this._set(this._x.clamp(t,e),this._y.clamp(t,e),this._z.clamp(t,e))},minV:function(t){var e=t.z||0;return this._set(this._x<t.x?this._x:t.x,this._y<t.y?this._y:t.y,this._z<e?this._z:e)},maxV:function(t){var e=t.z||0;return this._set(this._x>t.x?this._x:t.x,this._y>t.y?this._y:t.y,this._z>e?this._z:e)},floor:function(){return new me.ObservableVector3d(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z),{onUpdate:this.onUpdate})},floorSelf:function(){return this._set(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))},ceil:function(){return new me.ObservableVector3d(Math.ceil(this._x),Math.ceil(this._y),Math.ceil(this._z),{onUpdate:this.onUpdate})},ceilSelf:function(){return this._set(Math.ceil(this._x),Math.ceil(this._y),Math.ceil(this._z))},negate:function(){return new me.ObservableVector3d(-this._x,-this._y,-this._z,{onUpdate:this.onUpdate})},negateSelf:function(){return this._set(-this._x,-this._y,-this._z)},copy:function(t){return this._set(t.x,t.y,void 0!==t.z?t.z:this._z)},equals:function(t){return this._x===t.x&&this._y===t.y&&this._z===(t.z||this._z)},normalize:function(){var t=this.length();return t>0?this._set(this._x/t,this._y/t,this._z/t):this},perp:function(){return this._set(this._y,-this._x,this._z)},rotate:function(t){var e=this._x,n=this._y;return this._set(e*Math.cos(t)-n*Math.sin(t),e*Math.sin(t)+n*Math.cos(t),this._z)},dotProduct:function(t){return this._x*t.x+this._y*t.y+this._z*(t.z||1)},distance:function(t){var e=this._x-t.x,n=this._y-t.y,i=this._z-(t.z||0);return Math.sqrt(e*e+n*n+i*i)},clone:function(){return new me.ObservableVector3d(this._x,this._y,this._z,{onUpdate:this.onUpdate})},toVector3d:function(){return new me.Vector3d(this._x,this._y,this._z)},toString:function(){return"x:"+this._x+",y:"+this._y+",z:"+this._z}}),me.ObservableVector3d.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.ObservableVector3d.Error"}})}(),function(){me.Matrix2d=me.Object.extend({init:function(){void 0===this.val&&(this.val=new Float32Array(9)),arguments.length&&arguments[0]instanceof me.Matrix2d?this.copy(arguments[0]):arguments.length>=6?this.setTransform.apply(this,arguments):this.identity()},identity:function(){return this.setTransform(1,0,0,0,1,0,0,0,1),this},setTransform:function(){var t=this.val;return 9===arguments.length?(t[0]=arguments[0],t[1]=arguments[1],t[2]=arguments[2],t[3]=arguments[3],t[4]=arguments[4],t[5]=arguments[5],t[6]=arguments[6],t[7]=arguments[7],t[8]=arguments[8]):6===arguments.length&&(t[0]=arguments[0],t[1]=arguments[2],t[2]=arguments[4],t[3]=arguments[1],t[4]=arguments[3],t[5]=arguments[5],t[6]=0,t[7]=0,t[8]=1),this},copy:function(t){return this.val.set(t.val),this},multiply:function(t){t=t.val;var e=this.val,n=e[0],i=e[1],r=e[3],o=e[4],s=t[0],a=t[1],u=t[3],h=t[4],l=t[6],c=t[7];return e[0]=n*s+r*a,e[1]=i*s+o*a,e[3]=n*u+r*h,e[4]=i*u+o*h,e[6]+=n*l+r*c,e[7]+=i*l+o*c,this},transpose:function(){var t,e=this.val;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},invert:function(){var t=this.val,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],u=t[7],h=t[8],l=h*o-s*u,c=s*a-h*r,f=u*r-o*a,d=e*l+n*c+i*f;return t[0]=l/d,t[1]=(i*u-h*n)/d,t[2]=(s*n-i*o)/d,t[3]=c/d,t[4]=(h*e-i*a)/d,t[5]=(i*r-s*e)/d,t[6]=f/d,t[7]=(n*a-u*e)/d,t[8]=(o*e-n*r)/d,this},multiplyVector:function(t){var e=this.val,n=t.x,i=t.y;return t.x=n*e[0]+i*e[3]+e[6],t.y=n*e[1]+i*e[4]+e[7],t},multiplyVectorInverse:function(t){var e=this.val,n=t.x,i=t.y,r=1/(e[0]*e[4]+e[3]*-e[1]);return t.x=e[4]*r*n+-e[3]*r*i+(e[7]*e[3]-e[6]*e[4])*r,t.y=e[0]*r*i+-e[1]*r*n+(-e[7]*e[0]+e[6]*e[1])*r,t},scale:function(t,e){var n=this.val,i=t,r=void 0===e?i:e;return n[0]*=i,n[1]*=i,n[3]*=r,n[4]*=r,this},scaleV:function(t){return this.scale(t.x,t.y)},scaleX:function(t){return this.scale(t,1)},scaleY:function(t){return this.scale(1,t)},rotate:function(t){if(0!==t){var e=this.val,n=e[0],i=e[1],r=e[3],o=e[4],s=Math.sin(t),a=Math.cos(t);e[0]=n*a+r*s,e[1]=i*a+o*s,e[3]=n*-s+r*a,e[4]=i*-s+o*a}return this},translate:function(t,e){var n=this.val;return n[6]+=n[0]*t+n[3]*e,n[7]+=n[1]*t+n[4]*e,this},translateV:function(t){return this.translate(t.x,t.y)},isIdentity:function(){var t=this.val;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&1===t[4]&&0===t[5]&&0===t[6]&&0===t[7]&&1===t[8]},clone:function(){return me.pool.pull("me.Matrix2d",this)},toString:function(){var t=this.val;return"me.Matrix2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}})}(),function(){me.Ellipse=me.Object.extend({init:function(t,e,n,i){this.pos=new me.Vector2d,this._bounds=void 0,this.radius=NaN,this.radiusV=new me.Vector2d,this.radiusSq=new me.Vector2d,this.ratio=new me.Vector2d,this.shapeType="Ellipse",this.setShape(t,e,n,i)},setShape:function(t,e,n,i){var r=n/2,o=i/2;this.pos.set(t,e),this.radius=Math.max(r,o),this.ratio.set(r/this.radius,o/this.radius),this.radiusV.set(this.radius,this.radius).scaleV(this.ratio);var s=this.radius*this.radius;return this.radiusSq.set(s,s).scaleV(this.ratio),this.updateBounds(),this},rotate:function(){return this},scale:function(t,e){return e=void 0!==e?e:t,this.setShape(this.pos.x,this.pos.y,2*this.radiusV.x*t,2*this.radiusV.y*e)},scaleV:function(t){return this.scale(t.x,t.y)},transform:function(){return this},translate:function(t,e){return this.pos.x+=t,this.pos.y+=e,this._bounds.translate(t,e),this},translateV:function(t){return this.pos.add(t),this._bounds.translateV(t),this},containsPointV:function(t){return this.containsPoint(t.x,t.y)},containsPoint:function(t,e){return t-=this.pos.x,e-=this.pos.y,t*t/this.radiusSq.x+e*e/this.radiusSq.y<=1},getBounds:function(){return this._bounds},updateBounds:function(){var t=this.radiusV.x,e=this.radiusV.y,n=this.pos.x-t,i=this.pos.y-e,r=2*t,o=2*e;return this._bounds?this._bounds.setShape(n,i,r,o):this._bounds=new me.Rect(n,i,r,o),this._bounds},clone:function(){return new me.Ellipse(this.pos.x,this.pos.y,2*this.radiusV.x,2*this.radiusV.y)}})}(),function(){me.Polygon=me.Object.extend({init:function(t,e,n){this.pos=new me.Vector2d,this._bounds=void 0,this.points=null,this.shapeType="Polygon",this.setShape(t,e,n)},setShape:function(t,e,n){return this.pos.set(t,e),this.points=n,this.recalc(),this.updateBounds(),this},transform:function(t){for(var e=this.points,n=e.length,i=0;i<n;i++)t.multiplyVector(e[i]);return this.recalc(),this.updateBounds(),this},toIso:function(){return this.rotate(Math.PI/4).scale(Math.SQRT2,Math.SQRT1_2)},to2d:function(){return this.scale(Math.SQRT1_2,Math.SQRT2).rotate(-Math.PI/4)},rotate:function(t){if(0!==t){for(var e=this.points,n=e.length,i=0;i<n;i++)e[i].rotate(t);this.recalc(),this.updateBounds()}return this},scale:function(t,e){e=void 0!==e?e:t;for(var n=this.points,i=n.length,r=0;r<i;r++)n[r].scale(t,e);return this.recalc(),this.updateBounds(),this},scaleV:function(t){return this.scale(t.x,t.y)},recalc:function(){var t,e=this.edges=[],n=this.normals=[],i=this.points,r=i.length;if(r<3)throw new me.Polygon.Error("Requires at least 3 points");for(t=0;t<r;t++){var o=(new me.Vector2d).copy(i[(t+1)%r]).sub(i[t]);e.push(o),n.push((new me.Vector2d).copy(o).perp().normalize())}return this},translate:function(t,e){return this.pos.x+=t,this.pos.y+=e,this._bounds.translate(t,e),this},translateV:function(t){return this.pos.add(t),this._bounds.translateV(t),this},containsPointV:function(t){return this.containsPoint(t.x,t.y)},containsPoint:function(t,e){for(var n=!1,i=this.pos.x,r=this.pos.y,o=this.points,s=o.length,a=0,u=s-1;a<s;u=a++){var h=o[a].y+r,l=o[a].x+i,c=o[u].y+r,f=o[u].x+i;h>e!=c>e&&t<(f-l)*(e-h)/(c-h)+l&&(n=!n)}return n},getBounds:function(){return this._bounds},updateBounds:function(){return this._bounds||(this._bounds=new me.Rect(0,0,0,0)),this._bounds.setPoints(this.points),this._bounds.translateV(this.pos),this._bounds},clone:function(){var t=[];return this.points.forEach(function(e){t.push(new me.Vector2d(e.x,e.y))}),new me.Polygon(this.pos.x,this.pos.y,t)}}),me.Polygon.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.Polygon.Error"}})}(),function(){me.Rect=me.Polygon.extend({init:function(t,e,n,i){this.pos=new me.Vector2d,this.points=[new me.Vector2d,new me.Vector2d,new me.Vector2d,new me.Vector2d],this.shapeType="Rectangle",this.setShape(t,e,n,i)},setShape:function(t,e,n,i){return this.points[0].set(0,0),this.points[1].set(n,0),this.points[2].set(n,i),this.points[3].set(0,i),me.Polygon.prototype.setShape.apply(this,[t,e,this.points]),this._width=n,this._height=i,this},resize:function(t,e){return this.width=t,this.height=e,this},getBounds:function(){return this},setPoints:function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;return t.forEach(function(t){e=Math.min(e,t.x),n=Math.min(n,t.y),i=Math.max(i,t.x),r=Math.max(r,t.y)}),this.setShape(e,n,i-e,r-n),this},recalc:function(){return me.Polygon.prototype.recalc.apply(this),this._width=this.points[2].x,this._height=this.points[2].y,this},updateBounds:function(){return this},clone:function(){return new me.Rect(this.pos.x,this.pos.y,this._width,this._height)},copy:function(t){return this.setShape(t.pos.x,t.pos.y,t._width,t._height)},translate:function(t,e){return this.pos.x+=t,this.pos.y+=e,this},translateV:function(t){return this.translate(t.x,t.y)},union:function(t){var e=Math.min(this.left,t.left),n=Math.min(this.top,t.top);return this.resize(Math.max(this.right,t.right)-e,Math.max(this.bottom,t.bottom)-n),this.pos.set(e,n),this},overlaps:function(t){return this.left<t.right&&t.left<this.right&&this.top<t.bottom&&t.top<this.bottom},contains:function(t){return t.left>=this.left&&t.right<=this.right&&t.top>=this.top&&t.bottom<=this.bottom},containsPoint:function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},toPolygon:function(){return new me.Polygon(this.pos.x,this.pos.y,this.points)}}),Object.defineProperty(me.Rect.prototype,"left",{get:function(){return this.pos.x},configurable:!0}),Object.defineProperty(me.Rect.prototype,"right",{get:function(){var t=this._width;return this.pos.x+t||t},configurable:!0}),Object.defineProperty(me.Rect.prototype,"top",{get:function(){return this.pos.y},configurable:!0}),Object.defineProperty(me.Rect.prototype,"bottom",{get:function(){var t=this._height;return this.pos.y+t||t},configurable:!0}),Object.defineProperty(me.Rect.prototype,"width",{get:function(){return this._width},set:function(t){this.points[1].x=this.points[2].x=t,this.recalc()},configurable:!0}),Object.defineProperty(me.Rect.prototype,"height",{get:function(){return this._height},set:function(t){this.points[2].y=this.points[3].y=t,this.recalc()},configurable:!0})}(),function(){me.Line=me.Polygon.extend({containsPointV:function(t){return this.containsPoint(t.x,t.y)},containsPoint:function(t,e){t-=this.pos.x,e-=this.pos.y;var n=this.points[0],i=this.points[1];return(e-n.y)*(i.x-n.x)==(i.y-n.y)*(t-n.x)},recalc:function(){var t=this.edges=[],e=this.normals=[],n=this.points;if(2!==n.length)throw new me.Line.Error("Requires exactly 2 points");var i=(new me.Vector2d).copy(n[1]).sub(n[0]);return t.push(i),e.push((new me.Vector2d).copy(i).perp().normalize()),this},clone:function(){var t=[];return this.points.forEach(function(e){t.push(new me.Vector2d(e.x,e.y))}),new me.Line(this.pos.x,this.pos.y,t)}}),me.Line.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.Line.Error"}})}(),function(){me.Body=me.Rect.extend({init:function(t,e){this.entity=t,this.shapes=[],this.collisionMask=me.collision.types.ALL_OBJECT,this.collisionType=me.collision.types.ENEMY_OBJECT,void 0===this.vel&&(this.vel=new me.Vector2d),this.vel.set(0,0),void 0===this.accel&&(this.accel=new me.Vector2d),this.accel.set(0,0),void 0===this.friction&&(this.friction=new me.Vector2d),this.friction.set(0,0),void 0===this.maxVel&&(this.maxVel=new me.Vector2d),this.maxVel.set(1e3,1e3),this.gravity=void 0!==me.sys.gravity?me.sys.gravity:.98,this.falling=!1,this.jumping=!1,me.Rect.prototype.init.apply(this,[0,0,t.width,t.height]);for(var n=0;n<e.length;n++)this.addShape(e[n].clone(),!0)},addShape:function(t,e){return t instanceof me.Rect?this.shapes.push(t.toPolygon()):this.shapes.push(t),!0!==e&&this.updateBounds(),this.shapes.length},addShapesFromJSON:function(t,e,n){var i;if(n=n||1,void 0===t.rigidBodies){if(void 0===(i=t[e]))throw new me.Body.Error("Identifier ("+e+") undefined for the given PhysicsEditor JSON object)");for(var r=0;r<i.length;r++){for(var o=[],s=0;s<i[r].shape.length;s+=2)o.push(new me.Vector2d(i[r].shape[s],i[r].shape[s+1]));this.addShape(new me.Polygon(0,0,o),!0)}}else{if(t.rigidBodies.forEach(function(t){t.name===e&&(i=t)}),void 0===i)throw new me.Body.Error("Identifier ("+e+") undefined for the given PhysicsEditor JSON object)");this.pos.set(i.origin.x,1-i.origin.y).scale(n);var a=this;i.polygons.forEach(function(t){var e=[];t.forEach(function(t){e.push(new me.Vector2d(t.x,1-t.y).scale(n))}),a.addShape(new me.Polygon(0,0,e),!0)}),i.circles.forEach(function(t){a.addShape(new me.Ellipse(t.cx*n,(1-t.cy)*n,2*t.r*n,2*t.r*n),!0)})}return this.updateBounds(),this.shapes.length},getShape:function(t){return this.shapes[t||0]},removeShape:function(t){return this.shapes.remove(t),this.updateBounds(),this.shapes.length},removeShapeAt:function(t){return this.removeShape(this.getShape(t))},setCollisionMask:function(t){this.collisionMask=t},respondToCollision:function(t){var e=t.overlapV;if(this.entity.pos.sub(e),0!==e.x&&(this.vel.x=~~(.5+this.vel.x-e.x)||0),0!==e.y){this.vel.y=~~(.5+this.vel.y-e.y)||0;var n=Math.sign(this.gravity)||1;this.falling=e.y>=n,this.jumping=e.y<=-n}},updateBounds:function(){if(this.shapes.length>0){var t=this.shapes[0].getBounds();this.pos.setV(t.pos),this.resize(t.width,t.height);for(var e=1;e<this.shapes.length;e++)this.union(this.shapes[e].getBounds())}return this.entity.onBodyUpdate(this.pos,this.width,this.height),this},setVelocity:function(t,e){this.accel.x=0!==t?t:this.accel.x,this.accel.y=0!==e?e:this.accel.y,this.setMaxVelocity(t,e)},setMaxVelocity:function(t,e){this.maxVel.x=t,this.maxVel.y=e},setFriction:function(t,e){this.friction.x=t||0,this.friction.y=e||0},applyFriction:function(t){var e=this.friction.x*me.timer.tick,n=t.x+e,i=t.x-e,r=this.friction.y*me.timer.tick,o=t.y+r,s=t.y-r;t.x=n<0?n:i>0?i:0,t.y=o<0?o:s>0?s:0},computeVelocity:function(t){this.gravity&&(t.y+=this.gravity*me.timer.tick,this.falling=t.y*Math.sign(this.gravity)>0,this.jumping=!this.falling&&this.jumping),(this.friction.x||this.friction.y)&&this.applyFriction(t),0!==t.y&&(t.y=t.y.clamp(-this.maxVel.y,this.maxVel.y)),0!==t.x&&(t.x=t.x.clamp(-this.maxVel.x,this.maxVel.x))},update:function(){return this.computeVelocity(this.vel),this.entity.pos.add(this.vel),0!==this.vel.x||0!==this.vel.y},destroy:function(){this.entity=null,this.shapes=[]}}),me.Body.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.Body.Error"}})}(),function(){function t(t,e,n,i){this.max_objects=e||4,this.max_levels=n||4,this.level=i||0,this.bounds=t,this.objects=[],this.nodes=[]}var e=[],n=function(t,n,i,r){if(e.length>0){var o=e.pop();return o.bounds=t,o.max_objects=n||4,o.max_levels=i||4,o.level=r||0,o}return new me.QuadTree(t,n,i,r)},i=function(t){e.push(t)},r=new me.Vector2d;t.prototype.split=function(){var t=this.level+1,e=~~(.5+this.bounds.width/2),i=~~(.5+this.bounds.height/2),r=~~(.5+this.bounds.pos.x),o=~~(.5+this.bounds.pos.y);this.nodes[0]=n({pos:{x:r+e,y:o},width:e,height:i},this.max_objects,this.max_levels,t),this.nodes[1]=n({pos:{x:r,y:o},width:e,height:i},this.max_objects,this.max_levels,t),this.nodes[2]=n({pos:{x:r,y:o+i},width:e,height:i},this.max_objects,this.max_levels,t),this.nodes[3]=n({pos:{x:r+e,y:o+i},width:e,height:i},this.max_objects,this.max_levels,t)},t.prototype.getIndex=function(t){var e=t.getBounds(),n=e.pos;(t.floating||t.ancestor&&t.ancestor.floating)&&(n=me.game.viewport.localToWorld(n.x,n.y,r));var i=-1,o=n.x,s=n.y,a=e.width,u=e.height,h=this.bounds.pos.x+this.bounds.width/2,l=this.bounds.pos.y+this.bounds.height/2,c=s<l&&s+u<l,f=s>l;return o<h&&o+a<h?c?i=1:f&&(i=2):o>h&&(c?i=0:f&&(i=3)),i},t.prototype.insertContainer=function(t){for(var e,n=t.children.length;n--,e=t.children[n];)e instanceof me.Container&&!(e instanceof me.ParticleContainer)?("rootContainer"!==e.name&&this.insert(e),this.insertContainer(e)):"function"==typeof e.getBounds&&this.insert(e)},t.prototype.insert=function(t){var e=-1;if(this.nodes.length>0&&-1!==(e=this.getIndex(t)))return void this.nodes[e].insert(t);if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels){0===this.nodes.length&&this.split();for(var n=0;n<this.objects.length;)e=this.getIndex(this.objects[n]),-1!==e?this.nodes[e].insert(this.objects.splice(n,1)[0]):n+=1}},t.prototype.retrieve=function(t,e){var n=this.objects;if(this.nodes.length>0){var i=this.getIndex(t);if(-1!==i)n=n.concat(this.nodes[i].retrieve(t));else for(var r=0;r<this.nodes.length;r+=1)n=n.concat(this.nodes[r].retrieve(t))}return"function"==typeof e&&n.sort(e),n},t.prototype.remove=function(t){var e=!1;if(void 0===t.getBounds)return!1;if(this.nodes.length>0){var n=this.getIndex(t);-1!==n&&(e=this.nodes[n].remove(t))&&this.nodes[n].isPrunable()&&this.nodes.splice(n,1)}return!1===e&&-1!==this.objects.indexOf(t)&&(this.objects.remove(t),e=!0),e},t.prototype.isPrunable=function(){return!(this.hasChildren()||this.objects.length>0)},t.prototype.hasChildren=function(){for(var t=0;t<this.nodes.length;t+=1){var e=this.nodes[t];if(e.length>0||e.objects.length>0)return!0}return!1},t.prototype.clear=function(t){this.objects.length=0;for(var e=0;e<this.nodes.length;e+=1)this.nodes[e].clear(),i(this.nodes[e]);this.nodes=[],void 0!==t&&this.bounds.setShape(t.pos.x,t.pos.y,t.width,t.height)},me.QuadTree=t}(),function(){function t(t,e,n){for(var i=Number.MAX_VALUE,r=-Number.MAX_VALUE,o=t.length,s=0;s<o;s++){var a=t[s].dotProduct(e);a<i&&(i=a),a>r&&(r=a)}n[0]=i,n[1]=r}function e(e,n,i,r,o,a){var h=u.pop(),l=u.pop(),c=s.pop().copy(n).sub(e),f=c.dotProduct(o);if(t(i,o,h),t(r,o,l),l[0]+=f,l[1]+=f,h[0]>l[1]||l[0]>h[1])return s.push(c),u.push(h),u.push(l),!0;if(a){var d=0;if(h[0]<l[0])if(a.aInB=!1,h[1]<l[1])d=h[1]-l[0],a.bInA=!1;else{var p=h[1]-l[0],m=l[1]-h[0];d=p<m?p:-m}else if(a.bInA=!1,h[1]>l[1])d=h[0]-l[1],a.aInB=!1;else{var g=h[1]-l[0],v=l[1]-h[0];d=g<v?g:-v}var y=Math.abs(d);y<a.overlap&&(a.overlap=y,a.overlapN.copy(o),d<0&&a.overlapN.negateSelf())}return s.push(c),u.push(h),u.push(l),!1}function n(t,e){var n=t.length2(),s=e.dotProduct(t);return s<0?i:s>n?o:r}for(var i=-1,r=0,o=1,s=[],a=0;a<10;a++)s.push(new me.Vector2d);for(var u=[],h=0;h<5;h++)u.push([]);me.collision=function(){var t={};return t.quadTree=null,t.maxDepth=4,t.maxChildren=8,t.bounds=null,t.types={NO_OBJECT:0,PLAYER_OBJECT:1,NPC_OBJECT:2,ENEMY_OBJECT:4,COLLECTABLE_OBJECT:8,ACTION_OBJECT:16,PROJECTILE_OBJECT:32,WORLD_SHAPE:64,USER:128,ALL_OBJECT:4294967295},t.init=function(){t.bounds=me.game.viewport.clone(),t.quadTree=new me.QuadTree(t.bounds,t.maxChildren,t.maxDepth),me.event.subscribe(me.event.LEVEL_LOADED,function(){t.bounds=me.game.world.clone(),t.quadTree.clear(t.bounds)})},t.ResponseObject=function(){this.a=null,this.b=null,this.overlapN=new me.Vector2d,this.overlapV=new me.Vector2d,this.aInB=!0,this.bInA=!0,this.indexShapeA=-1,this.indexShapeB=-1,this.overlap=Number.MAX_VALUE},t.ResponseObject.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this.indexShapeA=-1,this.indexShapeB=-1,this},t.response=new t.ResponseObject,t.shouldCollide=function(t,e){return t.body&&e.body&&0!=(t.body.collisionMask&e.body.collisionType)&&0!=(t.body.collisionType&e.body.collisionMask)},t.check=function(e,n){for(var i,r=0,o=n||t.response,s=t.quadTree.retrieve(e),a=s.length;a--,i=s[a];)if(i!==e&&t.shouldCollide(e,i)&&e.getBounds().overlaps(i.getBounds())){var u=e.body.shapes.length,h=i.body.shapes.length;if(0===u||0===h)continue;var l=0;do{var c=e.body.getShape(l),f=0;do{var d=i.body.getShape(f);!0===t["test"+c.shapeType+d.shapeType].call(this,e,c,i,d,o.clear())&&(r++,o.indexShapeA=l,o.indexShapeB=f,!1!==e.onCollision(o,i)&&e.body.respondToCollision.call(e.body,o),!1!==i.onCollision(o,e)&&i.body.respondToCollision.call(i.body,o)),f++}while(f<h);l++}while(l<u)}return r>0},t.testPolygonPolygon=function(t,n,i,r,o){var a,u=n.points,h=n.normals,l=h.length,c=r.points,f=r.normals,d=f.length,p=s.pop().copy(t.pos).add(t.ancestor._absPos).add(n.pos),m=s.pop().copy(i.pos).add(i.ancestor._absPos).add(r.pos);for(a=0;a<l;a++)if(e(p,m,u,c,h[a],o))return s.push(p),s.push(m),!1;for(a=0;a<d;a++)if(e(p,m,u,c,f[a],o))return s.push(p),s.push(m),!1;return o&&(o.a=t,o.b=i,o.overlapV.copy(o.overlapN).scale(o.overlap)),s.push(p),s.push(m),!0},t.testEllipseEllipse=function(t,e,n,i,r){var o=s.pop().copy(n.pos).add(n.ancestor._absPos).add(i.pos).sub(t.pos).add(t.ancestor._absPos).sub(e.pos),a=e.radius,u=i.radius,h=a+u,l=h*h,c=o.length2();if(c>l)return s.push(o),!1;if(r){var f=Math.sqrt(c);r.a=t,r.b=n,r.overlap=h-f,r.overlapN.copy(o.normalize()),r.overlapV.copy(o).scale(r.overlap),r.aInB=a<=u&&f<=u-a,r.bInA=u<=a&&f<=a-u}return s.push(o),!0},t.testPolygonEllipse=function(t,e,r,a,u){for(var h=s.pop().copy(r.pos).add(r.ancestor._absPos).add(a.pos).sub(t.pos).add(t.ancestor._absPos).sub(e.pos),l=a.radius,c=l*l,f=e.points,d=e.edges,p=d.length,m=s.pop(),g=s.pop(),v=s.pop(),y=0,_=0;_<p;_++){var w=_===p-1?0:_+1,b=0===_?p-1:_-1,x=0,T=null;m.copy(d[_]),v.copy(h).sub(f[_]),u&&v.length2()>c&&(u.aInB=!1);var E=n(m,v),A=!0;if(E===i){var S=null;if(p>1&&(m.copy(d[b]),S=s.pop().copy(h).sub(f[b]),(E=n(m,S))!==o&&(A=!1)),A){if((y=v.length())>l)return s.push(h),s.push(m),s.push(g),s.push(v),S&&s.push(S),!1;u&&(u.bInA=!1,T=v.normalize(),x=l-y)}S&&s.push(S)}else if(E===o){if(p>1&&(m.copy(d[w]),v.copy(h).sub(f[w]),(E=n(m,v))!==i&&(A=!1)),A){if((y=v.length())>l)return s.push(h),s.push(m),s.push(g),s.push(v),!1;u&&(u.bInA=!1,T=v.normalize(),x=l-y)}}else{g.copy(e.normals[_]),y=v.dotProduct(g);var P=Math.abs(y);if((1===p||y>0)&&P>l)return s.push(h),s.push(m),s.push(g),s.push(v),!1;u&&(T=g,x=l-y,(y>=0||x<2*l)&&(u.bInA=!1))}T&&u&&Math.abs(x)<Math.abs(u.overlap)&&(u.overlap=x,u.overlapN.copy(T))}return u&&(u.a=t,u.b=r,u.overlapV.copy(u.overlapN).scale(u.overlap)),s.push(h),s.push(m),s.push(g),s.push(v),!0},t.testEllipsePolygon=function(e,n,i,r,o){var s=t.testPolygonEllipse(i,r,e,n,o);if(s&&o){var a=o.a,u=o.aInB;o.overlapN.negateSelf(),o.overlapV.negateSelf(),o.a=o.b,o.b=a,o.aInB=o.bInA,o.bInA=u}return s},t}()}(),function(){me.Renderable=me.Rect.extend({init:function(t,e,n,i){this.isRenderable=!0,void 0!==this.currentTransform?this.currentTransform.identity():this.currentTransform=me.pool.pull("me.Matrix2d"),this.GUID=void 0,this.inViewport=!1,this.alwaysUpdate=!1,this.updateWhenPaused=!1,this.isPersistent=!1,this.floating=!1,this.anchorPoint=new me.Vector2d(.5,.5),this.autoTransform=!1,this.alpha=1,this.ancestor=void 0,this._bounds?this._bounds.setShape(t,e,n,i):this._bounds=new me.Rect(t,e,n,i),this._absPos?this._absPos.set(t,e):this._absPos=new me.Vector2d(t,e),this.pos instanceof me.ObservableVector3d?this.pos.setMuted(t,e,0).setCallback(this.updateBoundsPos.bind(this)):this.pos=new me.ObservableVector3d(t,e,0,{onUpdate:this.updateBoundsPos.bind(this)}),this._width=n,this._height=i,this.shapeType="Rectangle",this.setOpacity(1)},getBounds:function(){return this._bounds},getOpacity:function(){return this.alpha},setOpacity:function(t){"number"==typeof t&&(this.alpha=t.clamp(0,1),this.alpha!==this.alpha&&(this.alpha=1))},transform:function(t){var e=this.getBounds();return this.currentTransform.multiply(t),e.setPoints(e.transform(t).points),e.pos.setV(this.pos),this},scale:function(t,e){var n=t,i=void 0===e?n:e;return this.currentTransform.scale(n,i),this.getBounds().resize(this.width*n,this.height*i),this},scaleV:function(t){return this.scale(t.x,t.y),this},update:function(){return!1},updateBoundsPos:function(t,e){var n=this.getBounds();return n.pos.set(t,e,n.pos.z),this.ancestor&&n.pos.add(this.ancestor._absPos),n},updateBounds:function(){return console.warn("Deprecated: me.Renderable.updateBounds"),me.Rect.prototype.updateBounds.apply(this)},draw:function(){},destroy:function(){me.pool.push(this.currentTransform),this.currentTransform=void 0,this.onDestroyEvent.apply(this,arguments)},onDestroyEvent:function(){}}),Object.defineProperty(me.Renderable.prototype,"width",{get:function(){return this._width},set:function(t){this.getBounds().width=t,this._width=t},configurable:!0}),Object.defineProperty(me.Renderable.prototype,"height",{get:function(){return this._height},set:function(t){this.getBounds().height=t,this._height=t},configurable:!0}),me.Renderable.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.Renderable.Error"}})}(),function(){me.Sprite=me.Renderable.extend({init:function(t,e,n){if(this.animationpause=!1,this.animationspeed=100,this.offset=new me.Vector2d,this.anim={},this.resetAnim=null,this.current={offset:new me.Vector2d,width:0,height:0,angle:0},this.dt=0,this._flip={lastX:!1,lastY:!1},void 0!==n.flipX&&this._flip.lastX(!!n.flipX),void 0!==n.flipY&&this._flip.lastY(!!n.flipY),this._flicker={isFlickering:!1,duration:0,callback:null,state:!1},this.isSprite=!0,n.image instanceof me.CanvasRenderer.prototype.Texture){if(this.image=n.image.getTexture(),this.textureAtlas=n.image,void 0!==n.region){var i=n.image.getRegion(n.region);if(!i)throw new me.Renderable.Error("Texture - region for "+n.region+" not found");this.setRegion(i),n.framewidth=n.framewidth||i.width,n.frameheight=n.frameheight||i.height}}else this.image=me.utils.getImage(n.image),n.framewidth=n.framewidth||this.image.width,n.frameheight=n.frameheight||this.image.height,this.textureAtlas=me.video.renderer.cache.get(this.image,n).getAtlas();this.current.width=n.framewidth,this.current.height=n.frameheight,void 0!==n.atlas?(this.textureAtlas=n.atlas,this.atlasIndices=n.atlasIndices):this.atlasIndices=null,me.Renderable.prototype.init.apply(this,[t,e,this.current.width,this.current.height]),void 0!==n.rotation&&this.currentTransform.rotate(n.rotation),n.anchorPoint&&this.anchorPoint.set(n.anchorPoint.x,n.anchorPoint.y),0!==this.addAnimation("default",null)&&this.setCurrentAnimation("default")},isFlickering:function(){return this._flicker.isFlickering},flicker:function(t,e){this._flicker.duration=t,this._flicker.duration<=0?(this._flicker.isFlickering=!1,this._flicker.callback=null):this._flicker.isFlickering||(this._flicker.callback=e,this._flicker.isFlickering=!0)},flipX:function(t){t!==this._flip.lastX&&(console.warn("Deprecated: me.Sprite.flipX"),this._flip.lastX=t,this.currentTransform.scaleX(-1))},flipY:function(t){t!==this._flip.lastY&&(console.warn("Deprecated: me.Sprite.flipY"),this._flip.lastY=t,this.currentTransform.scaleY(-1))},addAnimation:function(t,e,n){this.anim[t]={name:t,frames:[],idx:0,length:0};var i=0;if("object"!=typeof this.textureAtlas)return 0;null==e&&(e=[],Object.keys(this.textureAtlas).forEach(function(t,n){e[n]=n}));for(var r=0,o=e.length;r<o;r++){var s,a=e[r];s="number"==typeof a||"string"==typeof a?{name:a,delay:n||this.animationspeed}:a;var u=s.name;if("number"==typeof u)void 0!==this.textureAtlas[u]&&(this.anim[t].frames[r]=Object.assign({},this.textureAtlas[u],s),i++);else{if(null===this.atlasIndices)throw new me.Renderable.Error("string parameters for addAnimation are not allowed for standard spritesheet based Texture");this.anim[t].frames[r]=Object.assign({},this.textureAtlas[this.atlasIndices[u]],s),i++}}return this.anim[t].length=i,i},setCurrentAnimation:function(t,e,n){if(!this.anim[t])throw new me.Renderable.Error("animation id '"+t+"' not defined");this.current=this.anim[t],this.resetAnim=e||null,this.setAnimationFrame(this.current.idx),this.current.name=t,n||(this.dt=0)},isCurrentAnimation:function(t){return this.current.name===t},setRegion:function(t){this.current.offset.setV(t.offset),this.current.angle=t.angle,this.current.width=t.width,this.current.height=t.height},setAnimationFrame:function(t){this.current.idx=(t||0)%this.current.length;var e=this.current.name,n=this.getAnimationFrameObjectByIndex(this.current.idx);Object.assign(this.current,n),this.current.name=e,n.anchorPoint&&this.anchorPoint.setV(n.anchorPoint)},getCurrentAnimationFrame:function(){return this.current.idx},getAnimationFrameObjectByIndex:function(t){return this.current.frames[t]},update:function(t){var e=!1;if(!this.animationpause&&this.current&&this.current.length>1){var n=this.getAnimationFrameObjectByIndex(this.current.idx).delay;for(this.dt+=t;this.dt>=n;){if(e=!0,this.dt-=n,this.setAnimationFrame(this.current.idx+1),0===this.current.idx&&this.resetAnim)if("string"==typeof this.resetAnim)this.setCurrentAnimation(this.resetAnim,null,!0);else if(!1===this.resetAnim()){this.setAnimationFrame(this.current.length-1),this.dt%=n;break}n=this.getAnimationFrameObjectByIndex(this.current.idx).delay}}return this._flicker.isFlickering&&(this._flicker.duration-=t,this._flicker.duration<0&&("function"==typeof this._flicker.callback&&this._flicker.callback(),this.flicker(-1)),e=!0),e},draw:function(t){if(!this._flicker.isFlickering||(this._flicker.state=!this._flicker.state,this._flicker.state)){var e=this.current,n=this.pos.x,i=this.pos.y,r=e.width,o=e.height,s=e.offset,a=this.offset;t.save(),t.setGlobalAlpha(t.globalAlpha()*this.getOpacity()),this.currentTransform.isIdentity()||t.transform(this.currentTransform),t.translate(-r*this.anchorPoint.x,-o*this.anchorPoint.y),0!==e.angle&&(t.translate(-n,-i),t.rotate(e.angle),n-=o,r=e.height,o=e.width),t.drawImage(this.image,a.x+s.x,a.y+s.y,r,o,n,i,r,o),t.restore()}}}),me.AnimationSheet=me.Sprite}(),function(){var t=Math.min,e=Math.max;me.Viewport=me.Renderable.extend({init:function(t,e,n,i){me.Renderable.prototype.init.apply(this,[t,e,n-t,i-e]),this.AXIS={NONE:0,HORIZONTAL:1,VERTICAL:2,BOTH:3},this.bounds=new me.Rect(-1/0,-1/0,1/0,1/0),this.offset=new me.Vector2d,this.target=null,this.follow_axis=this.AXIS.NONE,this._shake={intensity:0,duration:0,axis:this.AXIS.BOTH,onComplete:null},this._fadeOut={color:null,tween:null},this._fadeIn={color:null,tween:null},this.setDeadzone(this.width/6,this.height/6)},_followH:function(n){var i=this.pos.x;return n.x-this.pos.x>this.deadzone.right?this.pos.x=t(n.x-this.deadzone.right,this.bounds.width-this.width):n.x-this.pos.x<this.deadzone.pos.x&&(this.pos.x=e(n.x-this.deadzone.pos.x,this.bounds.pos.x)),i!==this.pos.x},_followV:function(n){var i=this.pos.y;return n.y-this.pos.y>this.deadzone.bottom?this.pos.y=t(n.y-this.deadzone.bottom,this.bounds.height-this.height):n.y-this.pos.y<this.deadzone.pos.y&&(this.pos.y=e(n.y-this.deadzone.pos.y,this.bounds.pos.y)),i!==this.pos.y},reset:function(t,e){this.pos.x=t||0,this.pos.y=e||0,this.target=null,this.follow_axis=null,this.currentTransform.identity()},setDeadzone:function(t,e){void 0===this.deadzone&&(this.deadzone=new me.Rect(0,0,0,0)),this.deadzone.pos.set(~~((this.width-t)/2),~~((this.height-e)/2-.25*e)),this.deadzone.resize(t,e),this.updateTarget()},resize:function(t,e){me.Renderable.prototype.resize.apply(this,[t,e]);var n=me.levelDirector.getCurrentLevel();return this.setBounds(0,0,Math.max(t,n?n.width:0),Math.max(e,n?n.height:0)),this.setDeadzone(t/6,e/6),this.moveTo(0,0),this.update(),me.event.publish(me.event.VIEWPORT_ONRESIZE,[this.width,this.height]),this},setBounds:function(t,e,n,i){this.bounds.pos.set(t,e),this.bounds.resize(n,i),this.moveTo(this.pos.x,this.pos.y)},follow:function(t,e){if(t instanceof me.Renderable)this.target=t.pos;else{if(!(t instanceof me.Vector2d||t instanceof me.Vector3d))throw new me.Renderable.Error("invalid target for viewport.follow");this.target=t}this.follow_axis=void 0===e?this.AXIS.BOTH:e,this.updateTarget()},move:function(t,e){this.moveTo(this.pos.x+t,this.pos.y+e)},moveTo:function(t,e){this.pos.x=t.clamp(this.bounds.pos.x,this.bounds.width-this.width),this.pos.y=e.clamp(this.bounds.pos.y,this.bounds.height-this.height),me.event.publish(me.event.VIEWPORT_ONCHANGE,[this.pos])},updateTarget:function(){var t=!1;if(this.target)switch(this.follow_axis){case this.AXIS.NONE:break;case this.AXIS.HORIZONTAL:t=this._followH(this.target);break;case this.AXIS.VERTICAL:t=this._followV(this.target);break;case this.AXIS.BOTH:t=this._followH(this.target),t=this._followV(this.target)||t}return t},update:function(t){var e=this.updateTarget();return this._shake.duration>0&&(this._shake.duration-=t,this._shake.duration<=0?(this._shake.duration=0,this.offset.setZero(),"function"==typeof this._shake.onComplete&&this._shake.onComplete()):(this._shake.axis!==this.AXIS.BOTH&&this._shake.axis!==this.AXIS.HORIZONTAL||(this.offset.x=(Math.random()-.5)*this._shake.intensity),this._shake.axis!==this.AXIS.BOTH&&this._shake.axis!==this.AXIS.VERTICAL||(this.offset.y=(Math.random()-.5)*this._shake.intensity)),e=!0),!0===e&&me.event.publish(me.event.VIEWPORT_ONCHANGE,[this.pos]),null==this._fadeIn.tween&&null==this._fadeOut.tween||(e=!0),e},shake:function(t,e,n,i,r){0!==this._shake.duration&&!0!==r||(this._shake.intensity=t,this._shake.duration=e,this._shake.axis=n||this.AXIS.BOTH,this._shake.onComplete="function"==typeof i?i:void 0)},fadeOut:function(t,e,n){this._fadeOut.color=me.pool.pull("me.Color").copy(t),this._fadeOut.tween=me.pool.pull("me.Tween",this._fadeOut.color).to({alpha:0},e||1e3).onComplete(n||null),this._fadeOut.tween.isPersistent=!0,this._fadeOut.tween.start()},fadeIn:function(t,e,n){this._fadeIn.color=me.pool.pull("me.Color").copy(t);var i=this._fadeIn.color.alpha;this._fadeIn.color.alpha=0,this._fadeIn.tween=me.pool.pull("me.Tween",this._fadeIn.color).to({alpha:i},e||1e3).onComplete(n||null),this._fadeIn.tween.isPersistent=!0,this._fadeIn.tween.start()},getWidth:function(){return this.width},getHeight:function(){return this.height},focusOn:function(t){var e=t.getBounds();this.moveTo(t.pos.x+e.pos.x+e.width/2,t.pos.y+e.pos.y+e.height/2)},isVisible:function(t){return t.overlaps(this)},localToWorld:function(t,e,n){return n=n||new me.Vector2d,n.set(t,e).add(this.pos).sub(me.game.world.pos)},worldToLocal:function(t,e,n){return n=n||new me.Vector2d,n.set(t,e).sub(this.pos).add(me.game.world.pos)},draw:function(t){this._fadeIn.tween&&(t.clearColor(this._fadeIn.color),1===this._fadeIn.color.alpha&&(this._fadeIn.tween=null,me.pool.push(this._fadeIn.color),this._fadeIn.color=null)),this._fadeOut.tween&&(t.clearColor(this._fadeOut.color),0===this._fadeOut.color.alpha&&(this._fadeOut.tween=null,me.pool.push(this._fadeOut.color),this._fadeOut.color=null))}})}(),function(){me.GUI_Object=me.Sprite.extend({init:function(t,e,n){this.isClickable=!0,this.holdThreshold=250,this.isHoldable=!1,this.hover=!1,this.holdTimeout=null,this.updated=!1,this.released=!0,me.Sprite.prototype.init.apply(this,[t,e,n]),this.floating=!0},update:function(){return!!this.updated&&(this.released||(this.updated=!1),!0)},clicked:function(t){if((1===t.which||me.device.touch)&&this.isClickable)return this.updated=!0,this.released=!1,this.isHoldable&&(null!==this.holdTimeout&&me.timer.clearTimeout(this.holdTimeout),this.holdTimeout=me.timer.setTimeout(this.hold.bind(this),this.holdThreshold,!1),this.released=!1),this.onClick(t)},onClick:function(){return!1},enter:function(t){return this.hover=!0,this.onOver(t)},onOver:function(){},leave:function(t){return this.hover=!1,this.release.call(this,t),this.onOut(t)},onOut:function(){},release:function(t){if(!1===this.released)return this.released=!0,me.timer.clearTimeout(this.holdTimeout),this.onRelease(t)},onRelease:function(){return!1},hold:function(){me.timer.clearTimeout(this.holdTimeout),this.released||this.onHold()},onHold:function(){},onActivateEvent:function(){me.input.registerPointerEvent("pointerdown",this,this.clicked.bind(this)),me.input.registerPointerEvent("pointerup",this,this.release.bind(this)),me.input.registerPointerEvent("pointercancel",this,this.release.bind(this)),me.input.registerPointerEvent("pointerenter",this,this.enter.bind(this)),me.input.registerPointerEvent("pointerleave",this,this.leave.bind(this))},onDeactivateEvent:function(){me.input.releasePointerEvent("pointerdown",this),me.input.releasePointerEvent("pointerup",this),me.input.releasePointerEvent("pointercancel",this),me.input.releasePointerEvent("pointerenter",this),me.input.releasePointerEvent("pointerleave",this),me.timer.clearTimeout(this.holdTimeout)}})}(),function(){var t=function(t,e){this.removeChildNow(t,e)},e=0;me.Container=me.Renderable.extend({init:function(t,e,n,i){this.pendingSort=null,this._root=!1,me.Renderable.prototype.init.apply(this,[t||0,e||0,n||1/0,i||1/0]),this.children=[],this.sortOn=me.game.sortOn,this.autoSort=!0,this.autoDepth=!0,this.drawCount=0,this.childBounds=this.getBounds().clone(),this.autoTransform=!1},addChild:function(t,e){return t.ancestor instanceof me.Container?t.ancestor.removeChildNow(t):t.isRenderable&&(t.GUID=me.utils.createGUID(t.id)),t.ancestor=this,this.children.push(t),void 0!==t.pos&&("number"==typeof e?t.pos.z=e:!0===this.autoDepth&&(t.pos.z=this.children.length)),!0===this.autoSort&&this.sort(),"function"==typeof t.onActivateEvent&&this.isAttachedToRoot()&&t.onActivateEvent(),t},addChildAt:function(t,e){if(e>=0&&e<this.children.length)return t.ancestor instanceof me.Container?t.ancestor.removeChildNow(t):t.isRenderable&&(t.GUID=me.utils.createGUID()),t.ancestor=this,this.children.splice(e,0,t),"function"==typeof t.onActivateEvent&&this.isAttachedToRoot()&&t.onActivateEvent(),t;throw new me.Container.Error("Index ("+e+") Out Of Bounds for addChildAt()")},forEach:function(t,e){var n=this,i=0,r=this.children.length;if("function"!=typeof t)throw new me.Container.Error(t+" is not a function");for(arguments.length>1&&(n=e);i<r;)t.call(n,this.children[i],i,this.children),i++},swapChildren:function(t,e){var n=this.getChildIndex(t),i=this.getChildIndex(e);if(-1===n||-1===i)throw new me.Container.Error(t+" Both the supplied childs must be a child of the caller "+this);var r=t.pos.z;t.pos.z=e.pos.z,e.pos.z=r,this.children[n]=e,this.children[i]=t},getChildAt:function(t){if(t>=0&&t<this.children.length)return this.children[t];throw new me.Container.Error("Index ("+t+") Out Of Bounds for getChildAt()")},getChildIndex:function(t){return this.children.indexOf(t)},hasChild:function(t){return this===t.ancestor},getChildByProp:function(t,e){for(var n=[],i=this.children.length-1;i>=0;i--){var r=this.children[i];!function(t,i){var r=t[i];e instanceof RegExp&&"string"==typeof r?e.test(r)&&n.push(t):r===e&&n.push(t)}(r,t),r instanceof me.Container&&(n=n.concat(r.getChildByProp(t,e)))}return n},getChildByType:function(t){for(var e=[],n=this.children.length-1;n>=0;n--){var i=this.children[n];i instanceof t&&e.push(i),i instanceof me.Container&&(e=e.concat(i.getChildByType(t)))}return e},getChildByName:function(t){return this.getChildByProp("name",t)},getChildByGUID:function(t){var e=this.getChildByProp("GUID",t);return e.length>0?e[0]:null},updateChildBounds:function(){this.childBounds.pos.set(1/0,1/0),this.childBounds.resize(-1/0,-1/0);for(var t,e,n=this.children.length;n--,e=this.children[n];)e.isRenderable&&null!==(t=e instanceof me.Container?e.childBounds:e.getBounds())&&this.childBounds.union(t);return this.childBounds},isAttachedToRoot:function(){if(this._root)return!0;for(var t=this.ancestor;t;){if(!0===t._root)return!0;t=t.ancestor}return!1},updateBoundsPos:function(t,e){me.Renderable.prototype.updateBoundsPos.apply(this,[t,e]),this._absPos.set(t,e),this.ancestor&&this._absPos.add(this.ancestor._absPos);for(var n,i=this.children.length;i--,n=this.children[i];)n.isRenderable&&n.updateBoundsPos(n.pos.x,n.pos.y);return this.getBounds()},onActivateEvent:function(){for(var t,e=this.children.length;e--,t=this.children[e];)"function"==typeof t.onActivateEvent&&t.onActivateEvent()},removeChild:function(e,n){if(!this.hasChild(e))throw new me.Container.Error("Child is not mine.");t.defer(this,e,n)},removeChildNow:function(t,e){if(this.hasChild(t)&&this.getChildIndex(t)>=0){"function"==typeof t.onDeactivateEvent&&t.onDeactivateEvent(),e||("function"==typeof t.destroy&&t.destroy(),me.pool.push(t));var n=this.getChildIndex(t);n>=0&&(this.children.splice(n,1),t.ancestor=void 0)}},setChildsProperty:function(t,e,n){for(var i=this.children.length;i>=0;i--){var r=this.children[i];!0===n&&r instanceof me.Container&&r.setChildsProperty(t,e,n),r[t]=e}},moveUp:function(t){var e=this.getChildIndex(t);e-1>=0&&this.swapChildren(t,this.getChildAt(e-1))},moveDown:function(t){var e=this.getChildIndex(t);e>=0&&e+1<this.children.length&&this.swapChildren(t,this.getChildAt(e+1))},moveToTop:function(t){var e=this.getChildIndex(t);e>0&&(this.children.splice(0,0,this.children.splice(e,1)[0]),t.pos.z=this.children[1].pos.z+1)},moveToBottom:function(t){var e=this.getChildIndex(t);e>=0&&e<this.children.length-1&&(this.children.splice(this.children.length-1,0,this.children.splice(e,1)[0]),t.pos.z=this.children[this.children.length-2].pos.z-1)},sort:function(t){if(!this.pendingSort){if(!0===t)for(var e,n=this.children.length;n--,e=this.children[n];)e instanceof me.Container&&e.sort(t);this.pendingSort=function(t){t.children.sort(t["_sort"+t.sortOn.toUpperCase()]),t.pendingSort=null,me.game.repaint()}.defer(this,this)}},onDeactivateEvent:function(){for(var t,e=this.children.length;e--,t=this.children[e];)"function"==typeof t.onDeactivateEvent&&t.onDeactivateEvent()},_sortZ:function(t,e){return e.pos&&t.pos?e.pos.z-t.pos.z:t.pos?-1/0:1/0},_sortReverseZ:function(t,e){return t.pos&&e.pos?t.pos.z-e.pos.z:t.pos?1/0:-1/0},_sortX:function(t,e){if(!e.pos||!t.pos)return t.pos?-1/0:1/0;var n=e.pos.z-t.pos.z;return n||e.pos.x-t.pos.x},_sortY:function(t,e){if(!e.pos||!t.pos)return t.pos?-1/0:1/0;var n=e.pos.z-t.pos.z;return n||e.pos.y-t.pos.y},destroy:function(){this.pendingSort&&(clearTimeout(this.pendingSort),this.pendingSort=null);for(var t,e=this.children.length;e>=0;t=this.children[--e])t&&!t.isPersistent&&this.removeChildNow(t);this.currentTransform.identity()},update:function(t){me.Renderable.prototype.update.apply(this,[t]);var n=!1,i=!1,r=me.state.isPaused(),o=me.game.viewport;this._absPos.setV(this.pos),this.ancestor&&this._absPos.add(this.ancestor._absPos);for(var s,a=this.children.length;a--,s=this.children[a];)r&&!s.updateWhenPaused||(s.isRenderable?(i=e>0||s.floating,i&&e++,s.inViewport=i||o.isVisible(s.getBounds()),n=(s.inViewport||s.alwaysUpdate)&&s.update(t)||n,s._absPos.setV(this._absPos).add(s.pos),e>0&&e--):n=s.update(t)||n);return n},draw:function(t,e){var n=!1,i=!1,r=0,o=0;this.drawCount=0,t.save(),t.translate(this.pos.x,this.pos.y),this.currentTransform.isIdentity()||t.transform(this.currentTransform),t.setGlobalAlpha(t.globalAlpha()*this.getOpacity());for(var s,a=this.children.length;a--,s=this.children[a];)if(n=!0===s.floating,(s.inViewport||n)&&s.isRenderable){if(i=!s.currentTransform.isIdentity(),n)t.save(),t.resetTransform();else if(!0===s.autoTransform){var u=s.getBounds(),h=s.anchorPoint;r=u.width*h.x,o=u.height*h.y,i?(t.save(),s.currentTransform.translate(r,o),t.transform(s.currentTransform)):t.translate(r,o)}s.draw(t,e),n?t.restore():!0===s.autoTransform&&(i?(s.currentTransform.translate(-r,-o),t.restore()):t.translate(-r,-o)),this.drawCount++}t.restore()}}),me.Container.Error=me.Renderable.Error.extend({init:function(t){me.Renderable.Error.prototype.init.apply(this,[t]),this.name="me.Container.Error"}})}(),function(){me.Entity=me.Renderable.extend({init:function(t,e,n){if(this.renderable=null,"number"!=typeof n.width||"number"!=typeof n.height)throw new me.Entity.Error("height and width properties are mandatory when passing settings parameters to an object entity");me.Renderable.prototype.init.apply(this,[t,e,n.width,n.height]),n.image&&(this.renderable=new me.Sprite(0,0,{image:n.image,framewidth:~~(n.framewidth||n.width),frameheight:~~(n.frameheight||n.height),spacing:~~n.spacing,margin:~~n.margin,anchorPoint:n.anchorPoint})),n.anchorPoint&&this.anchorPoint.set(n.anchorPoint.x,n.anchorPoint.y),this.name=n.name||"",this.type=n.type||"",this.id=n.id||"",this.alive=!0;var i=Array.isArray(n.shapes)?n.shapes:[new me.Rect(0,0,this.width,this.height)];this.body?this.body.init(this,i):this.body=new me.Body(this,i);var r=this.body.updateBounds();if(0===this.width&&0===this.height&&this.resize(r.width,r.height),void 0!==n.collisionMask&&this.body.setCollisionMask(n.collisionMask),void 0!==n.collisionType){if(void 0===me.collision.types[n.collisionType])throw new me.Entity.Error("Invalid value for the collisionType property");this.body.collisionType=me.collision.types[n.collisionType]}this.autoTransform=!1},distanceTo:function(t){var e=this.getBounds(),n=t.getBounds(),i=e.pos.x+e.width/2-(n.pos.x+n.width/2),r=e.pos.y+e.height/2-(n.pos.y+n.height/2);return Math.sqrt(i*i+r*r)},distanceToPoint:function(t){var e=this.getBounds(),n=e.pos.x+e.width/2-t.x,i=e.pos.y+e.height/2-t.y;return Math.sqrt(n*n+i*i)},angleTo:function(t){var e=this.getBounds(),n=t.getBounds(),i=n.pos.x+n.width/2-(e.pos.x+e.width/2),r=n.pos.y+n.height/2-(e.pos.y+e.height/2);return Math.atan2(r,i)},angleToPoint:function(t){var e=this.getBounds(),n=t.x-(e.pos.x+e.width/2),i=t.y-(e.pos.y+e.height/2);return Math.atan2(i,n)},update:function(t){return this.renderable?this.renderable.update(t):me.Renderable.prototype.update.apply(this,[t])},updateBoundsPos:function(t,e){var n=this.body.pos;return me.Renderable.prototype.updateBoundsPos.apply(this,[t+n.x,e+n.y]),this.getBounds()},onBodyUpdate:function(t,e,n){var i=this.getBounds();i.pos.setV(this.pos).add(t),this.ancestor&&i.pos.add(this.ancestor._absPos),i.resize(e,n)},draw:function(t){var e=this.renderable;if(e instanceof me.Renderable){var n=this.anchorPoint.x*this.body.width,i=this.anchorPoint.y*this.body.height,r=this.pos.x+this.body.pos.x+n,o=this.pos.y+this.body.pos.y+i;if(t.translate(r,o),!0!==e.autoTransform||e.currentTransform.isIdentity())e.draw(t);else{var s=e.getBounds(),a=s.width*e.anchorPoint.x,u=s.height*e.anchorPoint.y;t.save(),t.translate(a,u),t.transform(e.currentTransform),t.translate(-a,-u),e.draw(t),t.restore()}t.translate(-r,-o)}},destroy:function(){this.renderable&&(this.renderable.destroy.apply(this.renderable,arguments),this.renderable=null),this.body.destroy.apply(this.body,arguments),this.body=null,me.Renderable.prototype.destroy.apply(this,arguments)},onDeactivateEvent:function(){this.renderable&&this.renderable.onDeactivateEvent&&this.renderable.onDeactivateEvent()},onCollision:function(){return!1}}),me.Entity.Error=me.Renderable.Error.extend({init:function(t){me.Renderable.Error.prototype.init.apply(this,[t]),this.name="me.Entity.Error"}})}(),function(){me.ScreenObject=me.Object.extend({init:function(){},reset:function(){me.game.reset(),this.onResetEvent.apply(this,arguments)},destroy:function(){this.onDestroyEvent.apply(this,arguments)},onResetEvent:function(){},onDestroyEvent:function(){}}),function(){var t=0,e=me.agent.prefixed("requestAnimationFrame"),n=me.agent.prefixed("cancelAnimationFrame")||me.agent.prefixed("cancelRequestAnimationFrame");e&&n||(e=function(e){var n=window.performance.now(),i=Math.max(0,1e3/60-(n-t)),r=window.setTimeout(function(){e(n+i)},i);return t=n+i,r},n=function(t){window.clearTimeout(t)}),window.requestAnimationFrame=e,window.cancelAnimationFrame=n}(),me.state=function(){function t(){-1===u&&-1!==a&&(me.timer.reset(),u=window.requestAnimationFrame(i))}function e(){h&&-1!==a&&(me.timer.reset(),h=!1)}function n(){h=!0}function i(t){me.game.update(t),me.game.draw(),-1!==u&&(u=window.requestAnimationFrame(i))}function r(){window.cancelAnimationFrame(u),u=-1}function o(e){r(),l[a]&&l[a].screen.destroy(),l[e]&&(a=e,l[a].screen.reset.apply(l[a].screen,d),t(),f&&f(),me.game.repaint())}var s={},a=-1,u=-1,h=!1,l={},c={color:"",duration:0},f=null,d=null,p=0;return s.LOADING=0,s.MENU=1,s.READY=2,s.PLAY=3,s.GAMEOVER=4,s.GAME_END=5,s.SCORE=6,s.CREDITS=7,s.SETTINGS=8,s.USER=100,s.onPause=null,s.onResume=null,s.onStop=null,s.onRestart=null,s.init=function(){s.set(s.LOADING,new me.DefaultLoadingScreen)},s.stop=function(t){a!==s.LOADING&&s.isRunning()&&(r(),!0===t&&me.audio.pauseTrack(),p=window.performance.now(),me.event.publish(me.event.STATE_STOP),"function"==typeof s.onStop&&s.onStop())},s.pause=function(t){a===s.LOADING||s.isPaused()||(n(),!0===t&&me.audio.pauseTrack(),p=window.performance.now(),me.event.publish(me.event.STATE_PAUSE),"function"==typeof s.onPause&&s.onPause())},s.restart=function(e){s.isRunning()||(t(),!0===e&&me.audio.resumeTrack(),p=window.performance.now()-p,me.game.repaint(),me.event.publish(me.event.STATE_RESTART,[p]),"function"==typeof s.onRestart&&s.onRestart())},s.resume=function(t){s.isPaused()&&(e(),!0===t&&me.audio.resumeTrack(),p=window.performance.now()-p,me.event.publish(me.event.STATE_RESUME,[p]),"function"==typeof s.onResume&&s.onResume())},s.isRunning=function(){return-1!==u},s.isPaused=function(){return h},s.set=function(t,e){if(!(e instanceof me.ScreenObject))throw new me.Error(e+" is not an instance of me.ScreenObject");l[t]={},l[t].screen=e,l[t].transition=!0},s.current=function(){return l[a].screen},s.transition=function(t,e,n){"fade"===t&&(c.color=e,c.duration=n)},s.setTransition=function(t,e){l[t].transition=e},s.change=function(t){if(void 0===l[t])throw new me.Error("Undefined ScreenObject for state '"+t+"'");s.isCurrent(t)||(d=null,arguments.length>1&&(d=Array.prototype.slice.call(arguments,1)),c.duration&&l[t].transition?(f=function(){me.game.viewport.fadeOut(c.color,c.duration)},me.game.viewport.fadeIn(c.color,c.duration,function(){o.defer(this,t)})):o.defer(this,t))},s.isCurrent=function(t){return a===t},s}()}(),function(){var t=me.Renderable.extend({init:function(t,e,n){me.Renderable.prototype.init.apply(this,[t.x,t.y,e,n]),this.invalidate=!1,this.barHeight=4,this.progress=0},onProgressUpdate:function(t){this.progress=~~(t*this.width),this.invalidate=!0},update:function(){return!0===this.invalidate&&(this.invalidate=!1,!0)},draw:function(t){t.setColor("black"),t.fillRect(0,this.height/2-this.barHeight/2,this.width,this.barHeight),t.setColor("#55aa00"),t.fillRect(2,this.height/2-this.barHeight/2,this.progress,this.barHeight),t.setColor("white")}}),e=me.Renderable.extend({init:function(t,e){me.Renderable.prototype.init.apply(this,[t,e,100,85]),this.iconCanvas=me.video.createCanvas(me.utils.nextPowerOfTwo(this.width),me.utils.nextPowerOfTwo(this.height),!1);var n=me.video.renderer.getContext2d(this.iconCanvas);n.beginPath(),n.moveTo(.7,48.9),n.bezierCurveTo(10.8,68.9,38.4,75.8,62.2,64.5),n.bezierCurveTo(86.1,53.1,97.2,27.7,87,7.7),n.lineTo(87,7.7),n.bezierCurveTo(89.9,15.4,73.9,30.2,50.5,41.4),n.bezierCurveTo(27.1,52.5,5.2,55.8,.7,48.9),n.lineTo(.7,48.9),n.lineTo(.7,48.9),n.closePath(),n.fillStyle="rgb(255, 255, 255)",n.fill(),n.beginPath(),n.moveTo(84,7),n.bezierCurveTo(87.6,14.7,72.5,30.2,50.2,41.6),n.bezierCurveTo(27.9,53,6.9,55.9,3.2,48.2),n.bezierCurveTo(-.5,40.4,14.6,24.9,36.9,13.5),n.bezierCurveTo(59.2,2.2,80.3,-.8,84,7),n.lineTo(84,7),n.closePath(),n.lineWidth=5.3,n.strokeStyle="rgb(255, 255, 255)",n.lineJoin="miter",n.miterLimit=4,n.stroke()},draw:function(t){t.drawImage(this.iconCanvas,this.pos.x,this.pos.y)}}),n=me.Renderable.extend({init:function(t,e){me.Renderable.prototype.init.apply(this,[0,0,t,e]),this.fontCanvas=me.video.createCanvas(128,32),this.drawFont(me.video.renderer.getContext2d(this.fontCanvas))},drawFont:function(t){var e=new me.Font("century gothic",32,"white","middle"),n=new me.Font("century gothic",32,"#55aa00","middle"),i=0;n.bold(),e.textBaseline=n.textBaseline="top",t.font=e.font,t.fillStyle=e.fillStyle.toRGBA(),t.textAlign=e.textAlign,t.textBaseline=e.textBaseline,i=t.measureText("melon").width,this.pos.x=Math.round((this.width-i-t.measureText("JS").width)/2),this.pos.y=this.height/2+16,e._drawFont(t,"melon",0,0),n._drawFont(t,"JS",i,0)},draw:function(t){t.drawImage(this.fontCanvas,this.pos.x,this.pos.y)}});me.DefaultLoadingScreen=me.ScreenObject.extend({onResetEvent:function(){me.game.world.addChild(new me.ColorLayer("background","#202020",0),0);var i=new t(new me.Vector2d,me.video.renderer.getWidth(),me.video.renderer.getHeight());this.loaderHdlr=me.event.subscribe(me.event.LOADER_PROGRESS,i.onProgressUpdate.bind(i)),this.resizeHdlr=me.event.subscribe(me.event.VIEWPORT_ONRESIZE,i.resize.bind(i)),me.game.world.addChild(i,1);var r=new e((me.video.renderer.getWidth()-100)/2,me.video.renderer.getHeight()/2-i.barHeight/2-90);me.game.world.addChild(r,1),me.game.world.addChild(new n(me.video.renderer.getWidth(),me.video.renderer.getHeight()),1)},onDestroyEvent:function(){me.event.unsubscribe(this.loaderHdlr),me.event.unsubscribe(this.resizeHdlr),this.loaderHdlr=this.resizeHdlr=null}})}(),function(){me.loader=function(){function t(e){if(f===c)if(e||o.onload){clearTimeout(d);var n=e||o.onload;setTimeout(function(){n(),me.event.publish(me.event.LOADER_COMPLETE)},300)}else console.error("no load callback defined");else d=setTimeout(function(){t(e)},100)}function e(t,e,n){s[t.name]=new Image,s[t.name].onload=e,s[t.name].onerror=n,"string"==typeof o.crossOrigin&&(s[t.name].crossOrigin=o.crossOrigin),s[t.name].src=t.src+o.nocache}function n(t,e,n){function i(e){a[t.name]=e,"tmx"===t.type&&me.levelDirector.addTMXLevel(t.name)}if(t.data)return i(t.data),void e();var r=new XMLHttpRequest,s=me.utils.getFileExtension(t.src);r.overrideMimeType&&("json"===s?r.overrideMimeType("application/json"):r.overrideMimeType("text/xml")),r.open("GET",t.src+o.nocache,!0),r.ontimeout=n,r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status||0===r.status&&r.responseText){var t=null;switch(s){case"xml":case"tmx":case"tsx":if(me.device.ua.match(/msie/i)||!r.responseXML){if(!window.DOMParser)throw new o.Error("XML file format loading not supported, use the JSON file format instead");t=(new DOMParser).parseFromString(r.responseText,"text/xml")}else t=r.responseXML;var a=me.TMXUtils.parse(t);switch(s){case"tmx":t=a.map;break;case"tsx":t=a.tilesets[0]}break;case"json":t=JSON.parse(r.responseText);break;default:throw new o.Error("TMX file format "+s+"not supported !")}i(t),e()}else n()},r.send(null)}function i(t,e,n){var i=new XMLHttpRequest;i.overrideMimeType&&i.overrideMimeType("application/json"),i.open("GET",t.src+o.nocache,!0),i.ontimeout=n,i.onreadystatechange=function(){4===i.readyState&&(200===i.status||0===i.status&&i.responseText?(h[t.name]=JSON.parse(i.responseText),e()):n())},i.send(null)}function r(t,e,n){var i=new XMLHttpRequest;i.open("GET",t.src+o.nocache,!0),i.responseType="arraybuffer",i.onerror=n,i.onload=function(){var n=i.response;if(n){for(var r=new Uint8Array(n),o=[],s=0;s<r.byteLength;s++)o[s]=String.fromCharCode(r[s]);u[t.name]=o.join(""),e()}},i.send()}var o={},s={},a={},u={},h={},l={},c=0,f=0,d=0;return o.nocache="",o.onload=void 0,o.onProgress=void 0,o.crossOrigin=void 0,o.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.loader.Error"}}),o.onResourceLoaded=function(t){f++;var e=o.getLoadProgress();o.onProgress&&o.onProgress(e,t),me.event.publish(me.event.LOADER_PROGRESS,[e,t])},o.onLoadingError=function(t){throw new o.Error("Failed loading resource "+t.src)},o.setNocache=function(t){o.nocache=t?"?"+~~(1e7*Math.random()):""},o.setBaseURL=function(t,e){"*"!==t?l[t]=e:(l.audio=e,l.binary=e,l.image=e,l.json=e,l.tmx=e,l.tsx=e)},o.preload=function(e,n,i){for(var r=0;r<e.length;r++)c+=o.load(e[r],o.onResourceLoaded.bind(o,e[r]),o.onLoadingError.bind(o,e[r]));void 0!==n&&(o.onload=n),!1!==i&&me.state.change(me.state.LOADING),t(n)},o.load=function(t,s,a){switch(void 0!==l[t.type]&&(t.src=l[t.type]+t.src),t.type){case"binary":return r.call(this,t,s,a),1;case"image":return e.call(this,t,s,a),1;case"json":return i.call(this,t,s,a),1;case"tmx":case"tsx":return n.call(this,t,s,a),1;case"audio":return me.audio.load(t,!!t.stream,s,a),1;default:throw new o.Error("load : unknown or invalid resource type : "+t.type)}},o.unload=function(t){switch(t.type){case"binary":return t.name in u&&(delete u[t.name],!0);case"image":return t.name in s&&("function"==typeof s[t.name].dispose&&s[t.name].dispose(),delete s[t.name],!0);case"json":return t.name in h&&(delete h[t.name],!0);case"tmx":case"tsx":return t.name in a&&(delete a[t.name],!0);case"audio":return me.audio.unload(t.name);default:throw new o.Error("unload : unknown or invalid resource type : "+t.type)}},o.unloadAll=function(){var t;for(t in u)u.hasOwnProperty(t)&&o.unload({name:t,type:"binary"});for(t in s)s.hasOwnProperty(t)&&o.unload({name:t,type:"image"});for(t in a)a.hasOwnProperty(t)&&o.unload({name:t,type:"tmx"});for(t in h)h.hasOwnProperty(t)&&o.unload({name:t,type:"json"});me.audio.unloadAll()},o.getTMX=function(t){return t=""+t,t in a?a[t]:null},o.getBinary=function(t){return t=""+t,t in u?u[t]:null},o.getImage=function(t){return t=""+t,t in s?s[t]:null},o.getJSON=function(t){return t=""+t,t in h?h[t]:null},o.getLoadProgress=function(){return f/c},o}()}(),function(){var t=["ex","em","pt","px"],e=[12,24,.75,1];me.Font=me.Renderable.extend({init:function(t,e,n,i){this.fontSize=new me.Vector2d,this.fillStyle=(new me.Color).copy(n),this.strokeStyle=new me.Color(0,0,0),this.lineWidth=1,this.textAlign=i||"left",this.textBaseline="top",this.lineHeight=1,me.Renderable.prototype.init.apply(this,[0,0,0,0]),this.setFont(t,e,n,i),this.gid||(this.gid=me.utils.createGUID())},bold:function(){this.font="bold "+this.font},italic:function(){this.font="italic "+this.font},setFont:function(n,i,r,o){var s=n.split(",").map(function(t){return t=t.trim(),/(^".*"$)|(^'.*'$)/.test(t)?t:'"'+t+'"'});if("number"==typeof i)this.fontSize.y=i,i+="px";else{var a=i.match(/([-+]?[\d.]*)(.*)/);this.fontSize.y=parseFloat(a[1]),a[2]?this.fontSize.y*=e[t.indexOf(a[2])]:i+="px"}this.height=this.fontSize.y,this.font=i+" "+s.join(","),void 0!==r&&this.fillStyle.copy(r),o&&(this.textAlign=o)},measureText:function(t,e){var n=t.getFontContext();n.font=this.font,n.fillStyle=this.fillStyle.toRGBA(),n.textAlign=this.textAlign,n.textBaseline=this.textBaseline,this.height=this.width=0;for(var i=(""+e).split("\n"),r=0;r<i.length;r++)this.width=Math.max(n.measureText(i[r].trimRight()).width,this.width),this.height+=this.fontSize.y*this.lineHeight;return{width:this.width,height:this.height}},draw:function(t,e,n,i){var r=t.globalAlpha();t.setGlobalAlpha(r*this.getOpacity()),t.drawFont(this._drawFont(t.getFontContext(),e,~~n,~~i,!1)),t.setGlobalAlpha(r)},drawStroke:function(t,e,n,i){var r=t.globalAlpha();t.setGlobalAlpha(r*this.getOpacity()),t.drawFont(this._drawFont(t.getFontContext(),e,~~n,~~i,!0)),t.setGlobalAlpha(r)},_drawFont:function(t,e,n,i,r){t.font=this.font,t.fillStyle=this.fillStyle.toRGBA(),r&&(t.strokeStyle=this.strokeStyle.toRGBA(),t.lineWidth=this.lineWidth),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline;for(var o=(""+e).split("\n"),s="",a=0,u=i,h=this.fontSize.y*this.lineHeight,l=0;l<o.length;l++)s=o[l].trimRight(),a=Math.max(a,t.measureText(s).width),t[r?"strokeText":"fillText"](s,n,i),i+=h;var c="right"===this.textAlign?n-a:"center"===this.textAlign?n-~~(a/2):n;return u=0===this.textBaseline.search(/^(top|hanging)$/)?u:"middle"===this.textBaseline?u-~~(h/2):u-h,this.getBounds().setShape(~~c,~~u,~~(a+.5),~~(o.length*h+.5))}})}(),function(){var t=function(t,e){for(var n=e.split(""),i=0,r=null,o=0;o<n.length;o++){var s=n[o].charCodeAt(0),a=t.bitmapFontData.glyphs[s],u=r&&r.kerning?r.getKerning(s):0;i+=(a.xadvance+u)*t.fontScale.x,r=a}return i};me.BitmapFont=me.Renderable.extend({init:function(t,e,n,i,r){this.sSize=me.pool.pull("me.Vector2d",0,0),this.fontImage=e,this.bitmapFontData=new me.BitmapFontData(t),this.fontScale=me.pool.pull("me.Vector2d",1,1),this.charCount=0,me.Renderable.prototype.init.apply(this,[0,0,0,0,0,0]),this.textAlign=i||"left",this.textBaseline=r||"top",this.lineHeight=1,n&&this.resize(n)},set:function(t,e){this.textAlign=t,e&&this.resize(e)},resize:function(t){this.fontScale.set(t,t)},measureText:function(e){for(var n=(""+e).split("\n"),i=0,r=0,o=this.bitmapFontData.capHeight*this.lineHeight,s=0;s<n.length;s++)i=Math.max(t(this,n[s]),i),r+=o;return{width:i,height:r*this.fontScale.y}},draw:function(e,n,i,r){var o=(""+n).split("\n"),s=i,a=this.bitmapFontData.capHeight*this.lineHeight*this.fontScale.y,u=e.globalAlpha();e.setGlobalAlpha(u*this.getOpacity()),this.pos.set(i,r,this.pos.z);for(var h=0;h<o.length;h++){i=s;var l=o[h].trimRight(),c=t(this,l);switch(this.textAlign){case"right":i-=c;break;case"center":i-=.5*c}switch(this.textBaseline){case"middle":r-=.5*a;break;case"ideographic":case"alphabetic":case"bottom":r-=a}for(var f=null,d=0,p=l.length;d<p;d++){var m=l.charCodeAt(d),g=this.bitmapFontData.glyphs[m],v=f&&f.kerning?f.getKerning(m):0;0!==g.width&&0!==g.height&&e.drawImage(this.fontImage,g.src.x,g.src.y,g.width,g.height,i+g.offset.x,r+g.offset.y*this.fontScale.y,g.width*this.fontScale.x,g.height*this.fontScale.y),i+=(g.xadvance+v)*this.fontScale.x,f=g}r+=a}e.setGlobalAlpha(u)}})}(),function(){me.BitmapFontData=me.Object.extend({init:function(t){this.padTop=0,this.padRight=0,this.padBottom=0,this.padLeft=0,this.lineHeight=0,this.capHeight=1,this.descent=0,this.scale=new me.Vector2d,this.glyphs={},this.xChars=["x","e","a","o","n","s","r","c","u","m","v","w","z"],this.capChars=["M","N","B","D","C","E","F","K","A","G","H","I","J","L","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.parse(t)},_createSpaceGlyph:function(){var t=" ".charCodeAt(0),e=this.glyphs[t];e||(e=me.pool.pull("me.Glyph"),e.id=t,e.xadvance=this._getFirstGlyph().xadvance,this.glyphs[t]=e)},_getFirstGlyph:function(){for(var t=Object.keys(this.glyphs),e=0;e<t.length;e++)if(t[e]>32)return this.glyphs[t[e]];return null},_getValueFromPair:function(t,e){var n=t.match(e);if(!n)throw"Could not find pattern "+e+" in string: "+t;return n[0].split("=")[1]},parse:function(t){if(!t)throw"File containing font data was empty, cannot load the bitmap font.";var e=t.split(/\r\n|\n/),n=t.match(/padding\=\d+,\d+,\d+,\d+/g);if(!n)throw"Padding not found in first line";var i=n[0].split("=")[1].split(",");this.padTop=parseFloat(i[0]),this.padLeft=parseFloat(i[1]),this.padBottom=parseFloat(i[2]),this.padRight=parseFloat(i[3]),this.lineHeight=parseFloat(this._getValueFromPair(e[1],/lineHeight\=\d+/g));for(var r=parseFloat(this._getValueFromPair(e[1],/base\=\d+/g)),o=this.padTop+this.padBottom,s=null,a=4;a<e.length;a++){var u=e[a],h=u.split(/=|\s+/);if(u&&!/^kernings/.test(u))if(/^kerning\s/.test(u)){var l=parseFloat(h[2]),c=parseFloat(h[4]),f=parseFloat(h[6]);s=this.glyphs[l],null!==s&&void 0!==s&&s.setKerning(c,f)}else{s=me.pool.pull("me.Glyph");var d=parseFloat(h[2]);s.id=d,s.src.set(parseFloat(h[4]),parseFloat(h[6])),s.width=parseFloat(h[8]),s.height=parseFloat(h[10]);var p=parseFloat(h[14]);s.offset.set(parseFloat(h[12]),p),s.xadvance=parseFloat(h[16]),s.width>0&&s.height>0&&(this.descent=Math.min(r+s.yoffset,this.descent)),this.glyphs[d]=s}}this.descent+=this.padBottom,this._createSpaceGlyph();var m=null;for(a=0;a<this.xChars.length;a++){var g=this.xChars[a];if(m=this.glyphs[g.charCodeAt(0)])break}m||(m=this._getFirstGlyph());var v=null;for(a=0;a<this.capChars.length;a++){var y=this.capChars[a];if(v=this.glyphs[y.charCodeAt(0)])break}if(v)this.capHeight=v.height;else for(var _ in this.glyphs)if(this.glyphs.hasOwnProperty(_)){if(s=this.glyphs[_],0===s.height||0===s.width)continue;this.capHeight=Math.max(this.capHeight,s.height)}this.capHeight-=o}})}(),function(){me.Glyph=me.Object.extend({init:function(){this.src=new me.Vector2d,this.offset=new me.Vector2d,this.onResetEvent()},onResetEvent:function(){this.id=0,this.src.set(0,0),this.width=0,this.height=0,this.u=0,this.v=0,this.u2=0,this.v2=0,this.offset.set(0,0),this.xadvance=0,this.fixedWidth=!1},getKerning:function(t){if(this.kerning){var e=this.kerning[t>>>9];if(e)return e[511&t]||0}return 0},setKerning:function(t,e){this.kerning||(this.kerning={});var n=this.kerning[t>>>9];void 0===n&&(this.kerning[t>>>9]={},n=this.kerning[t>>>9]),n[511&t]=e}})}(),function(){me.audio=function(){function t(t,e){if(r++>3){var i="melonJS: failed loading "+t;if(!1!==me.sys.stopOnAudioError)throw new me.audio.Error(i);me.audio.disable(),e&&e(),console.log(i+", disabling audio")}else n[t].load()}var e={},n={},i=null,r=0;return e.init=function(t){if(!me.initialized)throw new me.audio.Error("me.audio.init() called before engine initialization.");return t="string"==typeof t?t:"mp3",this.audioFormats=t.split(","),!Howler.noAudio},e.enable=function(){this.unmuteAll()},e.disable=function(){this.muteAll()},e.load=function(e,i,o,s){var a=[];if(void 0===this.audioFormats||0===this.audioFormats.length)throw new me.audio.Error("target audio extension(s) should be set through me.audio.init() before calling the preloader.");for(var u=0;u<this.audioFormats.length;u++)a.push(e.src+e.name+"."+this.audioFormats[u]+me.loader.nocache);return n[e.name]=new Howl({src:a,volume:Howler.volume(),html5:!0===i,onloaderror:function(){t.call(me.audio,e.name,s)},onload:function(){r=0,o&&o()}}),1},e.play=function(t,e,i,r){var o=n[t];if(o&&void 0!==o){var s=o.play();return"boolean"==typeof e&&o.loop(e,s),o.volume("number"==typeof r?r.clamp(0,1):Howler.volume(),s),"function"==typeof i&&(!0===e?o.on("end",i,s):o.once("end",i,s)),s}throw new me.audio.Error("audio clip "+t+" does not exist")},e.fade=function(t,e,i,r,o){var s=n[t];if(!s||void 0===s)throw new me.audio.Error("audio clip "+t+" does not exist");s.fade(e,i,r,o)},e.seek=function(t,e,i){var r=n[t];if(r&&void 0!==r)return r.seek.apply(r,Array.prototype.slice.call(arguments,1));throw new me.audio.Error("audio clip "+t+" does not exist")},e.rate=function(t,e,i){var r=n[t];if(r&&void 0!==r)return r.rate.apply(r,Array.prototype.slice.call(arguments,1));throw new me.audio.Error("audio clip "+t+" does not exist")},e.stop=function(t,e){var i=n[t];if(!i||void 0===i)throw new me.audio.Error("audio clip "+t+" does not exist");i.stop(e),i.off("end",void 0,e)},e.pause=function(t,e){var i=n[t];if(!i||void 0===i)throw new me.audio.Error("audio clip "+t+" does not exist");i.pause(e)},e.resume=function(t,e){var i=n[t];if(!i||void 0===i)throw new me.audio.Error("audio clip "+t+" does not exist");i.play(e)},e.playTrack=function(t,e){return i=t,me.audio.play(i,!0,null,e)},e.stopTrack=function(){null!==i&&(n[i].stop(),i=null)},e.pauseTrack=function(){null!==i&&n[i].pause()},e.resumeTrack=function(){null!==i&&n[i].play()},e.getCurrentTrack=function(){return i},e.setVolume=function(t){Howler.volume(t)},e.getVolume=function(){return Howler.volume()},e.mute=function(t,e,i){i=void 0===i||!!i;var r=n[t];if(!r||void 0===r)throw new me.audio.Error("audio clip "+t+" does not exist");r.mute(i,e)},e.unmute=function(t,n){e.mute(t,n,!1)},e.muteAll=function(){Howler.mute(!0)},e.unmuteAll=function(){Howler.mute(!1)},e.unload=function(t){return t in n&&(n[t].unload(),"function"==typeof n[t].dispose&&n[t].dispose(),delete n[t],!0)},e.unloadAll=function(){for(var t in n)n.hasOwnProperty(t)&&e.unload(t)},e}(),me.audio.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.audio.Error"}})}(),function(){me.video=function(){function t(t,e,n,i){try{return new me.WebGLRenderer(t,e,n,i)}catch(r){return new me.CanvasRenderer(t,e,n,i)}}var e={},n=null,i=0,r=1,o=0,s=0,a=1/0,u=1/0,h={wrapper:void 0,renderer:0,doubleBuffering:!1,autoScale:!1,scale:1,scaleMethod:"fit",transparent:!1,antiAlias:!1,subPixel:!1,verbose:!1};return e.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.video.Error"}}),e.CANVAS=0,e.WEBGL=1,e.AUTO=2,e.init=function(i,a,u){if(!me.initialized)throw new e.Error("me.video.init() called before engine initialization.");h=Object.assign(h,u||{}),h.doubleBuffering=!!h.doubleBuffering,h.useParentDOMSize=!!h.useParentDOMSize,h.autoScale="auto"===h.scale||!1,0!==h.scaleMethod.search(/^(fill-(min|max)|fit|flex(-(width|height))?|stretch)$/)&&(h.scaleMethod="fit"),h.transparent=!!h.transparent,!0===me.game.HASH.webgl&&(h.renderer=e.WEBGL),h.scale=h.autoScale?1:+h.scale||1,me.sys.scale=new me.Vector2d(h.scale,h.scale),(h.autoScale||1!==h.scale)&&(h.doubleBuffering=!0),r=i/a,o=i,s=a;var l=i*me.sys.scale.x,c=a*me.sys.scale.y;if(h.zoomX=l,h.zoomY=c,window.addEventListener("resize",throttle(100,!1,function(t){me.event.publish(me.event.WINDOW_ONRESIZE,[t])}),!1),window.addEventListener("orientationchange",function(t){me.event.publish(me.event.WINDOW_ONORIENTATION_CHANGE,[t])},!1),me.event.subscribe(me.event.WINDOW_ONRESIZE,me.video.onresize.bind(me.video)),me.event.subscribe(me.event.WINDOW_ONORIENTATION_CHANGE,me.video.onresize.bind(me.video)),n=!0===me.device.ejecta?document.getElementById("canvas"):e.createCanvas(l,c,!0),u.wrapper&&(h.wrapper=document.getElementById(u.wrapper)),h.wrapper||(h.wrapper=document.body),h.wrapper.appendChild(n),!n.getContext)return!1;switch(h.renderer){case e.WEBGL:this.renderer=new me.WebGLRenderer(n,i,a,h);break;case e.AUTO:this.renderer=t(n,i,a,h);break;default:this.renderer=new me.CanvasRenderer(n,i,a,h)}var f=me.device.getPixelRatio();if(f>1&&(n.style.width=n.width/f+"px",n.style.height=n.height/f+"px"),window.getComputedStyle){var d=window.getComputedStyle(n,null);me.video.setMaxSize(parseInt(d.maxWidth,10),parseInt(d.maxHeight,10))}return me.game.init(),me.video.onresize(),!0},e.getPos=function(t){return t=t||this.renderer.getScreenCanvas(),t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}},e.setMaxSize=function(t,e){a=t||1/0,u=e||1/0,this.onresize.defer(this)},e.createCanvas=function(t,i,r){if(0===t||0===i)throw new e.Error("width or height was zero, Canvas could not be initialized !");var o=document.createElement("canvas");return!0===r&&me.device.cocoon&&!0!==me.device.android2&&(o.screencanvas=!0),o.width=t||n.width,o.height=i||n.height,o},e.getWrapper=function(){return h.wrapper},e.onresize=function(){var t=1,e=1;if(void 0!==window.orientation?me.device.orientation=window.orientation:me.device.orientation=window.outerWidth>window.outerHeight?90:0,h.autoScale){var n,l,c=me.video.renderer.getScreenCanvas().parentNode;if(void 0!==c)if(h.useParentDOMSize&&"function"==typeof c.getBoundingClientRect){var f=c.getBoundingClientRect();n=f.width||f.right-f.left,l=f.height||f.bottom-f.top}else n=c.width,l=c.height;var d=Math.min(a,n||window.innerWidth),p=Math.min(u,l||window.innerHeight),m=d/p,g=1/0,v=1/0;"fill-min"===h.scaleMethod&&m>r||"fill-max"===h.scaleMethod&&m<r||"flex-width"===h.scaleMethod?(g=Math.min(a,s*m),t=e=d/g,g=~~(g+.5),this.renderer.resize(g,s),me.game.viewport.resize(g,s),me.game.world.updateChildBounds()):"fill-min"===h.scaleMethod&&m<r||"fill-max"===h.scaleMethod&&m>r||"flex-height"===h.scaleMethod?(v=Math.min(u,o*(p/d)),t=e=p/v,v=~~(v+.5),this.renderer.resize(o,v),me.game.viewport.resize(o,v),me.game.world.updateChildBounds()):"flex"===h.scaleMethod?(this.renderer.resize(d,p),me.game.viewport.resize(d,p),me.game.world.updateChildBounds()):"stretch"===h.scaleMethod?(t=d/o,e=p/s):t=e=m<r?d/o:p/s,t*=me.device.getPixelRatio(),e*=me.device.getPixelRatio(),i&&clearTimeout(i),i=me.video.updateDisplaySize.defer(this,t,e)}},e.updateDisplaySize=function(t,e){me.sys.scale.set(t,e),this.renderer.scaleCanvas(t,e),me.game.repaint(),me.input._offset=me.video.getPos(),i=0},e}()}(),function(){me.Renderer=me.Object.extend({init:function(t,e,n,i){return i=i||{},this.transparent=!!i.transparent,this.doubleBuffering=!!i.doubleBuffering,this.antiAlias=!!i.antiAlias,this.subPixel=!!i.subPixel,this.verbose=!!i.verbose,this.gameWidthZoom=i.zoomX||e,this.gameHeightZoom=i.zoomY||n,this.canvas=this.backBufferCanvas=t,this.context=null,this.currentColor=new me.Color(255,255,255,1),this.uvOffset=0,this},applyRGBFilter:function(t,e,n){var i,r,o=this.getContext2d(me.video.createCanvas(t.width,t.height,!1)),s=me.utils.getPixels(t),a=s.data;switch(e){case"b&w":for(i=0,r=a.length;i<r;i+=4){var u=3*a[i]+4*a[i+1]+a[i+2]>>>3;a[i]=u,a[i+1]=u,a[i+2]=u}break;case"brightness":var h=Math.abs(n).clamp(0,1);for(i=0,r=a.length;i<r;i+=4)a[i]*=h,a[i+1]*=h,a[i+2]*=h;break;case"transparent":var l=me.pool.pull("me.Color").parseCSS(n),c=me.pool.pull("me.Color");for(i=0,r=a.length;i<r;i+=4)c.setColor(a[i],a[i+1],a[i+2]),c.equals(l)&&(a[i+3]=0);me.pool.push(l),me.pool.push(c);break;default:return null}return o.putImageData(s,0,0),o},clear:function(){},reset:function(){this.resetTransform(),this.cache.reset()},getCanvas:function(){return this.backBufferCanvas},getScreenCanvas:function(){return this.canvas},getScreenContext:function(){return this.context},getContext2d:function(t,e){if(void 0===t||null===t)throw new me.video.Error("You must pass a canvas element in order to create a 2d context");if(void 0===t.getContext)throw new me.video.Error("Your browser does not support HTML5 canvas.");var n;return n=me.device.cocoon?t.getContext("2d",{antialias:this.antiAlias,alpha:!e}):t.getContext("2d",{alpha:!e}),n.canvas||(n.canvas=t),this.setAntiAlias(n,this.antiAlias),n},getWidth:function(){return this.backBufferCanvas.width},getHeight:function(){return this.backBufferCanvas.height},getColor:function(){return this.currentColor},globalAlpha:function(){return this.currentColor.glArray[3]},resize:function(t,e){this.backBufferCanvas.width=t,this.backBufferCanvas.height=e},setAntiAlias:function(t,e){void 0!==t&&me.agent.setPrefixed("imageSmoothingEnabled",!0===e,t);var n=t.canvas.style["image-rendering"];!1!==e||""!==n&&"auto"!==n?!0===e&&"pixelated"===n&&(t.canvas.style["image-rendering"]="auto"):t.canvas.style["image-rendering"]="pixelated"},drawFont:function(){}})}(),function(){me.Renderer.TextureCache=me.Object.extend({init:function(t){this.max_size=t||1/0,this.reset()},reset:function(){this.cache=new Map,this.units=new Map,this.length=0},validate:function(){if(this.length>=this.max_size)throw new me.video.Error("Texture cache overflow: "+this.max_size+" texture units available.")},get:function(t,e){return this.cache.has(t)||(e||(e=me.video.renderer.Texture.prototype.createAtlas.apply(me.video.renderer.Texture.prototype,[t.width,t.height,t.src?me.utils.getBasename(t.src):void 0])),this.put(t,new me.video.renderer.Texture(e,t,!1))),this.cache.get(t)},put:function(t,e){this.validate(),this.cache.set(t,e),this.units.set(e,this.length++)},getUnit:function(t){return this.units.get(t)}})}(),function(){me.CanvasRenderer=me.Renderer.extend({init:function(t,e,n,i){return me.Renderer.prototype.init.apply(this,[t,e,n,i]),this.context=this.getContext2d(this.canvas,!this.transparent),this.doubleBuffering?(this.backBufferCanvas=me.video.createCanvas(e,n,!1),this.backBufferContext2D=this.getContext2d(this.backBufferCanvas),this.transparent&&(this.context.globalCompositeOperation="copy")):(this.backBufferCanvas=this.canvas,this.backBufferContext2D=this.context),this.setColor(this.currentColor),this.cache=new me.Renderer.TextureCache,!1===i.textureSeamFix||this.antiAlias||(this.uvOffset=1),this},clear:function(){this.transparent&&this.clearColor("rgba(0,0,0,0)",!0)},flush:function(){this.doubleBuffering&&this.context.drawImage(this.backBufferCanvas,0,0,this.backBufferCanvas.width,this.backBufferCanvas.height,0,0,this.gameWidthZoom,this.gameHeightZoom)},clearColor:function(t,e){var n=this.backBufferContext2D,i=n.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.globalCompositeOperation=e?"copy":"source-over",n.fillStyle=t instanceof me.Color?t.toRGBA():t,n.fillRect(0,0,i.width,i.height),n.restore()},clearRect:function(t,e,n,i){this.backBufferContext2D.clearRect(t,e,n,i)},createPattern:function(t,e){return this.backBufferContext2D.createPattern(t,e)},drawImage:function(t,e,n,i,r,o,s,a,u){this.backBufferContext2D.globalAlpha<1/255||(!1===this.subPixel?(void 0===i?(i=a=t.width,r=u=t.height,o=e,s=n,e=0,n=0):void 0===o&&(o=e,s=n,a=i,u=r,i=t.width,r=t.height,e=0,n=0),this.backBufferContext2D.drawImage(t,e,n,i,r,~~o,~~s,a,u)):this.backBufferContext2D.drawImage.apply(this.backBufferContext2D,arguments))},drawPattern:function(t,e,n,i,r){if(!(this.backBufferContext2D.globalAlpha<1/255)){var o=this.backBufferContext2D.fillStyle;this.backBufferContext2D.fillStyle=t,this.backBufferContext2D.fillRect(e,n,i,r),this.backBufferContext2D.fillStyle=o}},fillArc:function(t,e,n,i,r,o){this.backBufferContext2D.globalAlpha<1/255||(this.translate(t+n,e+n),this.backBufferContext2D.beginPath(),this.backBufferContext2D.arc(0,0,n,i,r,o||!1),this.backBufferContext2D.fill(),this.backBufferContext2D.closePath(),this.translate(-(t+n),-(e+n)))},fillRect:function(t,e,n,i){this.backBufferContext2D.globalAlpha<1/255||this.backBufferContext2D.fillRect(t,e,n,i)},getContext:function(){return this.backBufferContext2D},getFontContext:function(){return this.getContext()},resetTransform:function(){this.backBufferContext2D.setTransform(1,0,0,1,0,0)},scaleCanvas:function(t,e){this.canvas.width=this.gameWidthZoom=this.backBufferCanvas.width*t,this.canvas.height=this.gameHeightZoom=this.backBufferCanvas.height*e,me.device.getPixelRatio()>1&&(this.canvas.style.width=this.canvas.width/me.device.getPixelRatio()+"px",this.canvas.style.height=this.canvas.height/me.device.getPixelRatio()+"px"),this.doubleBuffering&&this.transparent&&(this.context.globalCompositeOperation="copy"),this.setAntiAlias(this.context,this.antiAlias),this.flush()},save:function(){this.backBufferContext2D.save()},restore:function(){this.backBufferContext2D.restore(),this.currentColor.glArray[3]=this.backBufferContext2D.globalAlpha},rotate:function(t){this.backBufferContext2D.rotate(t)},scale:function(t,e){this.backBufferContext2D.scale(t,e)},setColor:function(t){this.backBufferContext2D.strokeStyle=this.backBufferContext2D.fillStyle=t instanceof me.Color?t.toRGBA():t},setGlobalAlpha:function(t){this.backBufferContext2D.globalAlpha=this.currentColor.glArray[3]=t},setLineWidth:function(t){this.backBufferContext2D.lineWidth=t},strokeArc:function(t,e,n,i,r,o){this.backBufferContext2D.globalAlpha<1/255||(this.translate(t+n,e+n),this.backBufferContext2D.beginPath(),this.backBufferContext2D.arc(0,0,n,i,r,o||!1),this.backBufferContext2D.stroke(),this.backBufferContext2D.closePath(),this.translate(-(t+n),-(e+n)))},strokeEllipse:function(t,e,n,i){if(!(this.backBufferContext2D.globalAlpha<1/255)){var r=n,o=i,s=t-r,a=t+r,u=e-o,h=e+o,l=.551784*r,c=.551784*o,f=t-l,d=t+l,p=e-c,m=e+c;this.backBufferContext2D.beginPath(),this.backBufferContext2D.moveTo(t,u),this.backBufferContext2D.bezierCurveTo(d,u,a,p,a,e),this.backBufferContext2D.bezierCurveTo(a,m,d,h,t,h),this.backBufferContext2D.bezierCurveTo(f,h,s,m,s,e),this.backBufferContext2D.bezierCurveTo(s,p,f,u,t,u),this.backBufferContext2D.stroke()}},strokeLine:function(t,e,n,i){this.backBufferContext2D.globalAlpha<1/255||(this.backBufferContext2D.beginPath(),this.backBufferContext2D.moveTo(t,e),this.backBufferContext2D.lineTo(n,i),this.backBufferContext2D.stroke())},strokePolygon:function(t){if(!(this.backBufferContext2D.globalAlpha<1/255)){this.translate(t.pos.x,t.pos.y),this.backBufferContext2D.beginPath(),this.backBufferContext2D.moveTo(t.points[0].x,t.points[0].y);for(var e,n=1;n<t.points.length;n++)e=t.points[n],this.backBufferContext2D.lineTo(e.x,e.y);this.backBufferContext2D.lineTo(t.points[0].x,t.points[0].y),this.backBufferContext2D.stroke(),this.backBufferContext2D.closePath(),this.translate(-t.pos.x,-t.pos.y)}},strokeRect:function(t,e,n,i){this.backBufferContext2D.globalAlpha<1/255||this.backBufferContext2D.strokeRect(t,e,n,i)},drawShape:function(t){"Rectangle"===t.shapeType?this.strokeRect(t.left,t.top,t.width,t.height):t instanceof me.Line||t instanceof me.Polygon?this.strokePolygon(t):t instanceof me.Ellipse&&(t.radiusV.x===t.radiusV.y?this.strokeArc(t.pos.x-t.radius,t.pos.y-t.radius,t.radius,0,2*Math.PI):this.strokeEllipse(t.pos.x,t.pos.y,t.radiusV.x,t.radiusV.y))},setTransform:function(t){this.resetTransform(),this.transform(t)},transform:function(t){var e=t.val,n=e[6],i=e[7];!1===this.subPixel&&(n=~~n,i=~~i),this.backBufferContext2D.transform(e[0],e[1],e[3],e[4],n,i)},translate:function(t,e){!1===this.subPixel?this.backBufferContext2D.translate(~~t,~~e):this.backBufferContext2D.translate(t,e)}})}(),function(){var t=-Math.PI/2;me.CanvasRenderer.prototype.Texture=me.Object.extend({init:function(t,e,n){if(this.format=null,this.texture=e||null,this.atlas=null,void 0!==t)if(void 0!==t.meta){if(t.meta.app.includes("texturepacker")){if(this.format="texturepacker",void 0===e){var i=t.meta.image;if(this.texture=me.utils.getImage(i),!this.texture)throw new me.video.renderer.Texture.Error("Atlas texture '"+i+"' not found")}this.repeat="no-repeat"}else if(t.meta.app.includes("ShoeBox")){if(!t.meta.exporter||!t.meta.exporter.includes("melonJS"))throw new me.video.renderer.Texture.Error("ShoeBox requires the JSON exporter : https://github.com/melonjs/melonJS/tree/master/media/shoebox_JSON_export.sbx");this.format="ShoeBox",this.repeat="no-repeat"}else t.meta.app.includes("melonJS")&&(this.format="melonJS",this.repeat=t.meta.repeat||"no-repeat");this.atlas=this.parse(t)}else void 0!==t.framewidth&&void 0!==t.frameheight&&(this.format="Spritesheet (fixed cell size)",void 0!==typeof e&&(t.image=e),this.atlas=this.parseFromSpriteSheet(t),this.repeat="no-repeat");if(!this.atlas)throw new me.video.renderer.Texture.Error("texture atlas format not supported");!1!==n&&(n instanceof me.Renderer.TextureCache?n.put(this.texture,this):me.video.renderer.cache.put(this.texture,this))},createAtlas:function(t,e,n,i){return{meta:{app:"melonJS",size:{w:t,h:e},repeat:i||"no-repeat"},frames:[{filename:n||"default",frame:{x:0,y:0,w:t,h:e}}]}},parse:function(e){var n={};return e.frames.forEach(function(e){if(e.hasOwnProperty("filename")){var i,r,o=e.frame,s=e.spriteSourceSize&&e.sourceSize&&e.pivot;s&&(i=e.sourceSize.w*e.pivot.x-(e.trimmed?e.spriteSourceSize.x:0),r=e.sourceSize.h*e.pivot.y-(e.trimmed?e.spriteSourceSize.y:0)),n[e.filename]={name:e.filename,offset:new me.Vector2d(o.x,o.y),anchorPoint:s?new me.Vector2d(i/o.w,r/o.h):null,width:o.w,height:o.h,angle:!0===e.rotated?t:0}}}),n},parseFromSpriteSheet:function(t){var e={},n=t.image,i=t.spacing||0,r=t.margin||0,o=n.width,s=n.height,a=new me.Vector2d(~~((o-r+i)/(t.framewidth+i)),~~((s-r+i)/(t.frameheight+i)));o%(t.framewidth+i)==0&&s%(t.frameheight+i)==0||(o=a.x*(t.framewidth+i),s=a.y*(t.frameheight+i),console.warn("Spritesheet Texture for image: "+n.src+" is not divisible by "+(t.framewidth+i)+"x"+(t.frameheight+i)+", truncating effective size to "+o+"x"+s));for(var u=0,h=a.x*a.y;u<h;u++)e[""+u]={name:""+u,offset:new me.Vector2d(r+(i+t.framewidth)*(u%a.x),r+(i+t.frameheight)*~~(u/a.x)),anchorPoint:t.anchorPoint||null,width:t.framewidth,height:t.frameheight,angle:0};return e},getAtlas:function(){return this.atlas},getTexture:function(){return this.texture},getRegion:function(t){return this.atlas[t]},createSpriteFromName:function(t,e){return me.pool.pull("me.Sprite",0,0,Object.assign({image:this,region:t},e||{}))},createAnimationFromName:function(t,e){for(var n,i=[],r={},o=0,s=0,a=0;a<t.length;++a){if(null==(n=this.getRegion(t[a])))throw new me.video.renderer.Texture.Error("Texture - region for "+t[a]+" not found");i[a]=n,r[t[a]]=a,o=Math.max(n.width,o),s=Math.max(n.height,s)}return new me.Sprite(0,0,Object.assign({image:this,framewidth:o,frameheight:s,margin:0,spacing:0,atlas:i,atlasIndices:r},e||{}))}}),me.CanvasRenderer.prototype.Texture.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.CanvasRenderer.Texture.Error"}})}(),function(){me.video.shader=function(){function t(t,e,n){var i=t.createShader(e);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new me.video.Error(t.getShaderInfoLog(i));return i}var e={},n={bool:"1i",int:"1i",float:"1f",vec2:"2fv",vec3:"3fv",vec4:"4fv",bvec2:"2iv",bvec3:"3iv",bvec4:"4iv",ivec2:"2iv",ivec3:"3iv",ivec4:"4iv",mat2:"Matrix2fv",mat3:"Matrix3fv",mat4:"Matrix4fv",sampler2D:"1i"};return e.createShader=function(e,i,r){var o,s={attributes:{},uniforms:{},handle:null},a=s.handle=e.createProgram(),u=/attribute\s+\w+\s+(\w+)/g,h=/uniform\s+(\w+)\s+(\w+)/g,l=[],c={},f={},d={};if(e.attachShader(a,t(e,e.VERTEX_SHADER,i)),e.attachShader(a,t(e,e.FRAGMENT_SHADER,r)),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new me.video.Error(e.getProgramInfoLog(a));for(e.useProgram(a);o=u.exec(i);)l.push(o[1]);return[i,r].forEach(function(t){for(;o=h.exec(t);)c[o[2]]=o[1]}),l.forEach(function(t){s.attributes[t]=e.getAttribLocation(a,t),e.enableVertexAttribArray(s.attributes[t])}),Object.keys(c).forEach(function(t){var i=c[t];d[t]=e.getUniformLocation(a,t),f[t]={get:function(t){return function(){return d[t]}}(t),set:function(t,n,i){return 0===n.indexOf("mat")?function(n){e[i](d[t],!1,n)}:function(n){var r=i;n.length&&"v"!==i.substr(-1)&&(r+="v"),e[r](d[t],n)}}(t,i,"uniform"+n[i])}}),Object.defineProperties(s.uniforms,f),s},e.createTexture=function(t,e,n,i,r,o,s,a){r=r||"no-repeat",me.utils.isPowerOfTwo(o||n.width)&&me.utils.isPowerOfTwo(s||n.height)||console.warn("[WebGL Renderer] "+n+" is not a POT texture ("+(o||n.width)+"x"+(s||n.height)+")");var u=t.createTexture(),h=0===r.search(/^repeat(-x)?$/)?t.REPEAT:t.CLAMP_TO_EDGE,l=0===r.search(/^repeat(-y)?$/)?t.REPEAT:t.CLAMP_TO_EDGE;return t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,u),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,h),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,l),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),o||s||a?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,o,s,a,t.RGBA,t.UNSIGNED_BYTE,n):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),u},e}()}(),function(){me.WebGLRenderer=me.Renderer.extend({init:function(t,e,n,i){me.Renderer.prototype.init.apply(this,[t,e,n,i]),this.gl=this.getContextGL(t,!this.transparent),this._colorStack=[],this._matrixStack=[],this._linePoints=[new me.Vector2d,new me.Vector2d,new me.Vector2d,new me.Vector2d],this.currentTransform=new me.Matrix2d;var r=i.compositor||me.WebGLRenderer.Compositor;return this.compositor=new r(this),this.cache=new me.Renderer.TextureCache(this.compositor.maxTextures),this.createFillTexture(this.cache),this.scaleCanvas(1,1),this},createFillTexture:function(t){var e=new Uint8Array([255,255,255,255]);this.fillTexture=new this.Texture(this.Texture.prototype.createAtlas.apply(this.Texture.prototype,[1,1,"fillTexture"]),e,t),this.compositor.uploadTexture(this.fillTexture,1,1,0)},createFontTexture:function(t){var e=me.video.createCanvas(me.utils.nextPowerOfTwo(this.backBufferCanvas.width),me.utils.nextPowerOfTwo(this.backBufferCanvas.height));this.fontContext2D=this.getContext2d(e),this.fontTexture=new this.Texture(this.Texture.prototype.createAtlas.apply(this.Texture.prototype,[this.backBufferCanvas.width,this.backBufferCanvas.height,"fontTexture"]),e,t),this.compositor.uploadTexture(this.fontTexture)},createPattern:function(t,e){if(!me.utils.isPowerOfTwo(t.width)||!me.utils.isPowerOfTwo(t.height))throw new me.video.Error("[WebGL Renderer] "+t+" is not a POT texture ("+t.width+"x"+t.height+")");var n=new this.Texture(this.Texture.prototype.createAtlas.apply(this.Texture.prototype,[t.width,t.height,"pattern",e]),t);return this.compositor.uploadTexture(n),n},flush:function(){this.compositor.flush()},clearColor:function(t,e){var n=this.currentColor.clone(),i=this.currentTransform.clone();this.currentColor.copy(t),this.currentTransform.identity(),e?this.compositor.clear():this.fillRect(0,0,this.canvas.width,this.canvas.height),this.currentTransform.copy(i),this.currentColor.copy(n),me.pool.push(n)},clearRect:function(t,e,n,i){var r=this.currentColor.clone();this.currentColor.copy("#0000"),this.fillRect(t,e,n,i),this.currentColor.copy(r),me.pool.push(r)},drawFont:function(t){var e=this.getFontContext();this.compositor.flush(),this.compositor.uploadTexture(this.fontTexture,0,0,0,!0);var n=t.pos.x+","+t.pos.y+","+t.width+","+t.height;this.compositor.addQuad(this.fontTexture,n,t.pos.x,t.pos.y,t.width,t.height),e.clearRect(0,0,this.backBufferCanvas.width,this.backBufferCanvas.height)},drawImage:function(t,e,n,i,r,o,s,a,u){void 0===i?(i=a=t.width,r=u=t.height,o=e,s=n,e=0,n=0):void 0===o&&(o=e,s=n,a=i,u=r,i=t.width,r=t.height,e=0,n=0),!1===this.subPixel&&(o=~~o,s=~~s);var h=e+","+n+","+i+","+r;this.compositor.addQuad(this.cache.get(t),h,o,s,a,u)},drawPattern:function(t,e,n,i,r){var o="0,0,"+i+","+r;this.compositor.addQuad(t,o,e,n,i,r)},fillRect:function(t,e,n,i){this.compositor.addQuad(this.fillTexture,"default",t,e,n,i)},getScreenContext:function(){return this.gl},getContextGL:function(t,e){if(void 0===t||null===t)throw new me.video.Error("You must pass a canvas element in order to create a GL context");if(void 0===t.getContext)throw new me.video.Error("Your browser does not support WebGL.");var n={antialias:this.antiAlias,alpha:!e};return t.getContext("webgl",n)||t.getContext("experimental-webgl",n)},getContext:function(){return this.gl},getFontContext:function(){return void 0===this.fontContext2D&&(console.warn("[WebGL Renderer] WARNING : Using Standard me.Font with WebGL will severly impact performances !"),this.createFontTexture(this.cache)),this.fontContext2D},resetTransform:function(){this.currentTransform.identity()},reset:function(){this.resetTransform(),this.cache.reset(),this.compositor.reset(),this.createFillTexture(),void 0!==this.fontContext2D&&this.createFontTexture()},scaleCanvas:function(t,e){var n=this.canvas.width*t,i=this.canvas.height*e;me.device.getPixelRatio()>1?(this.canvas.style.width=n/me.device.getPixelRatio()+"px",this.canvas.style.height=i/me.device.getPixelRatio()+"px"):(this.canvas.style.width=n+"px",this.canvas.style.height=i+"px"),this.compositor.setProjection(this.canvas.width,this.canvas.height)},restore:function(){if(0!==this._matrixStack.length){var t=this._colorStack.pop(),e=this._matrixStack.pop();this.currentColor.copy(t),this.currentTransform.copy(e),me.pool.push(t),me.pool.push(e)}},save:function(){this._colorStack.push(this.currentColor.clone()),this._matrixStack.push(this.currentTransform.clone())},rotate:function(t){this.currentTransform.rotate(t)},scale:function(t,e){this.currentTransform.scale(t,e)},setAntiAlias:function(t,e){me.Renderer.prototype.setAntiAlias.apply(this,[t,e])},setGlobalAlpha:function(t){this.currentColor.glArray[3]=t},setColor:function(t){var e=this.currentColor.glArray[3];this.currentColor.copy(t),this.currentColor.glArray[3]*=e},setLineWidth:function(t){this.compositor.lineWidth(t)},strokeArc:function(){},strokeEllipse:function(){},strokeLine:function(t,e,n,i){var r=this._linePoints.slice(0,2);r[0].x=t,r[0].y=e,r[1].x=n,r[1].y=i,this.compositor.drawLine(r,!0)},strokePolygon:function(t){var e,n,i=t.points.length;for(n=this._linePoints.length;n<i;n++)this._linePoints.push(new me.Vector2d);for(e=this._linePoints.slice(0,i),n=0;n<i;n++)e[n].x=t.pos.x+t.points[n].x,e[n].y=t.pos.y+t.points[n].y;this.compositor.drawLine(e)},strokeRect:function(t,e,n,i){var r=this._linePoints.slice(0,4);r[0].x=t,r[0].y=e,r[1].x=t+n,r[1].y=e,r[2].x=t+n,r[2].y=e+i,r[3].x=t,r[3].y=e+i,this.compositor.drawLine(r)},drawShape:function(t){"Rectangle"===t.shapeType?this.strokeRect(t.left,t.top,t.width,t.height):t instanceof me.Line||t instanceof me.Polygon?this.strokePolygon(t):t instanceof me.Ellipse&&(t.radiusV.x===t.radiusV.y?this.strokeArc(t.pos.x-t.radius,t.pos.y-t.radius,t.radius,0,2*Math.PI):this.strokeEllipse(t.pos.x,t.pos.y,t.radiusV.x,t.radiusV.y))},setTransform:function(t){this.resetTransform(),this.transform(t)},transform:function(t){if(this.currentTransform.multiply(t),!1===this.subPixel){var e=this.currentTransform.val;e[6]=~~e[6],e[7]=~~e[7]}},translate:function(t,e){!1===this.subPixel?this.currentTransform.translate(~~t,~~e):this.currentTransform.translate(t,e)}})}(),function(){me.WebGLRenderer.prototype.Texture=me.CanvasRenderer.prototype.Texture.extend({parse:function(t){var e=t.meta.size.w,n=t.meta.size.h,i=me.CanvasRenderer.prototype.Texture.prototype.parse.apply(this,[t]);return this._addStMap(i,e,n)},parseFromSpriteSheet:function(t){var e=t.image.width,n=t.image.height,i=me.CanvasRenderer.prototype.Texture.prototype.parseFromSpriteSheet.apply(this,[t]);return this._addStMap(i,e,n)},_addStMap:function(t,e,n){return Object.keys(t).forEach(function(i){var r=t[i].offset,o=t[i].width,s=t[i].height;t[i].stMap=new Float32Array([r.x/e,r.y/n,(r.x+o)/e,(r.y+s)/n]);var a=r.x+","+r.y+","+e+","+n;t[a]=t[i]}),t},_insertRegion:function(t,e,n,i,r){var o=this.texture.width,s=this.texture.height;return this.atlas[t]={name:t,offset:new me.Vector2d(e,n),width:i,height:r,angle:0,stMap:new Float32Array([e/o,n/s,(e+i)/o,(n+r)/s])},this.atlas[t]}}),me.WebGLRenderer.prototype.Texture.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.WebGLRenderer.Texture.Error"}})}(),function(){var t=9*Float32Array.BYTES_PER_ELEMENT,e=0*Float32Array.BYTES_PER_ELEMENT,n=2*Float32Array.BYTES_PER_ELEMENT,i=6*Float32Array.BYTES_PER_ELEMENT,r=7*Float32Array.BYTES_PER_ELEMENT;me.WebGLRenderer.Compositor=me.Object.extend({init:function(o){var s=o.gl;this.length=0,this.units=[],this.maxTextures=Math.min(24,s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS)),this.v=[new me.Vector2d,new me.Vector2d,new me.Vector2d,new me.Vector2d],this.renderer=o,this.gl=o.gl,this.matrix=o.currentTransform,this.color=o.currentColor,this.uMatrix=new me.Matrix2d;var a=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision<16?"mediump":"highp";this.lineShader=me.video.shader.createShader(this.gl,function(t){return"precision highp float;attribute vec2 aVertex;uniform mat3 uMatrix;void main(void){gl_Position=vec4((uMatrix*vec3(aVertex,1)).xy,0,1);}"}(),function(t){return"precision "+t.precision+" float;uniform vec4 uColor;void main(void){gl_FragColor=uColor;}"}({precision:a})),this.quadShader=me.video.shader.createShader(this.gl,function(t){return"precision highp float;attribute vec2 aVertex;attribute vec4 aColor;attribute float aTexture;attribute vec2 aRegion;uniform mat3 uMatrix;varying vec4 vColor;varying float vTexture;varying vec2 vRegion;void main(void){gl_Position=vec4((uMatrix*vec3(aVertex,1)).xy,0,1);vColor=vec4(aColor.rgb*aColor.a,aColor.a);vTexture=aTexture;vRegion=aRegion;}"}(),function(t){for(var e="precision "+t.precision+" float;uniform sampler2D uSampler["+t.maxTextures+"];varying vec4 vColor;varying float vTexture;varying vec2 vRegion;void main(void){int texture=int(vTexture);if(texture==0){gl_FragColor=texture2D(uSampler[0],vRegion)*vColor;}",n=1;n<t.maxTextures-1;n++)e+="else if(texture=="+n+"){gl_FragColor=texture2D(uSampler["+n+"],vRegion)*vColor;}";return e+="else{gl_FragColor=texture2D(uSampler["+(t.maxTextures-1)+"],vRegion)*vColor;}}"}({precision:a,maxTextures:this.maxTextures})),this.shader=this.quadShader.handle,this.sb=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.sb),s.bufferData(s.ARRAY_BUFFER,16e3*t*4,s.STREAM_DRAW),this.sbSize=256,this.sbIndex=0,this.stream=new Float32Array(9*this.sbSize*4),this.ib=s.createBuffer(),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.ib),s.bufferData(s.ELEMENT_ARRAY_BUFFER,this.createIB(),s.STATIC_DRAW),s.vertexAttribPointer(this.quadShader.attributes.aVertex,2,s.FLOAT,!1,t,e),s.vertexAttribPointer(this.quadShader.attributes.aColor,4,s.FLOAT,!1,t,n),s.vertexAttribPointer(this.quadShader.attributes.aTexture,1,s.FLOAT,!1,t,i),s.vertexAttribPointer(this.quadShader.attributes.aRegion,2,s.FLOAT,!1,t,r),this.reset(),this.setProjection(s.canvas.width,s.canvas.height),s.clearColor(0,0,0,1),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1)},setProjection:function(t,e){this.flush(),this.gl.viewport(0,0,t,e),this.uMatrix.setTransform(2/t,0,0,0,-2/e,0,-1,1,1),this.quadShader.uniforms.uMatrix=this.uMatrix.val},uploadTexture:function(t,e,n,i,r){var o=this.renderer.cache.getUnit(t);return this.units[o]&&!r||(this.units[o]=!0,me.video.shader.createTexture(this.gl,o,t.texture,this.renderer.antiAlias?this.gl.LINEAR:this.gl.NEAREST,t.repeat,e,n,i)),o},reset:function(){this.sbIndex=0,this.length=0;for(var t=[],e=0;e<this.maxTextures;e++)this.units[e]=!1,t[e]=e;this.quadShader.uniforms.uSampler=t},createIB:function(){for(var t=[0,1,2,2,1,3],e=new Array(96e3),n=0;n<e.length;n++)e[n]=t[n%6]+4*~~(n/6);return new Uint16Array(e)},resizeSB:function(){this.sbSize<<=1;var t=new Float32Array(9*this.sbSize*4);t.set(this.stream),this.stream=t},useShader:function(t){this.shader!==t&&(this.flush(),this.shader=t,this.gl.useProgram(this.shader))},addQuad:function(t,e,n,i,r,o){var s=this.color.toGL();if(!(s[3]<1/255)){this.useShader(this.quadShader.handle),this.length>=16e3&&this.flush(),this.length>=this.sbSize&&this.resizeSB();var a=this.matrix,u=this.v[0].set(n,i),h=this.v[1].set(n+r,i),l=this.v[2].set(n,i+o),c=this.v[3].set(n+r,i+o);a.isIdentity()||(a.multiplyVector(u),a.multiplyVector(h),a.multiplyVector(l),a.multiplyVector(c));var f=this.sbIndex,d=f+9,p=d+9,m=p+9;this.stream[f+0+0]=u.x,this.stream[f+0+1]=u.y,this.stream[d+0+0]=h.x,this.stream[d+0+1]=h.y,this.stream[p+0+0]=l.x,this.stream[p+0+1]=l.y,this.stream[m+0+0]=c.x,this.stream[m+0+1]=c.y,this.stream.set(s,f+2),this.stream.set(s,d+2),this.stream.set(s,p+2),this.stream.set(s,m+2);var g=this.uploadTexture(t);this.stream[f+6]=this.stream[d+6]=this.stream[p+6]=this.stream[m+6]=g;var v=t.getRegion(e);if(void 0===v){!0===me.video.renderer.verbose&&console.warn("Adding texture region",e,"for texture",t);var y=e.split(","),_=+y[0],w=+y[1],b=+y[2],x=+y[3];v=t._insertRegion(e,_,w,b,x)}var T=v.stMap;this.stream[f+7+0]=T[0],this.stream[f+7+1]=T[1],this.stream[d+7+0]=T[2],this.stream[d+7+1]=T[1],this.stream[p+7+0]=T[0],this.stream[p+7+1]=T[3],this.stream[m+7+0]=T[2],this.stream[m+7+1]=T[3],this.sbIndex+=36,this.length++}},flush:function(){if(this.length){var t=this.gl,e=9*this.length*4;t.bufferData(t.ARRAY_BUFFER,this.stream.subarray(0,e),t.STREAM_DRAW),t.drawElements(t.TRIANGLES,6*this.length,t.UNSIGNED_SHORT,0),this.sbIndex=0,this.length=0}},drawLine:function(o,s){this.useShader(this.lineShader.handle);for(var a=0,u=0;u<o.length;u++)this.matrix.isIdentity()||this.matrix.multiplyVector(o[u]),this.stream[a++]=o[u].x,this.stream[a++]=o[u].y;var h=this.gl;this.lineShader.uniforms.uMatrix=this.uMatrix.val,this.lineShader.uniforms.uColor=this.color.glArray,h.bufferData(h.ARRAY_BUFFER,this.stream.subarray(0,2*o.length),h.STREAM_DRAW),h.vertexAttribPointer(this.lineShader.attributes.aVertex,2,h.FLOAT,!1,0,0),h.drawArrays(s?h.LINE_STRIP:h.LINE_LOOP,0,o.length),h.vertexAttribPointer(this.quadShader.attributes.aVertex,2,h.FLOAT,!1,t,e),h.vertexAttribPointer(this.quadShader.attributes.aColor,4,h.FLOAT,!1,t,n),h.vertexAttribPointer(this.quadShader.attributes.aTexture,1,h.FLOAT,!1,t,i),h.vertexAttribPointer(this.quadShader.attributes.aRegion,2,h.FLOAT,!1,t,r)},lineWidth:function(t){this.gl.lineWidth(t)},clear:function(){this.flush(),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}})}(),function(){me.input=function(){var t={};return t._preventDefault=function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},t.preventDefault=!0,t}()}(),function(t){t._KeyBinding={};var e={},n={},i={},r={},o={},s=!1;t._enableKeyboardEvent=function(){s||(window.addEventListener("keydown",t._keydown,!1),window.addEventListener("keyup",t._keyup,!1),s=!0)},t._keydown=function(n,s,a){s=s||n.keyCode||n.which;var u=t._KeyBinding[s];if(me.event.publish(me.event.KEYDOWN,[u,s,!u||!i[u]]),u){if(!i[u]){var h=a||s;r[u][h]||(e[u]++,r[u][h]=!0)}return!o[s]||t._preventDefault(n)}return!0},t._keyup=function(n,s,a){s=s||n.keyCode||n.which;var u=t._KeyBinding[s];if(me.event.publish(me.event.KEYUP,[u,s]),u){var h=a||s;return r[u][h]=void 0,e[u]>0&&e[u]--,i[u]=!1,!o[s]||t._preventDefault(n)}return!0},t.KEY={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,WINDOW_KEY:91,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWAND_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222},t.isKeyPressed=function(t){return!(!e[t]||i[t])&&(n[t]&&(i[t]=!0),!0)},t.keyStatus=function(t){return e[t]>0},t.triggerKeyEvent=function(e,n){n?t._keydown({},e):t._keyup({},e)},t.bindKey=function(s,a,u,h){t._enableKeyboardEvent(),"boolean"!=typeof h&&(h=t.preventDefault),t._KeyBinding[s]=a,o[s]=h,e[a]=0,n[a]=u||!1,i[a]=!1,r[a]={}},t.unlockKey=function(t){i[t]=!1},t.unbindKey=function(i){var s=t._KeyBinding[i];e[s]=0,n[s]=!1,r[s]={},t._KeyBinding[i]=null,o[i]=null}}(me.input),function(t){function e(t,e){for(var n=0;n<t.length;n++)-1===_.indexOf(t[n])&&me.video.renderer.getScreenCanvas().addEventListener(t[n],e,!1)}function n(){if(!m){t._offset=me.video.getPos(),window.addEventListener("scroll",throttle(100,!1,function(e){t._offset=me.video.getPos(),me.event.publish(me.event.WINDOW_ONSCROLL,[e])}),!1),v=window.PointerEvent?A:window.MSPointerEvent?S:P,me.device.touch&&me.device.isMobile&&(v=v.concat(C)),e(v,l),me.device.wheel||window.addEventListener("mousewheel",u,!1),void 0===t.throttlingInterval&&(t.throttlingInterval=~~(1e3/me.sys.fps));var n,i=r(v,_);if(t.throttlingInterval<17)for(n=0;n<i.length;n++)-1!==v.indexOf(i[n])&&me.video.renderer.getScreenCanvas().addEventListener(i[n],h,!1);else for(n=0;n<i.length;n++)-1!==v.indexOf(i[n])&&me.video.renderer.getScreenCanvas().addEventListener(i[n],throttle(t.throttlingInterval,!1,h),!1);m=!0}}function i(t,e){for(var n=0;n<e.length;n++){if(-1!==t.indexOf(e[n]))return e[n]}}function r(t,e){for(var n=[],i=0;i<e.length;i++){-1!==t.indexOf(e[i])&&n.push(e[i])}return n}function o(t,e,n,i){var r;if(t.callbacks[e]){t.pointerId=i;for(var o=t.callbacks[e].length-1;o>=0&&(r=t.callbacks[e][o]);o--)if(!1===r(n))return!0}return!1}function s(e){var n=!1;for(me.game.viewport.localToWorld(0,0,R);M.length>0;){var r=M.pop();if(c.push(r),void 0!==e.timeStamp){if(e.timeStamp<g)continue;g=e.timeStamp}me.device.pointerEvent||(e.pointerId=r.id),e.gameScreenX=r.x,e.gameScreenY=r.y,e.gameWorldX=e.gameScreenX+R.x,e.gameWorldY=e.gameScreenY+R.y,p.setShape(e.gameWorldX,e.gameWorldY,e.width||1,e.height||1);var s=me.collision.quadTree.retrieve(p,me.Container.prototype._sortReverseZ);s=s.concat([me.game.viewport]);for(var a,u=s.length;u--,a=s[u];){if(d.has(a)){var h=d.get(a),l=h.region,f=l.ancestor,m=l.getBounds();if(!0===l.floating?(e.gameX=e.gameLocalX=e.gameScreenX,e.gameY=e.gameLocalY=e.gameScreenY):(e.gameX=e.gameLocalX=e.gameWorldX,e.gameY=e.gameLocalY=e.gameWorldY),void 0!==f){var y=f.getBounds().pos;e.gameLocalX=e.gameX-y.x,e.gameLocalY=e.gameY-y.y}var w=m.containsPoint(e.gameX,e.gameY)&&(m===l||l.containsPoint(e.gameLocalX,e.gameLocalY));switch(e.type){case _[0]:case _[1]:case _[2]:case _[3]:if(h.pointerId!==e.pointerId||w){if(null===h.pointerId&&w&&o(h,i(v,T),e,e.pointerId)){n=!0;break}}else if(o(h,i(v,E),e,null)){n=!0;break}if(w&&o(h,e.type,e,e.pointerId)){n=!0;break}break;case b[0]:case b[1]:case b[2]:case b[3]:if(h.pointerId===e.pointerId&&w&&o(h,e.type,e,null)){n=!0;break}break;case x[0]:case x[1]:case x[2]:case x[3]:if(h.pointerId===e.pointerId&&o(h,e.type,e,null)){n=!0;break}break;default:if(w&&o(h,e.type,e,e.pointerId)){n=!0,"wheel"===e.type&&t._preventDefault(e);break}}}if(!0===n)break}}return n}function a(e){if(e.touches)for(var n=0,i=e.changedTouches.length;n<i;n++){var r=c.pop(),o=e.changedTouches[n];t.globalToLocal(o.clientX,o.clientY,r),r.id=o.identifier,M.push(r)}else{var s=c.pop();t.globalToLocal(e.clientX,e.clientY,s),s.id=e.pointerId||1,M.push(s)}!1!==e.isPrimary&&(t.pointer.pos.set(M[0].x,M[0].y),"number"==typeof e.width&&(e.width===t.pointer.width&&e.height===t.pointer.height||t.pointer.resize(e.width||1,e.height||1)))}function u(t){return t.target!==me.video.renderer.getScreenCanvas()||(a(t),t.type="wheel",t.deltaMode=1,t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX),s(t))}function h(e){return a(e),!s(e)||t._preventDefault(e)}function l(e){if(a(e),s(e))return t._preventDefault(e);var n=e.button||0,i=t.pointer.bind[n];return!i||(-1!==w.indexOf(e.type)?t._keydown(e,i,n+1):t._keyup(e,i,n+1))}for(var c=[],f=0;f<10;f++)c.push(new me.Vector2d);var d=new Map,p=new me.Rect(0,0,1,1),m=!1,g=0,v=[],y=["wheel"],_=["pointermove","MSPointerMove","mousemove","touchmove"],w=["pointerdown","MSPointerDown","mousedown","touchstart"],b=["pointerup","MSPointerUp","mouseup","touchend"],x=["pointercancel","MSPointerCancel","mousecancel","touchcancel"],T=["pointerenter","MSPointerEnter","mouseenter","touchenter"],E=["pointerleave","MSPointerLeave","mouseleave","touchleave"],A=[y[0],_[0],w[0],b[0],x[0],T[0],E[0]],S=[y[0],_[1],w[1],b[1],x[1],T[1],E[1]],P=[y[0],_[2],w[2],b[2],x[2],T[2],E[2]],C=[_[3],w[3],b[3],x[3],T[3],E[3]],O={wheel:y,mousewheel:y,pointermove:_,pointerdown:w,pointerup:b,pointercancel:x,pointerenter:T,pointerleave:E},R=new me.Vector2d,M=[];t._offset=null,t.pointer=new me.Rect(0,0,1,1),t.pointer.bind=[0,0,0],t.pointer.LEFT=0,t.pointer.MIDDLE=1,t.pointer.RIGHT=2,t.throttlingInterval=void 0,t.globalToLocal=function(e,n,i){i=i||new me.Vector2d;var r=t._offset,o=me.device.getPixelRatio();e-=r.left,n-=r.top;var s=me.sys.scale;return 1===s.x&&1===s.y||(e/=s.x,n/=s.y),i.set(e*o,n*o)},t.bindPointer=function(){var e=arguments.length<2?t.pointer.LEFT:arguments[0],i=arguments.length<2?arguments[0]:arguments[1];if(n(),!t._KeyBinding[i])throw new me.Error("no action defined for keycode "+i);t.pointer.bind[e]=i},t.unbindPointer=function(e){t.pointer.bind[void 0===e?t.pointer.LEFT:e]=null},t.registerPointerEvent=function(t,e,i){if(n(),"mousewheel"===t)console.error("`mousewheel` events are deprecated; use `wheel`");else if(-1===A.indexOf(t))throw new me.Error("invalid event type : "+t);var o=r(v,O[t]);d.has(e)||d.set(e,{region:e,callbacks:{},pointerId:null});for(var s=d.get(e),a=0;a<o.length;a++)t=o[a],s.callbacks[t]?s.callbacks[t].push(i):s.callbacks[t]=[i]},t.releasePointerEvent=function(t,e,n){if("mousewheel"===t)console.error("`mousewheel` events are deprecated; use `wheel`");else if(-1===A.indexOf(t))throw new me.Error("invalid event type : "+t);for(var i=r(v,O[t]),o=d.get(e),s=0;s<i.length;s++)if(t=i[s],o.callbacks[t]){if(void 0!==n)o.callbacks[t].remove(n);else for(;o.callbacks[t].length>0;)o.callbacks[t].pop();0===o.callbacks[t].length&&delete o.callbacks[t]}0===Object.keys(o.callbacks).length&&d.delete(e)},t._translatePointerEvents=function(){t.registerPointerEvent("pointermove",me.game.viewport,function(t){me.event.publish(me.event.POINTERMOVE,[t])})}}(me.input),function(t){function e(t){return t}function n(e,n,i){return i===t.GAMEPAD.BUTTONS.L2||i===t.GAMEPAD.BUTTONS.R2?(e+1)/2:e}function i(e,n,i){return e=e>0?i===t.GAMEPAD.BUTTONS.L2?Math.max(0,e-2e4)/111070:(e-1)/131070:(65536+e)/131070+.5}function r(t,n){var i=t.replace(s,function(t,e,n){return"000".substr(e.length-1)+e+"-"+"000".substr(n.length-1)+n+"-"}),r=t.replace(s,function(t,e,n){return e.replace(a,"")+"-"+n.replace(a,"")+"-"});n.analog=n.analog||n.buttons.map(function(){return-1}),n.normalize_fn=n.normalize_fn||e,h.set(i,n),h.set(r,n)}var o=.1,s=/^([0-9a-f]{1,4})-([0-9a-f]{1,4})-/i,a=/^0+/,u={},h=new Map;[["45e-28e-Xbox 360 Wired Controller",{axes:[0,1,3,4],buttons:[11,12,13,14,8,9,-1,-1,5,4,6,7,0,1,2,3,10],analog:[-1,-1,-1,-1,-1,-1,2,5,-1,-1,-1,-1,-1,-1,-1,-1,-1],normalize_fn:n}],["54c-268-PLAYSTATION(R)3 Controller",{axes:[0,1,2,3],buttons:[14,13,15,12,10,11,8,9,0,3,1,2,4,6,7,5,16]}],["54c-5c4-Wireless Controller",{axes:[0,1,2,3],buttons:[1,0,2,3,4,5,6,7,8,9,10,11,14,15,16,17,12,13]}],["2836-1-OUYA Game Controller",{axes:[0,3,7,9],buttons:[3,6,4,5,7,8,15,16,-1,-1,9,10,11,12,13,14,-1],analog:[-1,-1,-1,-1,-1,-1,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1],normalize_fn:i}],["OUYA Game Controller (Vendor: 2836 Product: 0001)",{axes:[0,1,3,4],buttons:[0,3,1,2,4,5,12,13,-1,-1,6,7,8,9,10,11,-1],analog:[-1,-1,-1,-1,-1,-1,2,5,-1,-1,-1,-1,-1,-1,-1,-1,-1],normalize_fn:i}]].forEach(function(t){r(t[0],t[1])}),window.addEventListener("gamepadconnected",function(t){me.event.publish(me.event.GAMEPAD_CONNECTED,[t.gamepad])},!1),window.addEventListener("gamepaddisconnected",function(t){me.event.publish(me.event.GAMEPAD_DISCONNECTED,[t.gamepad])},!1),t._updateGamepads=navigator.getGamepads?function(){var e=navigator.getGamepads(),n={};Object.keys(u).forEach(function(i){var r=e[i];if(r){var s=null;"standard"!==r.mapping&&(s=h.get(r.id));var a=u[i];Object.keys(a.buttons).forEach(function(e){var u=a.buttons[e],h=e,l=-1;if(!(s&&(h=s.buttons[e],l=s.analog[e],h<0&&l<0))){var c=r.buttons[h]||{};if(s&&l>=0){var f=s.normalize_fn(r.axes[l],-1,+e);c={value:f,pressed:c.pressed||Math.abs(f)>=o}}me.event.publish(me.event.GAMEPAD_UPDATE,[i,"buttons",+e,c]),!u.pressed&&c.pressed?t._keydown(n,u.keyCode,h+256):u.pressed&&!c.pressed&&t._keyup(n,u.keyCode,h+256),u.value=c.value,u.pressed=c.pressed}}),Object.keys(a.axes).forEach(function(e){var u=a.axes[e],h=e;if(!(s&&(h=s.axes[e])<0)){var l=r.axes[h];if(void 0!==l){s&&(l=s.normalize_fn(l,+e,-1));var c=Math.sign(l)||1;if(u[c]){var f=Math.abs(l)>=o+Math.abs(u[c].threshold);me.event.publish(me.event.GAMEPAD_UPDATE,[i,"axes",+e,l]),!u[c].pressed&&f?t._keydown(n,u[c].keyCode,h+256):(u[c].pressed||u[-c]&&u[-c].pressed)&&!f&&(c=u[c].pressed?c:-c,t._keyup(n,u[c].keyCode,h+256)),u[c].value=l,u[c].pressed=f}}}})}})}:function(){},t.GAMEPAD={AXES:{LX:0,LY:1,RX:2,RY:3,EXTRA_1:4,EXTRA_2:5,EXTRA_3:6,EXTRA_4:7},BUTTONS:{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L1:4,R1:5,L2:6,R2:7,SELECT:8,BACK:8,START:9,FORWARD:9,L3:10,R3:11,UP:12,DOWN:13,LEFT:14,RIGHT:15,HOME:16,EXTRA_1:17,EXTRA_2:18,EXTRA_3:19,EXTRA_4:20}},t.bindGamepad=function(e,n,i){if(!t._KeyBinding[i])throw new me.Error("no action defined for keycode "+i);"object"!=typeof n&&(n={type:"buttons",code:n},console.warn("Deprecated: me.input.bindGamepad parameteres have changed")),u[e]||(u[e]={axes:{},buttons:{}});var r={keyCode:i,value:0,pressed:!1,threshold:n.threshold},o=u[e][n.type];if("buttons"===n.type)o[n.code]=r;else if("axes"===n.type){var s=Math.sign(n.threshold)||1;o[n.code]||(o[n.code]={}),o[n.code][s]=r}},t.unbindGamepad=function(t,e){if(!u[t])throw new me.Error("no bindings for gamepad "+t);u[t].buttons[e]={}},t.setGamepadDeadzone=function(t){o=t},t.setGamepadMapping=r}(me.input),function(){var t=function(){var t={},e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return t.decode=function(t){if(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),me.device.nativeBase64)return window.atob(t);for(var n,i,r,o,s,a,u,h=[],l=0;l<t.length;)o=e.indexOf(t.charAt(l++)),s=e.indexOf(t.charAt(l++)),a=e.indexOf(t.charAt(l++)),u=e.indexOf(t.charAt(l++)),n=o<<2|s>>4,i=(15&s)<<4|a>>2,r=(3&a)<<6|u,h.push(String.fromCharCode(n)),64!==a&&h.push(String.fromCharCode(i)),64!==u&&h.push(String.fromCharCode(r));return h=h.join("")},t.encode=function(t){if(t=t.replace(/\r\n/g,"\n"),me.device.nativeBase64)return window.btoa(t);for(var n,i,r,o,s,a,u,h=[],l=0;l<t.length;)n=t.charCodeAt(l++),i=t.charCodeAt(l++),r=t.charCodeAt(l++),o=n>>2,s=(3&n)<<4|i>>4,a=(15&i)<<2|r>>6,u=63&r,isNaN(i)?a=u=64:isNaN(r)&&(u=64),h.push(e.charAt(o)),h.push(e.charAt(s)),h.push(e.charAt(a)),h.push(e.charAt(u));return h=h.join("")},t}();me.utils=function(){var e={},n="",i=0,r=/^.*(\\|\/|\:)/,o=/\.[^\.]*$/;return e.decodeBase64=function(e){return t.decode(e)},e.encodeBase64=function(e){return t.encode(e)},e.decodeBase64AsArray=function(e,n){n=n||1;var i,r,o,s=t.decode(e),a=new Uint32Array(s.length/n);for(i=0,o=s.length/n;i<o;i++)for(a[i]=0,r=n-1;r>=0;--r)a[i]+=s.charCodeAt(i*n+r)<<(r<<3);return a},e.decompress=function(){throw new me.Error("GZIP/ZLIB compressed TMX Tile Map not supported!")},e.decodeCSV=function(t){for(var e=t.replace("\n","").trim().split(","),n=[],i=0;i<e.length;i++)n.push(+e[i]);return n},e.getBasename=function(t){return t.replace(r,"").replace(o,"")},e.getFileExtension=function(t){return t.substring(t.lastIndexOf(".")+1,t.length)},e.getPixels=function(t){if(t instanceof HTMLImageElement){var e=me.CanvasRenderer.getContext2d(me.video.createCanvas(t.width,t.height));return e.drawImage(t,0,0),e.getImageData(0,0,t.width,t.height)}return t.getContext("2d").getImageData(0,0,t.width,t.height)},e.getImage=function(t){return"string"==typeof t?me.loader.getImage(me.utils.getBasename(t)):t},e.resetGUID=function(t,e){n=t.toString().toUpperCase().toHex(),i=e||0},e.createGUID=function(t){return i+=t||1,n+"-"+(t||i)},e.isPowerOfTwo=function(t){return 0==(t&t-1)},e.nextPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},e}()}(),function(){var t=/^rgba?\((\d+), ?(\d+), ?(\d+)(, ?([\d\.]+))?\)$/,e=/^#([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,n=/^#([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,i=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,r=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,o=new Map;[["black",[0,0,0]],["silver",[192,192,129]],["gray",[128,128,128]],["white",[255,255,255]],["maroon",[128,0,0]],["red",[255,0,0]],["purple",[128,0,128]],["fuchsia",[255,0,255]],["green",[0,128,0]],["lime",[0,255,0]],["olive",[128,128,0]],["yellow",[255,255,0]],["navy",[0,0,128]],["blue",[0,0,255]],["teal",[0,128,128]],["aqua",[0,255,255]],["orange",[255,165,0]],["aliceblue",[240,248,245]],["antiquewhite",[250,235,215]],["aquamarine",[127,255,212]],["azure",[240,255,255]],["beige",[245,245,220]],["bisque",[255,228,196]],["blanchedalmond",[255,235,205]],["blueviolet",[138,43,226]],["brown",[165,42,42]],["burlywood",[222,184,35]],["cadetblue",[95,158,160]],["chartreuse",[127,255,0]],["chocolate",[210,105,30]],["coral",[255,127,80]],["cornflowerblue",[100,149,237]],["cornsilk",[255,248,220]],["crimson",[220,20,60]],["darkblue",[0,0,139]],["darkcyan",[0,139,139]],["darkgoldenrod",[184,134,11]],["darkgray[*]",[169,169,169]],["darkgreen",[0,100,0]],["darkgrey[*]",[169,169,169]],["darkkhaki",[189,183,107]],["darkmagenta",[139,0,139]],["darkolivegreen",[85,107,47]],["darkorange",[255,140,0]],["darkorchid",[153,50,204]],["darkred",[139,0,0]],["darksalmon",[233,150,122]],["darkseagreen",[143,188,143]],["darkslateblue",[72,61,139]],["darkslategray",[47,79,79]],["darkslategrey",[47,79,79]],["darkturquoise",[0,206,209]],["darkviolet",[148,0,211]],["deeppink",[255,20,147]],["deepskyblue",[0,191,255]],["dimgray",[105,105,105]],["dimgrey",[105,105,105]],["dodgerblue",[30,144,255]],["firebrick",[178,34,34]],["floralwhite",[255,250,240]],["forestgreen",[34,139,34]],["gainsboro",[220,220,220]],["ghostwhite",[248,248,255]],["gold",[255,215,0]],["goldenrod",[218,165,32]],["greenyellow",[173,255,47]],["grey",[128,128,128]],["honeydew",[240,255,240]],["hotpink",[255,105,180]],["indianred",[205,92,92]],["indigo",[75,0,130]],["ivory",[255,255,240]],["khaki",[240,230,140]],["lavender",[230,230,250]],["lavenderblush",[255,240,245]],["lawngreen",[124,252,0]],["lemonchiffon",[255,250,205]],["lightblue",[173,216,230]],["lightcoral",[240,128,128]],["lightcyan",[224,255,255]],["lightgoldenrodyellow",[250,250,210]],["lightgray",[211,211,211]],["lightgreen",[144,238,144]],["lightgrey",[211,211,211]],["lightpink",[255,182,193]],["lightsalmon",[255,160,122]],["lightseagreen",[32,178,170]],["lightskyblue",[135,206,250]],["lightslategray",[119,136,153]],["lightslategrey",[119,136,153]],["lightsteelblue",[176,196,222]],["lightyellow",[255,255,224]],["limegreen",[50,205,50]],["linen",[250,240,230]],["mediumaquamarine",[102,205,170]],["mediumblue",[0,0,205]],["mediumorchid",[186,85,211]],["mediumpurple",[147,112,219]],["mediumseagreen",[60,179,113]],["mediumslateblue",[123,104,238]],["mediumspringgreen",[0,250,154]],["mediumturquoise",[72,209,204]],["mediumvioletred",[199,21,133]],["midnightblue",[25,25,112]],["mintcream",[245,255,250]],["mistyrose",[255,228,225]],["moccasin",[255,228,181]],["navajowhite",[255,222,173]],["oldlace",[253,245,230]],["olivedrab",[107,142,35]],["orangered",[255,69,0]],["orchid",[218,112,214]],["palegoldenrod",[238,232,170]],["palegreen",[152,251,152]],["paleturquoise",[175,238,238]],["palevioletred",[219,112,147]],["papayawhip",[255,239,213]],["peachpuff",[255,218,185]],["peru",[205,133,63]],["pink",[255,192,203]],["plum",[221,160,221]],["powderblue",[176,224,230]],["rosybrown",[188,143,143]],["royalblue",[65,105,225]],["saddlebrown",[139,69,19]],["salmon",[250,128,114]],["sandybrown",[244,164,96]],["seagreen",[46,139,87]],["seashell",[255,245,238]],["sienna",[160,82,45]],["skyblue",[135,206,235]],["slateblue",[106,90,205]],["slategray",[112,128,144]],["slategrey",[112,128,144]],["snow",[255,250,250]],["springgreen",[0,255,127]],["steelblue",[70,130,180]],["tan",[210,180,140]],["thistle",[216,191,216]],["tomato",[255,99,71]],["turquoise",[64,224,208]],["violet",[238,130,238]],["wheat",[245,222,179]],["whitesmoke",[245,245,245]],["yellowgreen",[154,205,50]]].forEach(function(t){o.set(t[0],t[1])}),me.Color=me.Object.extend({init:function(t,e,n,i){return void 0===this.glArray&&(this.glArray=new Float32Array([0,0,0,1])),this.setColor(t,e,n,i)},setColor:function(t,e,n,i){return t instanceof me.Color?(this.glArray.set(t.glArray),t):(this.r=t,this.g=e,this.b=n,this.alpha=i,this)},clone:function(){return me.pool.pull("me.Color",this)},copy:function(t){return t instanceof me.Color?(this.glArray.set(t.glArray),this):this.parseCSS(t)},add:function(t){return this.glArray[0]=(this.glArray[0]+t.glArray[0]).clamp(0,1),this.glArray[1]=(this.glArray[1]+t.glArray[1]).clamp(0,1),this.glArray[2]=(this.glArray[2]+t.glArray[2]).clamp(0,1),this.glArray[3]=(this.glArray[3]+t.glArray[3])/2,this},darken:function(t){return t=t.clamp(0,1),this.glArray[0]*=t,this.glArray[1]*=t,this.glArray[2]*=t,this},lighten:function(t){return t=t.clamp(0,1),this.glArray[0]=(this.glArray[0]+(1-this.glArray[0])*t).clamp(0,1),this.glArray[1]=(this.glArray[1]+(1-this.glArray[1])*t).clamp(0,1),this.glArray[2]=(this.glArray[2]+(1-this.glArray[2])*t).clamp(0,1),this},random:function(){return this.setColor(256*Math.random(),256*Math.random(),256*Math.random(),this.alpha)},equals:function(t){return this.glArray[0]===t.glArray[0]&&this.glArray[1]===t.glArray[1]&&this.glArray[2]===t.glArray[2]&&this.glArray[3]===t.glArray[3]},parseCSS:function(t){return o.has(t)?this.setColor.apply(this,o.get(t)):this.parseRGB(t)},parseRGB:function(e){var n=t.exec(e);return n?this.setColor(+n[1],+n[2],+n[3],+n[5]):this.parseHex(e)},parseHex:function(t){var o;if(o=r.exec(t))return this.setColor(parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),(parseInt(o[4],16).clamp(0,255)/255).toFixed(1));if(o=i.exec(t))return this.setColor(parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16));if(o=n.exec(t))return this.setColor(parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16),(parseInt(o[4]+o[4],16).clamp(0,255)/255).toFixed(1));if(o=e.exec(t))return this.setColor(parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16));throw new me.Color.Error("invalid parameter: "+t)},toGL:function(){return this.glArray},toHex:function(){return"#"+this.r.toHex()+this.g.toHex()+this.b.toHex()},toHex8:function(){return"#"+this.r.toHex()+this.g.toHex()+this.b.toHex()+this.alpha.toHex()},toRGB:function(){return"rgb("+this.r+","+this.g+","+this.b+")"},toRGBA:function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.alpha+")"}}),Object.defineProperty(me.Color.prototype,"r",{get:function(){return~~(255*this.glArray[0])},set:function(t){this.glArray[0]=(~~t||0).clamp(0,255)/255},enumerable:!0,configurable:!0}),Object.defineProperty(me.Color.prototype,"g",{get:function(){return~~(255*this.glArray[1])},set:function(t){this.glArray[1]=(~~t||0).clamp(0,255)/255},enumerable:!0,configurable:!0}),Object.defineProperty(me.Color.prototype,"b",{get:function(){return~~(255*this.glArray[2])},set:function(t){this.glArray[2]=(~~t||0).clamp(0,255)/255},enumerable:!0,configurable:!0}),Object.defineProperty(me.Color.prototype,"alpha",{get:function(){return this.glArray[3]},set:function(t){this.glArray[3]=void 0===t?1:(+t).clamp(0,1)},enumerable:!0,configurable:!0}),me.Color.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.Color.Error"}})}(),function(){me.save=function(){function t(t){return"add"===t||"remove"===t}var e={},n={_init:function(){if(!0===me.device.localStorage){(JSON.parse(localStorage.getItem("me.save"))||[]).forEach(function(t){e[t]=JSON.parse(localStorage.getItem("me.save."+t))})}},add:function(i){Object.keys(i).forEach(function(r){t(r)||(!function(t){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){return e[t]},set:function(n){e[t]=n,!0===me.device.localStorage&&localStorage.setItem("me.save."+t,JSON.stringify(n))}})}(r),r in e||(n[r]=i[r]))}),!0===me.device.localStorage&&localStorage.setItem("me.save",JSON.stringify(Object.keys(e)))},remove:function(n){t(n)||void 0!==e[n]&&(delete e[n],!0===me.device.localStorage&&(localStorage.removeItem("me.save."+n),localStorage.setItem("me.save",JSON.stringify(Object.keys(e)))))}};return n}()}(),function(){me.TMXUtils=function(){function setTMXValue(name,type,value){var match;if("string"!=typeof value)return value;switch(type){case"int":case"float":value=Number(value);break;case"bool":value="true"===value;break;default:if(!value||value.isBoolean())value=!value||"true"===value;else if(value.isNumeric())value=Number(value);else if(0===value.search(/^json:/i)){match=value.split(/^json:/i)[1];try{value=JSON.parse(match)}catch(t){throw new me.Error("Unable to parse JSON: "+match)}}else if(0===value.search(/^eval:/i)){match=value.split(/^eval:/i)[1];try{value=eval(match)}catch(t){throw new me.Error("Unable to evaluate: "+match)}}else((match=value.match(/^#([\da-fA-F])([\da-fA-F]{3})$/))||(match=value.match(/^#([\da-fA-F]{2})([\da-fA-F]{6})$/)))&&(value="#"+match[2]+match[1]);0===name.search(/^(ratio|anchorPoint)$/)&&"number"==typeof value&&(value={x:value,y:value})}return value}function parseAttributes(t,e){if(e.attributes&&e.attributes.length>0)for(var n=0;n<e.attributes.length;n++){var i=e.attributes.item(n);void 0!==i.name?t[i.name]=i.value:t[i.nodeName]=i.nodeValue}}var api={};return api.decode=function(t,e,n){switch(n=n||"none",e=e||"none"){case"csv":return me.utils.decodeCSV(t);case"base64":var i=me.utils.decodeBase64AsArray(t,4);return"none"===n?i:me.utils.decompress(i,n);case"none":return t;case"xml":throw new me.Error("XML encoding is deprecated, use base64 instead");default:throw new me.Error("Unknown layer encoding: "+e)}},api.normalize=function(t,e){var n=e.nodeName;switch(n){case"data":var i=api.parse(e);i.encoding=i.encoding||"xml",t.data=api.decode(i.text,i.encoding,i.compression),t.encoding="none";break;case"imagelayer":case"layer":case"objectgroup":var r=api.parse(e);r.type="layer"===n?"tilelayer":n,r.image&&(r.image=r.image.source),t.layers=t.layers||[],t.layers.push(r);break;case"animation":t.animation=api.parse(e).frames;break;case"frame":case"object":var o=n+"s";t[o]=t[o]||[],t[o].push(api.parse(e));break;case"tile":var s=api.parse(e);t.tiles=t.tiles||{},t.tiles[s.id]=s;break;case"tileset":var a=api.parse(e);a.image&&(a.imagewidth=a.image.width,a.imageheight=a.image.height,a.image=a.image.source),t.tilesets=t.tilesets||[],t.tilesets.push(a);break;case"polygon":case"polyline":t[n]=[];for(var u,h=api.parse(e).points.split(" "),l=0;l<h.length;l++)u=h[l].split(","),t[n].push({x:+u[0],y:+u[1]});break;case"properties":t.properties=api.parse(e);break;case"property":var c=api.parse(e);t[c.name]=setTMXValue(c.name,c.type||"string",c.value);break;default:t[n]=api.parse(e)}},api.parse=function(t){var e={},n="";if(1===t.nodeType&&parseAttributes(e,t),t.hasChildNodes())for(var i=0;i<t.childNodes.length;i++){var r=t.childNodes.item(i);switch(r.nodeType){case 1:api.normalize(e,r);break;case 3:n+=r.nodeValue.trim()}}return n&&(e.text=n),e},api.applyTMXProperties=function(t,e){var n=e.properties,i=e.propertytypes;if(void 0!==n)for(var r in n)if(n.hasOwnProperty(r)){var o="string";void 0!==i&&(o=i[r]),t[r]=setTMXValue(r,o,n[r])}},api}()}(),function(){me.TMXObjectGroup=me.Object.extend({init:function(t,e,n){this.name=e.name,this.width=e.width,this.height=e.height,this.z=n,this.objects=[];var i=void 0===e.visible||e.visible;this.opacity=!0===i?(+e.opacity||1).clamp(0,1):0,me.TMXUtils.applyTMXProperties(this,e);var r=e.objects;if(r){var o=this;r.forEach(function(e){o.objects.push(new me.TMXObject(t,e,n))})}},destroy:function(){this.objects=null},getObjectCount:function(){return this.objects.length},getObjectByIndex:function(t){return this.objects[t]}}),me.TMXObject=me.Object.extend({init:function(t,e,n){if(this.points=void 0,this.name=e.name,this.x=+e.x,this.y=+e.y,this.z=+n,this.width=+e.width||0,this.height=+e.height||0,this.gid=+e.gid||null,this.type=e.type,this.rotation=Number.prototype.degToRad(+e.rotation||0),this.id=+e.id||void 0,this.orientation=t.orientation,this.shapes=void 0,this.isEllipse=!1,this.isPolygon=!1,this.isPolyLine=!1,"number"==typeof this.gid)this.setTile(t.tilesets);else if(void 0!==e.ellipse)this.isEllipse=!0;else{var i=e.polygon;if(void 0!==i?this.isPolygon=!0:void 0!==(i=e.polyline)&&(this.isPolyLine=!0),void 0!==i){this.points=[];var r=this;i.forEach(function(t){r.points.push(new me.Vector2d(t.x,t.y))})}}t.getRenderer().adjustPosition(this),me.TMXUtils.applyTMXProperties(this,e),this.shapes||(this.shapes=this.parseTMXShapes())},setTile:function(t){var e=t.getTilesetByGid(this.gid);this.width=this.framewidth=e.tilewidth,this.height=this.frameheight=e.tileheight,this.tile=new me.Tile(this.x,this.y,this.gid,e)},parseTMXShapes:function(){var t=0,e=[];if(!0===this.isEllipse)e.push(new me.Ellipse(this.width/2,this.height/2,this.width,this.height).rotate(this.rotation));else if(!0===this.isPolygon)e.push(new me.Polygon(0,0,this.points).rotate(this.rotation));else if(!0===this.isPolyLine){var n,i,r=this.points,o=r.length-1;for(t=0;t<o;t++)n=r[t],i=r[t+1].clone(),0!==this.rotation&&(n=n.rotate(this.rotation),i=i.rotate(this.rotation)),e.push(new me.Line(0,0,[n,i]))}else e.push(new me.Polygon(0,0,[new me.Vector2d,new me.Vector2d(this.width,0),new me.Vector2d(this.width,this.height),new me.Vector2d(0,this.height)]).rotate(this.rotation));if("isometric"===this.orientation)for(t=0;t<e.length;t++)e[t].toIso();return e},getObjectPropertyByName:function(t){return this[t]}})}(),function(){me.Tile=me.Rect.extend({init:function(t,e,n,i){this.tileset=i,this.currentTransform=null,me.Rect.prototype.init.apply(this,[t*i.tilewidth,e*i.tileheight,i.tilewidth,i.tileheight]),this.col=t,this.row=e,this.tileId=n,this.flippedX=0!=(2147483648&this.tileId),this.flippedY=0!=(1073741824&this.tileId),this.flippedAD=0!=(536870912&this.tileId),this.flipped=this.flippedX||this.flippedY||this.flippedAD,!0===this.flipped&&this.createTransform(),this.tileId&=536870911},createTransform:function(){null===this.currentTransform?this.currentTransform=new me.Matrix2d:this.currentTransform.identity(),this.flippedAD&&(this.currentTransform.setTransform(0,1,0,1,0,0,0,0,1),this.currentTransform.translate(0,this.height-this.width)),this.flippedX&&(this.currentTransform.translate(this.flippedAD?0:this.width,this.flippedAD?this.height:0),this.currentTransform.scaleX(-1)),this.flippedY&&(this.currentTransform.translate(this.flippedAD?this.width:0,this.flippedAD?0:this.height),this.currentTransform.scaleY(-1))},getRenderable:function(t){var e,n=this.tileset;if(n.animations.has(this.tileId)){var i=[],r=[];n.animations.get(this.tileId).frames.forEach(function(t){r.push(t.tileid),i.push({name:""+t.tileid,delay:t.duration})}),e=n.texture.createAnimationFromName(r,t),e.addAnimation(this.tileId-n.firstgid,i),e.setCurrentAnimation(this.tileId-n.firstgid)}else e=n.texture.createSpriteFromName(this.tileId-n.firstgid,t);return this.flippedX&&e.currentTransform.scaleX(-1),this.flippedY&&e.currentTransform.scaleY(-1),e}})}(),function(){me.TMXTileset=me.Object.extend({init:function(t){var e=0;if(this.TileProperties=[],this.firstgid=this.lastgid=+t.firstgid,void 0!==t.source){var n=t.source,i=me.utils.getFileExtension(n);if(("tsx"===i||"json"===i)&&!(t=me.loader.getTMX(me.utils.getBasename(n))))throw new me.Error(n+" external TSX/JSON tileset not found")}this.name=t.name,this.tilewidth=+t.tilewidth,this.tileheight=+t.tileheight,this.spacing=+t.spacing||0,this.margin=+t.margin||0,this.tileoffset=new me.Vector2d,this.isAnimated=!1,this.animations=new Map,this._lastUpdate=0;var r=t.tiles;for(e in r)r.hasOwnProperty(e)&&("animation"in r[e]&&(this.isAnimated=!0,this.animations.set(+e+this.firstgid,{dt:0,idx:0,frames:r[e].animation,cur:r[e].animation[0]})),"properties"in r[e]&&this.setTileProperty(+e+this.firstgid,r[e].properties));var o=t.tileoffset;o&&(this.tileoffset.x=+o.x,this.tileoffset.y=+o.y);var s=t.tileproperties;if(s)for(e in s)s.hasOwnProperty(e)&&this.setTileProperty(+e+this.firstgid,s[e]);if(this.image=me.utils.getImage(t.image),!this.image)throw new me.TMXTileset.Error("melonJS: '"+t.image+"' file for tileset '"+this.name+"' not found!");this.texture=me.video.renderer.cache.get(this.image,{framewidth:this.tilewidth,frameheight:this.tileheight,margin:this.margin,spacing:this.spacing}),this.atlas=this.texture.getAtlas();var a=+t.columns||~~(this.image.width/(this.tilewidth+this.spacing)),u=~~(this.image.height/(this.tileheight+this.spacing));this.lastgid=this.firstgid+(a*u-1||0),t.tilecount&&this.lastgid-this.firstgid+1!=+t.tilecount&&console.warn("Computed tilecount ("+(this.lastgid-this.firstgid+1)+") does not match expected tilecount ("+t.tilecount+")")},setTileProperty:function(t,e){this.TileProperties[t]=e},contains:function(t){return t>=this.firstgid&&t<=this.lastgid},getViewTileId:function(t){return this.animations.has(t)?t=this.animations.get(t).cur.tileid:t-=this.firstgid,t},getTileProperties:function(t){return this.TileProperties[t]},update:function(t){var e=0,n=me.timer.getTime(),i=!1;return this._lastUpdate!==n&&(this._lastUpdate=n,this.animations.forEach(function(n){for(n.dt+=t,e=n.cur.duration;n.dt>=e;)n.dt-=e,n.idx=(n.idx+1)%n.frames.length,n.cur=n.frames[n.idx],e=n.cur.duration,i=!0})),i},drawTile:function(t,e,n,i){i.flipped&&(t.save(),t.translate(e,n),t.transform(i.currentTransform),e=n=0);var r=this.atlas[this.getViewTileId(i.tileId)].offset;t.drawImage(this.image,r.x,r.y,this.tilewidth,this.tileheight,e,n,this.tilewidth+t.uvOffset,this.tileheight+t.uvOffset),i.flipped&&t.restore()}}),me.TMXTilesetGroup=me.Object.extend({init:function(){this.tilesets=[],this.length=0},add:function(t){this.tilesets.push(t),this.length++},getTilesetByIndex:function(t){return this.tilesets[t]},getTilesetByGid:function(t){var e=-1;t&=536870911;for(var n=0,i=this.tilesets.length;n<i;n++){if(this.tilesets[n].contains(t))return this.tilesets[n];this.tilesets[n].firstgid===this.tilesets[n].lastgid&&t>=this.tilesets[n].firstgid&&(e=n)}if(-1!==e)return this.tilesets[e];throw new me.Error("no matching tileset found for gid "+t)}}),me.TMXTileset.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.TMXTileset.Error"}})}(),function(){var t=[{x:0,y:0},{x:1,y:-1},{x:1,y:0},{x:2,y:0}],e=[{x:0,y:0},{x:-1,y:1},{x:0,y:1},{x:0,y:2}];me.TMXRenderer=me.Object.extend({init:function(t,e,n,i){this.cols=t,this.rows=e,this.tilewidth=n,this.tileheight=i},canRender:function(t){return this.cols===t.cols&&this.rows===t.rows&&this.tilewidth===t.tilewidth&&this.tileheight===t.tileheight},pixelToTileCoords:function(t,e,n){return n},tileToPixelCoords:function(t,e,n){return n},pixelToTileX:function(t){},pixelToTileY:function(t){},drawTile:function(t,e,n,i){},drawTileLayer:function(t,e,n){}}),me.TMXOrthogonalRenderer=me.TMXRenderer.extend({canRender:function(t){return"orthogonal"===t.orientation&&me.TMXRenderer.prototype.canRender.apply(this,[t])},pixelToTileCoords:function(t,e,n){return(n||new me.Vector2d).set(this.pixelToTileX(t),this.pixelToTileY(e))},pixelToTileX:function(t){return t/this.tilewidth},pixelToTileY:function(t){return t/this.tileheight},tileToPixelCoords:function(t,e,n){return(n||new me.Vector2d).set(t*this.tilewidth,e*this.tileheight)},adjustPosition:function(t){"number"==typeof t.gid&&(t.y-=t.height)},drawTile:function(t,e,n,i){var r=i.tileset;r.drawTile(t,r.tileoffset.x+e*this.tilewidth,r.tileoffset.y+(n+1)*this.tileheight-r.tileheight,i)},drawTileLayer:function(t,e,n){var i=this.pixelToTileCoords(Math.max(n.pos.x-(e.maxTileSize.width-e.tilewidth),0),Math.max(n.pos.y-(e.maxTileSize.height-e.tileheight),0),me.pool.pull("me.Vector2d")).floorSelf(),r=this.pixelToTileCoords(n.pos.x+n.width+this.tilewidth,n.pos.y+n.height+this.tileheight,me.pool.pull("me.Vector2d")).ceilSelf();r.x=r.x>this.cols?this.cols:r.x,r.y=r.y>this.rows?this.rows:r.y;for(var o=i.y;o<r.y;o++)for(var s=i.x;s<r.x;s++){var a=e.layerData[s][o];a&&this.drawTile(t,s,o,a)}me.pool.push(i),me.pool.push(r)}}),me.TMXIsometricRenderer=me.TMXRenderer.extend({init:function(t,e,n,i){me.TMXRenderer.prototype.init.apply(this,[t,e,n,i]),this.hTilewidth=n/2,this.hTileheight=i/2,this.originX=this.rows*this.hTilewidth},canRender:function(t){return"isometric"===t.orientation&&me.TMXRenderer.prototype.canRender.apply(this,[t])},pixelToTileCoords:function(t,e,n){return(n||new me.Vector2d).set(this.pixelToTileX(t,e),this.pixelToTileY(e,t))},pixelToTileX:function(t,e){return e/this.tileheight+(t-this.originX)/this.tilewidth},pixelToTileY:function(t,e){return t/this.tileheight-(e-this.originX)/this.tilewidth},tileToPixelCoords:function(t,e,n){return(n||new me.Vector2d).set((t-e)*this.hTilewidth+this.originX,(t+e)*this.hTileheight)},adjustPosition:function(t){var e=t.x/this.hTilewidth,n=t.y/this.tileheight,i=me.pool.pull("me.Vector2d");this.tileToPixelCoords(e,n,i),t.x=i.x,t.y=i.y,me.pool.push(i)},drawTile:function(t,e,n,i){var r=i.tileset;r.drawTile(t,(this.cols-1)*r.tilewidth+(e-n)*r.tilewidth>>1,-r.tilewidth+(e+n)*r.tileheight>>2,i)},drawTileLayer:function(t,e,n){var i=e.tileset,r=i.tileoffset,o=this.pixelToTileCoords(n.pos.x-i.tilewidth,n.pos.y-i.tileheight,me.pool.pull("me.Vector2d")).floorSelf(),s=this.pixelToTileCoords(n.pos.x+n.width+i.tilewidth,n.pos.y+n.height+i.tileheight,me.pool.pull("me.Vector2d")).ceilSelf(),a=this.tileToPixelCoords(s.x,s.y,me.pool.pull("me.Vector2d")),u=this.tileToPixelCoords(o.x,o.y,me.pool.pull("me.Vector2d"));u.x-=this.hTilewidth,u.y+=this.tileheight;var h=u.y-n.pos.y>this.hTileheight,l=n.pos.x-u.x<this.hTilewidth;h&&(l?(o.x--,u.x-=this.hTilewidth):(o.y--,u.x+=this.hTilewidth),u.y-=this.hTileheight);for(var c=h^l,f=o.clone(),d=2*u.y;d-2*this.tileheight<2*a.y;d+=this.tileheight){f.setV(o);for(var p=u.x;p<a.x;p+=this.tilewidth){if(f.x>=0&&f.y>=0&&f.x<this.cols&&f.y<this.rows){var m=e.layerData[f.x][f.y];m&&(i=m.tileset,r=i.tileoffset,i.drawTile(t,r.x+p,r.y+d/2-i.tileheight,m))}f.x++,f.y--}c?(o.y++,u.x-=this.hTilewidth,c=!1):(o.x++,u.x+=this.hTilewidth,c=!0)}me.pool.push(o),me.pool.push(s),me.pool.push(a),me.pool.push(u)}}),me.TMXHexagonalRenderer=me.TMXRenderer.extend({init:function(t,e,n,i,r,o,s){me.TMXRenderer.prototype.init.apply(this,[t,e,n,i]),this.hexsidelength=r,this.staggeraxis=o,this.staggerindex=s,this.sidelengthx=0,this.sidelengthy=0,"x"===o?this.sidelengthx=r:this.sidelengthy=r,this.sideoffsetx=(this.tilewidth-this.sidelengthx)/2,this.sideoffsety=(this.tileheight-this.sidelengthy)/2,this.columnwidth=this.sideoffsetx+this.sidelengthx,this.rowheight=this.sideoffsety+this.sidelengthy,this.centers=[new me.Vector2d,new me.Vector2d,new me.Vector2d,new me.Vector2d]},canRender:function(t){return"hexagonal"===t.orientation&&me.TMXRenderer.prototype.canRender.apply(this,[t])},pixelToTileCoords:function(n,i,r){var o,s,a=r||new me.Vector2d;"x"===this.staggeraxis?n-="odd"===this.staggerindex?this.sideoffsetx:this.tilewidth:i-="odd"===this.staggerindex?this.sideoffsety:this.tileheight;var u=me.pool.pull("me.Vector2d",Math.floor(n/(2*this.columnwidth)),Math.floor(i/(2*this.rowheight))),h=me.pool.pull("me.Vector2d",n-u.x*(2*this.columnwidth),i-u.y*(2*this.rowheight));"x"===this.staggeraxis?(u.x=2*u.x,"even"===this.staggerindex&&++u.x):(u.y=2*u.y,"even"===this.staggerindex&&++u.y);var l,c,f,d;"x"===this.staggeraxis?(l=this.sidelengthx/2,f=l+this.columnwidth,d=this.tileheight/2,this.centers[0].set(l,d),this.centers[1].set(f,d-this.rowheight),this.centers[2].set(f,d+this.rowheight),this.centers[3].set(f+this.columnwidth,d)):(c=this.sidelengthy/2,f=this.tilewidth/2,d=c+this.rowheight,this.centers[0].set(f,c),this.centers[1].set(f-this.columnwidth,d),this.centers[2].set(f+this.columnwidth,d),this.centers[3].set(f,d+this.rowheight));for(var p,m=0,g=Number.MAX_VALUE,v=0;v<4;++v)(p=Math.pow(this.centers[v].x-h.x,2)+Math.pow(this.centers[v].y-h.y,2))<g&&(g=p,m=v);var y="x"===this.staggeraxis?t:e;return o=u.x+y[m].x,s=u.y+y[m].y,me.pool.push(u),me.pool.push(h),a.set(o,s)},pixelToTileX:function(t,e){var n=me.pool.pull("me.Vector2d");return this.pixelToTileCoords(t,e,n),me.pool.push(n),n.x},pixelToTileY:function(t,e){var n=me.pool.pull("me.Vector2d");return this.pixelToTileCoords(e,t,n),me.pool.push(n),n.y},tileToPixelCoords:function(t,e,n){var i,r,o=n||new me.Vector2d;return"x"===this.staggeraxis?(i=t*this.columnwidth,"odd"===this.staggerindex?(r=e*(this.tileheight+this.sidelengthy),r+=this.rowheight*(1&t)):(r=e*(this.tileheight+this.sidelengthy),r+=this.rowheight*(1-(1&t)))):(r=e*this.rowheight,"odd"===this.staggerindex?(i=t*(this.tilewidth+this.sidelengthx),i+=this.columnwidth*(1&e)):(i=t*(this.tilewidth+this.sidelengthx),i+=this.columnwidth*(1-(1&e)))),o.set(i,r)},adjustPosition:function(t){"number"==typeof t.gid&&(t.y-=t.height)},drawTile:function(t,e,n,i){var r=i.tileset,o=this.tileToPixelCoords(e,n,me.pool.pull("me.Vector2d"));r.drawTile(t,r.tileoffset.x+o.x,r.tileoffset.y+o.y+(this.tileheight-r.tileheight),i),me.pool.push(o)},drawTileLayer:function(t,e,n){var i=this.pixelToTileCoords(n.pos.x,n.pos.y).floorSelf(),r=this.pixelToTileCoords(n.pos.x+n.width+this.tilewidth,n.pos.y+n.height+this.tileheight).ceilSelf();i.x=i.x<0?0:i.x,i.y=i.y<0?0:i.y,r.x=r.x>this.cols?this.cols:r.x,r.y=r.y>this.rows?this.rows:r.y;for(var o=i.y;o<r.y;o++)for(var s=i.x;s<r.x;s++){var a=e.layerData[s][o];a&&this.drawTile(t,s,o,a)}}})}(),function(){me.ColorLayer=me.Renderable.extend({init:function(t,e,n){if(me.Renderable.prototype.init.apply(this,[0,0,1/0,1/0]),this.name=t,this.pos.z=n,this.floating=!0,e instanceof me.Color)this.color=e.toRGBA();else{var i=me.pool.pull("me.Color");this.color=i.parseCSS(e).toRGBA(),me.pool.push(i)}},draw:function(t,e){var n=t.globalAlpha();t.setGlobalAlpha(n*this.getOpacity());var i=me.game.viewport.pos;t.setColor(this.color),t.fillRect(e.left-i.x,e.top-i.y,e.width,e.height),t.setGlobalAlpha(n),t.setColor("#fff")}}),me.ImageLayer=me.Renderable.extend({init:function(t,e,n){if(this.name=n.name||"me.ImageLayer",this.image=me.utils.getImage(n.image),!this.image)throw new me.Error(("string"==typeof n.image?"'"+n.image+"'":"Image")+" file for Image Layer '"+this.name+"' not found!");this.imagewidth=this.image.width,this.imageheight=this.image.height,me.Renderable.prototype.init.apply(this,[t,e,1/0,1/0]),this.floating=!0,this.pos.z=n.z||0,this.offset=new me.Vector2d(t,e),this.ratio=new me.Vector2d(1,1),void 0!==n.ratio&&("number"==typeof n.ratio?this.ratio.set(n.ratio,n.ratio):this.ratio.setV(n.ratio)),void 0===n.anchorPoint?this.anchorPoint.set(0,0):"number"==typeof n.anchorPoint?this.anchorPoint.set(n.anchorPoint,n.anchorPoint):this.anchorPoint.setV(n.anchorPoint),Object.defineProperty(this,"repeat",{get:function(){return this._repeat},set:function(t){switch(this._repeat=t,this._repeat){case"no-repeat":this.repeatX=!1,this.repeatY=!1;break;case"repeat-x":this.repeatX=!0,this.repeatY=!1;break;case"repeat-y":this.repeatX=!1,this.repeatY=!0;break;default:this.repeatX=!0,this.repeatY=!0}this.resize(me.game.viewport.width,me.game.viewport.height),this.createPattern()}}),this.repeat=n.repeat||"repeat"},onActivateEvent:function(){var t=this.updateLayer.bind(this);this.vpChangeHdlr=me.event.subscribe(me.event.VIEWPORT_ONCHANGE,t),this.vpResizeHdlr=me.event.subscribe(me.event.VIEWPORT_ONRESIZE,this.resize.bind(this)),this.vpLoadedHdlr=me.event.subscribe(me.event.LEVEL_LOADED,function(){t(me.game.viewport.pos)}),!0!==this.ancestor._root&&this.updateLayer(me.game.viewport.pos)},resize:function(t,e){me.Renderable.prototype.resize.apply(this,[this.repeatX?1/0:t,this.repeatY?1/0:e])},createPattern:function(){this._pattern=me.video.renderer.createPattern(this.image,this._repeat)},updateLayer:function(t){var e=this.ratio.x,n=this.ratio.y;if(e===n!==0){var i=me.game.viewport,r=this.imagewidth,o=this.imageheight,s=i.bounds.width,a=i.bounds.height,u=this.anchorPoint.x,h=this.anchorPoint.y,l=u*(e-1)*(s-i.width)+this.offset.x-e*t.x,c=h*(n-1)*(a-i.height)+this.offset.y-n*t.y;this.repeatX?this.pos.x=l%r:this.pos.x=l,this.repeatY?this.pos.y=c%o:this.pos.y=c}},draw:function(t){var e=me.game.viewport,n=this.imagewidth,i=this.imageheight,r=e.bounds.width,o=e.bounds.height,s=this.anchorPoint.x,a=this.anchorPoint.y,u=this.pos.x,h=this.pos.y,l=t.globalAlpha();this.ratio.x===this.ratio.y===0&&(u+=s*(r-n),h+=a*(o-i)),t.setGlobalAlpha(l*this.getOpacity()),t.translate(u,h),t.drawPattern(this._pattern,0,0,2*e.width,2*e.height),t.translate(-u,-h),t.setGlobalAlpha(l)},onDeactivateEvent:function(){me.event.unsubscribe(this.vpChangeHdlr),me.event.unsubscribe(this.vpResizeHdlr),me.event.unsubscribe(this.vpLoadedHdlr)}}),me.TMXLayer=me.Renderable.extend({init:function(t,e,n,i,r){me.Renderable.prototype.init.apply(this,[0,0,0,0]),this.tilewidth=t,this.tileheight=e,this.orientation=n,this.tilesets=i,this.tileset=this.tilesets?this.tilesets.getTilesetByIndex(0):null,this.maxTileSize={width:0,height:0};for(var o=0;o<this.tilesets.length;o++){var s=this.tilesets.getTilesetByIndex(o);this.maxTileSize.width=Math.max(this.maxTileSize.width,s.tilewidth),this.maxTileSize.height=Math.max(this.maxTileSize.height,s.tileheight)}this.animatedTilesets=[],this.isAnimated=!1,this.pos.z=r,this.anchorPoint.set(0,0)},initFromJSON:function(t){this.name=t.name,this.cols=+t.width,this.rows=+t.height,this.hexsidelength=+t.hexsidelength||void 0,this.staggeraxis=t.staggeraxis,this.staggerindex=t.staggerindex;var e=void 0!==t.visible?+t.visible:1;this.setOpacity(e?+t.opacity:0),"isometric"===this.orientation?(this.width=(this.cols+this.rows)*(this.tilewidth/2),this.height=(this.cols+this.rows)*(this.tileheight/2)):(this.width=this.cols*this.tilewidth,this.height=this.rows*this.tileheight),me.TMXUtils.applyTMXProperties(this,t),void 0===this.preRender&&(this.preRender=me.sys.preRender),!0===this.preRender&&(this.canvasRenderer=new me.CanvasRenderer(me.video.createCanvas(this.width,this.height),this.width,this.height,{transparent:!0})),this.initArray(this.cols,this.rows)},onActivateEvent:function(){if(void 0===this.animatedTilesets&&(this.animatedTilesets=[]),this.tilesets)for(var t=this.tilesets.tilesets,e=0;e<t.length;e++)t[e].isAnimated&&this.animatedTilesets.push(t[e]);this.isAnimated=this.animatedTilesets.length>0,this.isAnimated&&(this.preRender=!1),this.getBounds().resize(this.width,this.height)},onDeactivateEvent:function(){this.animatedTilesets=void 0},setRenderer:function(t){this.renderer=t},getRenderer:function(t){return this.renderer},initArray:function(t,e){this.layerData=[];for(var n=0;n<t;n++){this.layerData[n]=[];for(var i=0;i<e;i++)this.layerData[n][i]=null}},getTileId:function(t,e){var n=this.getTile(t,e);return n?n.tileId:null},getTile:function(t,e){if(this.containsPoint(t,e)){var n=this.renderer,i=~~n.pixelToTileX(t,e),r=~~n.pixelToTileY(e,t);if(i>=0&&i<n.cols&&r>=0&&r<n.rows)return this.layerData[i][r]}return null},setTile:function(t,e,n){this.tileset.contains(n)||(this.tileset=this.tilesets.getTilesetByGid(n));var i=this.layerData[t][e]=new me.Tile(t,e,n,this.tileset);return this.preRender&&this.renderer.drawTile(this.canvasRenderer,t,e,i),i},clearTile:function(t,e){this.layerData[t][e]=null,this.preRender&&this.canvasRenderer.clearRect(t*this.tilewidth,e*this.tileheight,this.tilewidth,this.tileheight)},update:function(t){if(this.isAnimated){for(var e=!1,n=0;n<this.animatedTilesets.length;n++)e=this.animatedTilesets[n].update(t)||e;return e}return!1},draw:function(t,e){var n=t.globalAlpha();if(t.setGlobalAlpha(n*this.getOpacity()),this.preRender){var i=Math.min(e.width,this.width),r=Math.min(e.height,this.height);t.drawImage(this.canvasRenderer.getCanvas(),e.pos.x,e.pos.y,i,r,e.pos.x,e.pos.y,i,r)}else this.renderer.drawTileLayer(t,this,e);t.setGlobalAlpha(n)}})}(),function(){function t(t){switch(t.orientation){case"orthogonal":return new me.TMXOrthogonalRenderer(t.cols,t.rows,t.tilewidth,t.tileheight);case"isometric":return new me.TMXIsometricRenderer(t.cols,t.rows,t.tilewidth,t.tileheight);case"hexagonal":return new me.TMXHexagonalRenderer(t.cols,t.rows,t.tilewidth,t.tileheight,t.hexsidelength,t.staggeraxis,t.staggerindex);default:throw new me.Error(t.orientation+" type TMX Tile Map not supported!")}}function e(t,e){for(var n=0,i=0;i<t.rows;i++)for(var r=0;r<t.cols;r++){var o=e[n++];0!==o&&t.setTile(r,i,o)}}function n(n,i,r){var o=new me.TMXLayer(n.tilewidth,n.tileheight,n.orientation,n.tilesets,r);return o.initFromJSON(i),n.getRenderer().canRender(o)?o.setRenderer(n.getRenderer()):o.setRenderer(t(o)),e(o,me.TMXUtils.decode(i.data,i.encoding,i.compression)),o}function i(t,e,n){me.TMXUtils.applyTMXProperties(e.properties,e);var i=new me.ImageLayer(+e.x||0,+e.y||0,Object.assign({name:e.name,image:e.image,z:n},e.properties)),r=void 0===e.visible||e.visible;return i.setOpacity(r?+e.opacity:0),i}function r(t){return new me.TMXTileset(t)}function o(t,e,n){return new me.TMXObjectGroup(t,e,n)}me.TMXTileMap=me.Object.extend({init:function(t,e){this.name=t,this.data=e,this.cols=+e.width,this.rows=+e.height,this.tilewidth=+e.tilewidth,this.tileheight=+e.tileheight,this.tilesets=null,this.layers=[],this.objectGroups=[],this.version=e.version,this.orientation=e.orientation,"isometric"===this.orientation?(this.width=(this.cols+this.rows)*(this.tilewidth/2),this.height=(this.cols+this.rows)*(this.tileheight/2)):(this.width=this.cols*this.tilewidth,this.height=this.rows*this.tileheight),this.z=0,this.nextobjectid=+e.nextobjectid||void 0,this.hexsidelength=+e.hexsidelength||void 0,this.staggeraxis=e.staggeraxis,this.staggerindex=e.staggerindex,this.backgroundcolor=e.backgroundcolor,me.TMXUtils.applyTMXProperties(this,e),this.initialized=!1},getRenderer:function(e){return void 0!==this.renderer&&this.renderer.canRender(this)||(this.renderer=t(this)),this.renderer},readMapObjects:function(t){if(!0!==this.initialized){var e=this.z,s=this;if(this.tilesets||(this.tilesets=new me.TMXTilesetGroup),void 0!==t.tilesets){t.tilesets.forEach(function(t){s.tilesets.add(r(t))})}this.backgroundcolor&&this.layers.push(new me.ColorLayer("background_color",this.backgroundcolor,e++)),this.background_image&&this.layers.push(new me.ImageLayer(0,0,{name:"background_image",image:this.background_image,z:e++})),t.layers.forEach(function(t){switch(t.type){case"imagelayer":s.layers.push(i(s,t,e++));break;case"tilelayer":s.layers.push(n(s,t,e++));break;case"objectgroup":s.objectGroups.push(o(s,t,e++))}}),this.initialized=!0}},addTo:function(t,e){var n=t.autoSort,i=t.autoDepth;t.autoSort=!1,t.autoDepth=!1,this.getLayers().forEach(function(e){t.addChild(e)}),this.getObjects(e).forEach(function(e){t.addChild(e)}),t.autoSort=n,t.autoDepth=i,t.sort(!0)},getObjects:function(t){var e,n=[],i=!1;this.readMapObjects(this.data);for(var r=0;r<this.objectGroups.length;r++){var o=this.objectGroups[r];i=o.name.toLowerCase().includes("collision"),!1===t&&(e=new me.Container(0,0,this.width,this.height),e.name=o.name,e.pos.z=o.z,e.setOpacity(o.opacity),e.autoSort=!1,e.autoDepth=!1);for(var s=0;s<o.objects.length;s++){var a=o.objects[s],u=me.pool.pull(a.name||"me.Entity",a.x,a.y,a);if("object"==typeof u){if("object"==typeof a.tile&&!u.renderable)switch(u.renderable=a.tile.getRenderable(a),a.rotation){case Math.PI:u.translate(-u.renderable.width,u.renderable.height);break;case Math.PI/2:u.translate(0,u.renderable.height);break;case-Math.PI/2:u.translate(-u.renderable.width,0)}i&&!a.name&&(u.body.collisionType=me.collision.types.WORLD_SHAPE),u.pos.z=o.z,!0===t?(!0===u.isRenderable&&(u.setOpacity(u.getOpacity()*o.opacity),u.renderable instanceof me.Renderable&&u.renderable.setOpacity(u.renderable.getOpacity()*o.opacity)),n.push(u)):e.addChild(u)}}!1===t&&e.children.length>0&&(e.autoSort=!0,e.autoDepth=!0,n.push(e))}return n},getLayers:function(){return this.readMapObjects(this.data),this.layers},destroy:function(){this.tilesets=void 0,this.layers=[],this.objectGroups=[],this.initialized=!1}})}(),function(){me.levelDirector=function(){function t(t,s,a){s.container.destroy(),me.video.renderer.reset(),i[n.getCurrentLevelId()]&&i[n.getCurrentLevelId()].destroy(),o=r.indexOf(t),e(t,s.container,s.flatten,s.setViewportBounds),me.event.publish(me.event.LEVEL_LOADED,[t]),s.onLoaded(t),a&&me.state.restart()}function e(t,e,n,r){function o(){e.pos.set(Math.max(0,~~((me.game.viewport.width-a.width)/2)),Math.max(0,~~((me.game.viewport.height-a.height)/2)),0)}var a=i[t],u=e.autoSort;e.autoSort=!1,r&&me.game.viewport.setBounds(0,0,Math.max(a.width,me.game.viewport.width),Math.max(a.height,me.game.viewport.height)),me.utils.resetGUID(t,a.nextobjectid),a.addTo(e,n),e.sort(!0),e.autoSort=u,e.resize(a.width,a.height),r&&(o(),s&&me.event.unsubscribe(s),s=me.event.subscribe(me.event.VIEWPORT_ONRESIZE,o))}var n={},i={},r=[],o=0,s=null;return n.reset=function(){},n.addLevel=function(){throw new me.Error("no level loader defined")},n.addTMXLevel=function(t,e){return null==i[t]&&(i[t]=new me.TMXTileMap(t,me.loader.getTMX(t)),r.push(t),e&&e(),!0)},n.loadLevel=function(e,n){if(n=Object.assign({container:me.game.world,onLoaded:me.game.onLevelLoaded,flatten:me.game.mergeGroup,setViewportBounds:!0},n||{}),void 0===i[e])throw new me.Error("level "+e+" not found");if(!(i[e]instanceof me.TMXTileMap))throw new me.Error("no level loader defined");return me.state.isRunning()?(me.state.stop(),t.defer(this,e,n,!0)):t(e,n),!0},n.getCurrentLevelId=function(){return r[o]},n.getCurrentLevel=function(){return i[n.getCurrentLevelId()]},n.reloadLevel=function(t){return n.loadLevel(n.getCurrentLevelId(),t)},n.nextLevel=function(t){return o+1<r.length&&n.loadLevel(r[o+1],t)},n.previousLevel=function(t){return o-1>=0&&n.loadLevel(r[o-1],t)},n.levelCount=function(){return r.length},n}()}(),/**
 * @preserve Tween JS
 * https://github.com/sole/Tween.js
 */
function(){me.Tween=function(t){var e=null,n=null,i=null,r=null,o=null,s=null,a=null,u=null,h=null,l=null,c=null,f=null,d=null,p=null,m=null,g=null,v=null,y=null;this._resumeCallback=function(t){l&&(l+=t)},this.setProperties=function(t){e=t,n={},i={},r={},o=1e3,s=0,a=!1,u=!1,h=0,l=null,c=me.Tween.Easing.Linear.None,f=me.Tween.Interpolation.Linear,d=[],p=null,m=!1,g=null,v=null,y=me.timer.lastUpdate,this.isPersistent=!1;for(var _ in t)"object"!=typeof t&&(n[_]=parseFloat(t[_],10))},this.setProperties(t),this.onResetEvent=function(t){this.setProperties(t)},this.onActivateEvent=function(){me.event.subscribe(me.event.STATE_RESUME,this._resumeCallback)},this.onDeactivateEvent=function(){me.event.unsubscribe(me.event.STATE_RESUME,this._resumeCallback)},this.to=function(t,e){return void 0!==e&&(o=e),i=t,this},this.start=function(t){m=!1,me.game.world.addChild(this),l=(void 0===t?me.timer.getTime():t)+h;for(var o in i){if(i[o]instanceof Array){if(0===i[o].length)continue;i[o]=[e[o]].concat(i[o])}n[o]=e[o],n[o]instanceof Array==!1&&(n[o]*=1),r[o]=n[o]||0}return this},this.stop=function(){return me.game.world.removeChildNow(this),this},this.delay=function(t){return h=t,this},this.repeat=function(t){return s=t,this},this.yoyo=function(t){return a=t,this},this.easing=function(t){if("function"!=typeof t)throw new me.Tween.Error("invalid easing function for me.Tween.easing()");return c=t,this},this.interpolation=function(t){return f=t,this},this.chain=function(){return d=arguments,this},this.onStart=function(t){return p=t,this},this.onUpdate=function(t){return g=t,this},this.onComplete=function(t){return v=t,this},this.update=function(t){y=me.timer.lastUpdate>y?me.timer.lastUpdate:y+t;var _,w=y;if(w<l)return!0;!1===m&&(null!==p&&p.call(e),m=!0);var b=(w-l)/o;b=b>1?1:b;var x=c(b);for(_ in i){var T=n[_]||0,E=i[_];E instanceof Array?e[_]=f(E,x):("string"==typeof E&&(E=T+parseFloat(E,10)),"number"==typeof E&&(e[_]=T+(E-T)*x))}if(null!==g&&g.call(e,x),1===b){if(s>0){isFinite(s)&&s--;for(_ in r){if("string"==typeof i[_]&&(r[_]=r[_]+parseFloat(i[_],10)),a){var A=r[_];r[_]=i[_],i[_]=A}n[_]=r[_]}return a&&(u=!u),l=w+h,!0}me.game.world.removeChildNow(this),null!==v&&v.call(e);for(var S=0,P=d.length;S<P;S++)d[S].start(w);return!1}return!0}},me.Tween.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},Out:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},InOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-me.Tween.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*me.Tween.Easing.Bounce.In(2*t):.5*me.Tween.Easing.Bounce.Out(2*t-1)+.5}}},me.Tween.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=me.Tween.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],i):e>1?o(t[n],t[n-1],n-i):o(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){var n,i=0,r=t.length-1,o=Math.pow,s=me.Tween.Interpolation.Utils.Bernstein;for(n=0;n<=r;n++)i+=o(1-e,r-n)*o(e,n)*t[n]*s(r,n);return i},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=me.Tween.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),o(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=me.Tween.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n,i=1;if(t[e])return t[e];for(n=e;n>1;n--)i*=n;return t[e]=i}}(),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),s=.5*(i-e),a=r*r;return(2*e-2*n+o+s)*(r*a)+(-3*e+3*n-2*o-s)*a+o*r+e}}},me.Tween.Error=me.Error.extend({init:function(t){me.Error.prototype.init.apply(this,[t]),this.name="me.Tween.Error"}})}(),/**
 * @preserve MinPubSub
 * a micro publish/subscribe messaging framework
 * @see https://github.com/daniellmb/MinPubSub
 * @author Daniel Lamb <daniellmb.com>
 *
 * Released under the MIT License
 */
function(){me.event=function(){var t={},e={};return t.STATE_PAUSE="me.state.onPause",t.STATE_RESUME="me.state.onResume",t.STATE_STOP="me.state.onStop",t.STATE_RESTART="me.state.onRestart",t.GAME_INIT="me.game.onInit",t.GAME_RESET="me.game.onReset",t.LEVEL_LOADED="me.game.onLevelLoaded",t.LOADER_COMPLETE="me.loader.onload",t.LOADER_PROGRESS="me.loader.onProgress",t.KEYDOWN="me.input.keydown",t.KEYUP="me.input.keyup",t.GAMEPAD_CONNECTED="gamepad.connected",t.GAMEPAD_DISCONNECTED="gamepad.disconnected",t.GAMEPAD_UPDATE="gamepad.update",t.POINTERMOVE="me.event.pointermove",t.DRAGSTART="me.game.dragstart",t.DRAGEND="me.game.dragend",t.WINDOW_ONRESIZE="window.onresize",t.VIEWPORT_ONRESIZE="viewport.onresize",t.WINDOW_ONORIENTATION_CHANGE="window.orientationchange",t.WINDOW_ONSCROLL="window.onscroll",t.VIEWPORT_ONCHANGE="viewport.onchange",t.publish=function(t,n){for(var i=e[t],r=i?i.length:0;r--;)i[r].apply(window,n||[])},t.subscribe=function(t,n){return e[t]||(e[t]=[]),e[t].push(n),[t,n]},t.unsubscribe=function(t,n){var i=e[n?t:t[0]],r=i?i.length:0;for(n=n||t[1];r--;)i[r]===n&&i.splice(r,1)},t}()}(),/*!
 *  howler.js v2.0.2
 *  howlerjs.com
 *
 *  (c) 2013-2016, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var t=function(){this.init()};t.prototype={init:function(){var t=this||e;return t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var n=this||e;if(t=parseFloat(t),n.ctx||h(),void 0!==t&&t>=0&&t<=1){if(n._volume=t,n._muted)return n;n.usingWebAudio&&(n.masterGain.gain.value=t);for(var i=0;i<n._howls.length;i++)if(!n._howls[i]._webAudio)for(var r=n._howls[i]._getSoundIds(),o=0;o<r.length;o++){var s=n._howls[i]._soundById(r[o]);s&&s._node&&(s._node.volume=s._volume*t)}return n}return n._volume},mute:function(t){var n=this||e;n.ctx||h(),n._muted=t,n.usingWebAudio&&(n.masterGain.gain.value=t?0:n._volume);for(var i=0;i<n._howls.length;i++)if(!n._howls[i]._webAudio)for(var r=n._howls[i]._getSoundIds(),o=0;o<r.length;o++){var s=n._howls[i]._soundById(r[o]);s&&s._node&&(s._node.muted=!!t||s._muted)}return n},unload:function(){for(var t=this||e,n=t._howls.length-1;n>=0;n--)t._howls[n].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,h()),t},codecs:function(t){return(this||e)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||e;if(t.state=t.ctx?t.ctx.state||"running":"running",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{var n=new Audio;void 0===n.oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{var n=new Audio;n.muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||e,n=null;try{n="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!n||"function"!=typeof n.canPlayType)return t;var i=n.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!i&&!n.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!n.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||e,n=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),i=!!("ontouchend"in window||t._navigator&&t._navigator.maxTouchPoints>0||t._navigator&&t._navigator.msMaxTouchPoints>0);if(!t._mobileEnabled&&t.ctx&&(n||i)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var r=function(){var e=t.ctx.createBufferSource();e.buffer=t._scratchBuffer,e.connect(t.ctx.destination),void 0===e.start?e.noteOn(0):e.start(0),e.onended=function(){e.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchend",r,!0)}};return document.addEventListener("touchend",r,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&e.usingWebAudio){for(var n=0;n<t._howls.length;n++)if(t._howls[n]._webAudio)for(var i=0;i<t._howls[n]._sounds.length;i++)if(!t._howls[n]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&e.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.state="resuming",t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var e=new t,n=function(t){var e=this;if(!t.src||0===t.src.length)return void console.error("An array of source files must be passed with any new Howl.");e.init(t)};n.prototype={init:function(t){var n=this;return e.ctx||h(),n._autoplay=t.autoplay||!1,n._format="string"!=typeof t.format?t.format:[t.format],n._html5=t.html5||!1,n._muted=t.mute||!1,n._loop=t.loop||!1,n._pool=t.pool||5,n._preload="boolean"!=typeof t.preload||t.preload,n._rate=t.rate||1,n._sprite=t.sprite||{},n._src="string"!=typeof t.src?t.src:[t.src],n._volume=void 0!==t.volume?t.volume:1,n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._onend=t.onend?[{fn:t.onend}]:[],n._onfade=t.onfade?[{fn:t.onfade}]:[],n._onload=t.onload?[{fn:t.onload}]:[],n._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],n._onpause=t.onpause?[{fn:t.onpause}]:[],n._onplay=t.onplay?[{fn:t.onplay}]:[],n._onstop=t.onstop?[{fn:t.onstop}]:[],n._onmute=t.onmute?[{fn:t.onmute}]:[],n._onvolume=t.onvolume?[{fn:t.onvolume}]:[],n._onrate=t.onrate?[{fn:t.onrate}]:[],n._onseek=t.onseek?[{fn:t.onseek}]:[],n._onresume=[],n._webAudio=e.usingWebAudio&&!n._html5,void 0!==e.ctx&&e.ctx&&e.mobileAutoEnable&&e._enableMobileAudio(),e._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&n.load(),n},load:function(){var t=this,n=null;if(e.noAudio)return void t._emit("loaderror",null,"No audio support.");"string"==typeof t._src&&(t._src=[t._src]);for(var r=0;r<t._src.length;r++){var s,a;if(t._format&&t._format[r])s=t._format[r];else{if("string"!=typeof(a=t._src[r])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}s=/^data:audio\/([^;,]+);/i.exec(a),s||(s=/\.([^.]+)$/.exec(a.split("?",1)[0])),s&&(s=s[1].toLowerCase())}if(e.codecs(s)){n=t._src[r];break}}return n?(t._src=n,t._state="loading","https:"===window.location.protocol&&"http:"===n.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new i(t),t._webAudio&&o(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(t,n){var i=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t){t="__default";for(var o=0,s=0;s<i._sounds.length;s++)i._sounds[s]._paused&&!i._sounds[s]._ended&&(o++,r=i._sounds[s]._id);1===o?t=null:r=null}}var a=r?i._soundById(r):i._inactiveSound();if(!a)return null;if(r&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state&&!i._sprite[t])return i._queue.push({event:"play",action:function(){i.play(i._soundById(a._id)?a._id:void 0)}}),a._id;if(r&&!a._paused)return n||setTimeout(function(){i._emit("play",a._id)},0),a._id;i._webAudio&&e._autoResume();var u=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),h=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-u),l=1e3*h/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=t,a._seek=u,a._start=i._sprite[t][0]/1e3,a._stop=(i._sprite[t][0]+i._sprite[t][1])/1e3,a._loop=!(!a._loop&&!i._sprite[t][2]);var c=a._node;if(i._webAudio){var f=function(){i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;c.gain.setValueAtTime(t,e.ctx.currentTime),a._playStart=e.ctx.currentTime,void 0===c.bufferSource.start?a._loop?c.bufferSource.noteGrainOn(0,u,86400):c.bufferSource.noteGrainOn(0,u,h):a._loop?c.bufferSource.start(0,u,86400):c.bufferSource.start(0,u,h),l!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),l)),n||setTimeout(function(){i._emit("play",a._id)},0)},d="running"===e.state;"loaded"===i._state&&d?f():(i.once(d?"load":"resume",f,d?a._id:null),i._clearTimer(a._id))}else{var p=function(){c.currentTime=u,c.muted=a._muted||i._muted||e._muted||c.muted,c.volume=a._volume*e.volume(),c.playbackRate=a._rate,setTimeout(function(){c.play(),l!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),l)),n||i._emit("play",a._id)},0)},m="loaded"===i._state&&(window&&window.ejecta||!c.readyState&&e._navigator.isCocoonJS);if(4===c.readyState||m)p();else{var g=function(){p(),c.removeEventListener(e._canPlayEvent,g,!1)};c.addEventListener(e._canPlayEvent,g,!1),i._clearTimer(a._id)}}return a._id},pause:function(t){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),i=0;i<n.length;i++){e._clearTimer(n[i]);var r=e._soundById(n[i]);if(r&&!r._paused&&(r._seek=e.seek(n[i]),r._rateSeek=0,r._paused=!0,e._stopFade(n[i]),r._node))if(e._webAudio){if(!r._node.bufferSource)return e;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var i=n._getSoundIds(t),r=0;r<i.length;r++){n._clearTimer(i[r]);var o=n._soundById(i[r]);if(o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(i[r]),o._node))if(n._webAudio){if(!o._node.bufferSource)return e||n._emit("stop",o._id),n;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause());o&&!e&&n._emit("stop",o._id)}return n},mute:function(t,n){var i=this;if("loaded"!==i._state)return i._queue.push({event:"mute",action:function(){i.mute(t,n)}}),i;if(void 0===n){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var r=i._getSoundIds(n),o=0;o<r.length;o++){var s=i._soundById(r[o]);s&&(s._muted=t,i._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,e.ctx.currentTime):s._node&&(s._node.muted=!!e._muted||t),i._emit("mute",s._id))}return i},volume:function(){var t,n,i=this,r=arguments;if(0===r.length)return i._volume;if(1===r.length||2===r.length&&void 0===r[1]){i._getSoundIds().indexOf(r[0])>=0?n=parseInt(r[0],10):t=parseFloat(r[0])}else r.length>=2&&(t=parseFloat(r[0]),n=parseInt(r[1],10));var o;if(!(void 0!==t&&t>=0&&t<=1))return o=n?i._soundById(n):i._sounds[0],o?o._volume:0;if("loaded"!==i._state)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,r)}}),i;void 0===n&&(i._volume=t),n=i._getSoundIds(n);for(var s=0;s<n.length;s++)(o=i._soundById(n[s]))&&(o._volume=t,r[2]||i._stopFade(n[s]),i._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(t,e.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=t*e.volume()),i._emit("volume",o._id));return i},fade:function(t,n,i,r){var o=this,s=Math.abs(t-n),a=t>n?"out":"in",u=s/.01,h=u>0?i/u:i;if(h<4&&(u=Math.ceil(u/(4/h)),h=4),"loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(t,n,i,r)}}),o;o.volume(t,r);for(var l=o._getSoundIds(r),c=0;c<l.length;c++){var f=o._soundById(l[c]);if(f){if(r||o._stopFade(l[c]),o._webAudio&&!f._muted){var d=e.ctx.currentTime,p=d+i/1e3;f._volume=t,f._node.gain.setValueAtTime(t,d),f._node.gain.linearRampToValueAtTime(n,p)}var m=t;f._interval=setInterval(function(t,e){u>0&&(m+="in"===a?.01:-.01),m=Math.max(0,m),m=Math.min(1,m),m=Math.round(100*m)/100,o._webAudio?(void 0===r&&(o._volume=m),e._volume=m):o.volume(m,t,!0),m===n&&(clearInterval(e._interval),e._interval=null,o.volume(m,t),o._emit("fade",t))}.bind(o,l[c],f),h)}}return o},_stopFade:function(t){var n=this,i=n._soundById(t);return i&&i._interval&&(n._webAudio&&i._node.gain.cancelScheduledValues(e.ctx.currentTime),clearInterval(i._interval),i._interval=null,n._emit("fade",t)),n},loop:function(){var t,e,n,i=this,r=arguments;if(0===r.length)return i._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=i._soundById(parseInt(r[0],10)))&&n._loop;t=r[0],i._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var o=i._getSoundIds(e),s=0;s<o.length;s++)(n=i._soundById(o[s]))&&(n._loop=t,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return i},rate:function(){var t,n,i=this,r=arguments;if(0===r.length)n=i._sounds[0]._id;else if(1===r.length){var o=i._getSoundIds(),s=o.indexOf(r[0]);s>=0?n=parseInt(r[0],10):t=parseFloat(r[0])}else 2===r.length&&(t=parseFloat(r[0]),n=parseInt(r[1],10));var a;if("number"!=typeof t)return a=i._soundById(n),a?a._rate:i._rate;if("loaded"!==i._state)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,r)}}),i;void 0===n&&(i._rate=t),n=i._getSoundIds(n);for(var u=0;u<n.length;u++)if(a=i._soundById(n[u])){a._rateSeek=i.seek(n[u]),a._playStart=i._webAudio?e.ctx.currentTime:a._playStart,a._rate=t,i._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.value=t:a._node&&(a._node.playbackRate=t);var h=i.seek(n[u]),l=(i._sprite[a._sprite][0]+i._sprite[a._sprite][1])/1e3-h,c=1e3*l/Math.abs(a._rate);!i._endTimers[n[u]]&&a._paused||(i._clearTimer(n[u]),i._endTimers[n[u]]=setTimeout(i._ended.bind(i,a),c)),i._emit("rate",a._id)}return i},seek:function(){var t,n,i=this,r=arguments;if(0===r.length)n=i._sounds[0]._id;else if(1===r.length){var o=i._getSoundIds(),s=o.indexOf(r[0]);s>=0?n=parseInt(r[0],10):(n=i._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),n=parseInt(r[1],10));if(void 0===n)return i;if("loaded"!==i._state)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,r)}}),i;var a=i._soundById(n);if(a){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var u=i.playing(n)?e.ctx.currentTime-a._playStart:0,h=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(h+u*Math.abs(a._rate))}return a._node.currentTime}var l=i.playing(n);l&&i.pause(n,!0),a._seek=t,a._ended=!1,i._clearTimer(n),l&&i.play(n,!0),!i._webAudio&&a._node&&(a._node.currentTime=t),i._emit("seek",n)}return i},playing:function(t){var e=this;if("number"==typeof t){var n=e._soundById(t);return!!n&&!n._paused}for(var i=0;i<e._sounds.length;i++)if(!e._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this,n=e._duration,i=e._soundById(t);return i&&(n=e._sprite[i._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var t=this,n=t._sounds,i=0;i<n.length;i++){n[i]._paused||(t.stop(n[i]._id),t._emit("end",n[i]._id)),t._webAudio||(n[i]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",n[i]._node.removeEventListener("error",n[i]._errorFn,!1),n[i]._node.removeEventListener(e._canPlayEvent,n[i]._loadFn,!1)),delete n[i]._node,t._clearTimer(n[i]._id);var o=e._howls.indexOf(t);o>=0&&e._howls.splice(o,1)}var s=!0;for(i=0;i<e._howls.length;i++)if(e._howls[i]._src===t._src){s=!1;break}return r&&s&&delete r[t._src],e.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,i){var r=this,o=r["_on"+t];return"function"==typeof e&&o.push(i?{id:n,fn:e,once:i}:{id:n,fn:e}),r},off:function(t,e,n){var i=this,r=i["_on"+t],o=0;if(e){for(o=0;o<r.length;o++)if(e===r[o].fn&&n===r[o].id){r.splice(o,1);break}}else if(t)i["_on"+t]=[];else{var s=Object.keys(i);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(i[s[o]])&&(i[s[o]]=[])}return i},once:function(t,e,n){var i=this;return i.on(t,e,n,1),i},_emit:function(t,e,n){for(var i=this,r=i["_on"+t],o=r.length-1;o>=0;o--)r[o].id&&r[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(i,r[o].fn),0),r[o].once&&i.off(t,r[o].fn,r[o].id));return i},_loadQueue:function(){var t=this;if(t._queue.length>0){var e=t._queue[0];t.once(e.event,function(){t._queue.shift(),t._loadQueue()}),e.action()}return t},_ended:function(t){var n=this,i=t._sprite,r=!(!t._loop&&!n._sprite[i][2]);if(n._emit("end",t._id),!n._webAudio&&r&&n.stop(t._id,!0).play(t._id),n._webAudio&&r){n._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=e.ctx.currentTime;var o=1e3*(t._stop-t._start)/Math.abs(t._rate);n._endTimers[t._id]=setTimeout(n._ended.bind(n,t),o)}return n._webAudio&&!r&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,n._clearTimer(t._id),n._cleanBuffer(t._node),e._autoSuspend()),n._webAudio||r||n.stop(t._id),n},_clearTimer:function(t){var e=this;return e._endTimers[t]&&(clearTimeout(e._endTimers[t]),delete e._endTimers[t]),e},_soundById:function(t){for(var e=this,n=0;n<e._sounds.length;n++)if(t===e._sounds[n]._id)return e._sounds[n];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new i(t)},_drain:function(){var t=this,e=t._pool,n=0,i=0;if(!(t._sounds.length<e)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&n++;for(i=t._sounds.length-1;i>=0;i--){if(n<=e)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),n--)}}},_getSoundIds:function(t){var e=this;if(void 0===t){for(var n=[],i=0;i<e._sounds.length;i++)n.push(e._sounds[i]._id);return n}return[t]},_refreshBuffer:function(t){var n=this;return t._node.bufferSource=e.ctx.createBufferSource(),t._node.bufferSource.buffer=r[n._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=t._rate,n},_cleanBuffer:function(t){var e=this;if(e._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=e._scratchBuffer}catch(t){}}return t.bufferSource=null,e}};var i=function(t){this._parent=t,this.init()};i.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=Math.round(Date.now()*Math.random()),e._sounds.push(t),t.create(),t},create:function(){var t=this,n=t._parent,i=e._muted||t._muted||t._parent._muted?0:t._volume;return n._webAudio?(t._node=void 0===e.ctx.createGain?e.ctx.createGainNode():e.ctx.createGain(),t._node.gain.setValueAtTime(i,e.ctx.currentTime),t._node.paused=!0,t._node.connect(e.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(e._canPlayEvent,t._loadFn,!1),t._node.src=n._src,t._node.preload="auto",t._node.volume=i*e.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=Math.round(Date.now()*Math.random()),t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorListener,!1)},_loadListener:function(){var t=this,n=t._parent;n._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),"loaded"!==n._state&&(n._state="loaded",n._emit("load"),n._loadQueue()),t._node.removeEventListener(e._canPlayEvent,t._loadFn,!1)}};var r={},o=function(t){var e=t._src;if(r[e])return t._duration=r[e].duration,void u(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),i=new Uint8Array(n.length),o=0;o<n.length;++o)i[o]=n.charCodeAt(o);a(i.buffer,t)}else{var h=new XMLHttpRequest;h.open("GET",e,!0),h.responseType="arraybuffer",h.onload=function(){var e=(h.status+"")[0];if("0"!==e&&"2"!==e&&"3"!==e)return void t._emit("loaderror",null,"Failed loading audio file with status: "+h.status+".");a(h.response,t)},h.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete r[e],t.load())},s(h)}},s=function(t){try{t.send()}catch(e){t.onerror()}},a=function(t,n){e.ctx.decodeAudioData(t,function(t){t&&n._sounds.length>0&&(r[n._src]=t,u(n,t))},function(){n._emit("loaderror",null,"Decoding audio data failed.")})},u=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},h=function(){try{"undefined"!=typeof AudioContext?e.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?e.ctx=new webkitAudioContext:e.usingWebAudio=!1}catch(t){e.usingWebAudio=!1}var t=/iP(hone|od|ad)/.test(e._navigator&&e._navigator.platform),n=e._navigator&&e._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=n?parseInt(n[1],10):null;if(t&&i&&i<9){var r=/safari/.test(e._navigator&&e._navigator.userAgent.toLowerCase());(e._navigator&&e._navigator.standalone&&!r||e._navigator&&!e._navigator.standalone&&!r)&&(e.usingWebAudio=!1)}e.usingWebAudio&&(e.masterGain=void 0===e.ctx.createGain?e.ctx.createGainNode():e.ctx.createGain(),e.masterGain.gain.value=1,e.masterGain.connect(e.ctx.destination)),e._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:e,Howl:n}}),void 0!==exports&&(exports.Howler=e,exports.Howl=n),"undefined"!=typeof window?(window.HowlerGlobal=t,window.Howler=e,window.Howl=n,window.Sound=i):void 0!==global&&(global.HowlerGlobal=t,global.Howler=e,global.Howl=n,global.Sound=i)}(),function(){me.plugins={},me.plugin=function(){var t={};return t.Base=me.Object.extend({init:function(){this.version="4.1.1"}}),t.patch=function(t,e,n){if(void 0!==t.prototype&&(t=t.prototype),"function"==typeof t[e]){var i=t[e];Object.defineProperty(t,e,{configurable:!0,value:function(t,e){return function(){this._patched=i;var t=e.apply(this,arguments);return this._patched=null,t}}(0,n)})}else console.error(e+" is not an existing function")},t.register=function(t,e){me.plugin[e]&&console.error("plugin "+e+" already registered");var n=[];arguments.length>2&&(n=Array.prototype.slice.call(arguments,1)),n[0]=t;var i=new(t.bind.apply(t,n));if(!(i&&i instanceof me.plugin.Base))throw new me.Error("Plugin should extend the me.plugin.Base Class !");if(me.sys.checkVersion(i.version)>0)throw new me.Error("Plugin version mismatch, expected: "+i.version+", got: "+me.version);me.plugins[e]=i},t}()}(),me.DraggableEntity=function(t,e,n,i){"use strict";return t.extend({init:function(n,r,o){t.prototype.init.apply(this,[n,r,o]),this.dragging=!1,this.dragId=null,this.grabOffset=new i(0,0),this.onPointerEvent=e.registerPointerEvent,this.removePointerEvent=e.releasePointerEvent,this.initEvents()},initEvents:function(){var t=this;this.mouseDown=function(t){this.translatePointerEvent(t,n.DRAGSTART)},this.mouseUp=function(t){this.translatePointerEvent(t,n.DRAGEND)},this.onPointerEvent("pointerdown",this,this.mouseDown.bind(this)),this.onPointerEvent("pointerup",this,this.mouseUp.bind(this)),n.subscribe(n.POINTERMOVE,this.dragMove.bind(this)),n.subscribe(n.DRAGSTART,function(e,n){n===t&&t.dragStart(e)}),n.subscribe(n.DRAGEND,function(e,n){n===t&&t.dragEnd(e)})},translatePointerEvent:function(t,e){n.publish(e,[t,this])},dragStart:function(t){if(!1===this.dragging)return this.dragging=!0,this.dragId=t.pointerId,this.grabOffset.set(t.gameX,t.gameY),this.grabOffset.sub(this.pos),!1},dragMove:function(t){!0===this.dragging&&this.dragId===t.pointerId&&(this.pos.set(t.gameX,t.gameY,this.pos.z),this.pos.sub(this.grabOffset))},dragEnd:function(){if(!0===this.dragging)return this.pointerId=void 0,this.dragging=!1,!1},destroy:function(){n.unsubscribe(n.POINTERMOVE,this.dragMove),n.unsubscribe(n.DRAGSTART,this.dragStart),n.unsubscribe(n.DRAGEND,this.dragEnd),this.removePointerEvent("pointerdown",this),this.removePointerEvent("pointerup",this)}})}(me.Entity,me.input,me.event,me.Vector2d),me.DroptargetEntity=function(t,e){"use strict";return t.extend({init:function(n,i,r){this.CHECKMETHOD_OVERLAP="overlaps",this.CHECKMETHOD_CONTAINS="contains",this.checkMethod=null,t.prototype.init.apply(this,[n,i,r]),e.subscribe(e.DRAGEND,this.checkOnMe.bind(this)),this.checkMethod=this[this.CHECKMETHOD_OVERLAP]},setCheckMethod:function(t){void 0!==this[t]&&(this.checkMethod=this[t])},checkOnMe:function(t,e){e&&this.checkMethod(e.getBounds())&&this.drop(e)},drop:function(){},destroy:function(){e.unsubscribe(e.DRAGEND,this.checkOnMe)}})}(me.Entity,me.event),function(){me.CollectableEntity=me.Entity.extend({init:function(t,e,n){me.Entity.prototype.init.apply(this,[t,e,n]),this.body.collisionType=me.collision.types.COLLECTABLE_OBJECT}})}(),function(){me.LevelEntity=me.Entity.extend({init:function(t,e,n){me.Entity.prototype.init.apply(this,[t,e,n]),this.nextlevel=n.to,this.fade=n.fade,this.duration=n.duration,this.fading=!1,this.name="levelEntity",this.gotolevel=n.to,this.loadLevelSettings={},["container","onLoaded","flatten","setViewportBounds"].forEach(function(t){void 0!==n[t]&&(this.loadLevelSettings[t]=n[t])}.bind(this)),this.body.collisionType=me.collision.types.ACTION_OBJECT},getlevelSettings:function(){return"string"==typeof this.loadLevelSettings.container&&(this.loadLevelSettings.container=me.game.world.getChildByName(this.loadLevelSettings.container)[0]),this.loadLevelSettings},onFadeComplete:function(){me.levelDirector.loadLevel(this.gotolevel,this.getlevelSettings()),me.game.viewport.fadeOut(this.fade,this.duration)},goTo:function(t){this.gotolevel=t||this.nextlevel,this.fade&&this.duration?this.fading||(this.fading=!0,me.game.viewport.fadeIn(this.fade,this.duration,this.onFadeComplete.bind(this))):me.levelDirector.loadLevel(this.gotolevel,this.getlevelSettings())},onCollision:function(){return"levelEntity"===this.name&&this.goTo.apply(this),!1}})}(),function(){var t=function(){var t=me.video.createCanvas(1,1),e=t.getContext("2d");return e.fillStyle="#fff",e.fillRect(0,0,1,1),t}();me.ParticleEmitterSettings={width:0,height:0,image:t,totalParticles:50,angle:Math.PI/2,angleVariation:0,minLife:1e3,maxLife:3e3,speed:2,speedVariation:1,minRotation:0,maxRotation:0,minStartScale:1,maxStartScale:1,minEndScale:0,maxEndScale:0,gravity:0,wind:0,followTrajectory:!1,textureAdditive:!1,onlyInViewport:!0,floating:!1,maxParticles:10,frequency:100,duration:1/0,framesToSkip:0},me.ParticleEmitter=me.Rect.extend({init:function(t,e,n){this._stream=!1,this._frequencyTimer=0,this._durationTimer=0,this._enabled=!1,this.isRenderable=!1,me.Rect.prototype.init.apply(this,[t,e,1/0,1/0]),this.autoSort=!1,this.container=new me.ParticleContainer(this),Object.defineProperty(this.pos,"z",{get:function(){return this.container.pos.z}.bind(this),set:function(t){this.container.pos.z=t}.bind(this),enumerable:!0,configurable:!0}),Object.defineProperty(this,"floating",{get:function(){return this.container.floating},set:function(t){this.container.floating=t},enumerable:!0,configurable:!0}),this.reset(n)},onActivateEvent:function(){this.ancestor.addChild(this.container),this.container.pos.z=this.pos.z,this.ancestor.autoSort||this.ancestor.sort()},onDeactivateEvent:function(){this.ancestor.hasChild(this.container)&&this.ancestor.removeChildNow(this.container)},destroy:function(){this.reset()},getRandomPointX:function(){return this.pos.x+(0).randomFloat(this.width)},getRandomPointY:function(){return this.pos.y+(0).randomFloat(this.height)},reset:function(t){t=t||{};var e=me.ParticleEmitterSettings,n="number"==typeof t.width?t.width:e.width,i="number"==typeof t.height?t.height:e.height;this.resize(n,i),Object.assign(this,e,t),this.container.destroy()},addParticles:function(t){for(var e=0;e<~~t;e++){var n=me.pool.pull("me.Particle",this);this.container.addChild(n)}},isRunning:function(){return this._enabled&&this._stream},streamParticles:function(t){this._enabled=!0,this._stream=!0,this.frequency=Math.max(this.frequency,1),this._durationTimer="number"==typeof t?t:this.duration},stopStream:function(){this._enabled=!1},burstParticles:function(t){this._enabled=!0,this._stream=!1,this.addParticles("number"==typeof t?t:this.totalParticles),this._enabled=!1},update:function(t){if(this._enabled&&this._stream){if(this._durationTimer!==1/0&&(this._durationTimer-=t,this._durationTimer<=0))return this.stopStream(),!1;this._frequencyTimer+=t;var e=this.container.children.length;e<this.totalParticles&&this._frequencyTimer>=this.frequency&&(e+this.maxParticles<=this.totalParticles?this.addParticles(this.maxParticles):this.addParticles(this.totalParticles-e),this._frequencyTimer=0)}return!0}})}(),function(){me.ParticleContainer=me.Container.extend({init:function(t){this._viewport=me.game.viewport,me.Container.prototype.init.apply(this),this.autoSort=!1,this._updateCount=0,this._dt=0,this._emitter=t},getBounds:function(){return this._viewport},update:function(t){if(++this._updateCount>this._emitter.framesToSkip&&(this._updateCount=0),this._updateCount>0)return this._dt+=t,!1;t+=this._dt,this._dt=0;for(var e=me.game.viewport,n=this.children.length-1;n>=0;--n){var i=this.children[n];i.isRenderable=!0,i.inViewport=this.floating||i.pos.x<e.pos.x+e.width&&e.pos.x<i.pos.x+i.width&&i.pos.y<e.pos.y+e.height&&e.pos.y<i.pos.y+i.height,i.update(t)||this.removeChildNow(i)}return!0},draw:function(t,e){if(this.children.length>0){var n,i=t.getContext();this._emitter.textureAdditive&&(n=i.globalCompositeOperation,i.globalCompositeOperation="lighter"),me.Container.prototype.draw.apply(this,[t,e]),this._emitter.textureAdditive&&(i.globalCompositeOperation=n)}}})}(),function(){me.Particle=me.Renderable.extend({init:function(t){me.Renderable.prototype.init.apply(this,[t.getRandomPointX(),t.getRandomPointY(),t.image.width,t.image.height]),this.alwaysUpdate=!0,this.isRenderable=!1,this.image=t.image;var e=t.angle+(t.angleVariation>0?((0).randomFloat(2)-1)*t.angleVariation:0),n=t.speed+(t.speedVariation>0?((0).randomFloat(2)-1)*t.speedVariation:0);this.vel=new me.Vector2d(n*Math.cos(e),-n*Math.sin(e)),this.life=t.minLife.randomFloat(t.maxLife),this.startLife=this.life,this.startScale=t.minStartScale.randomFloat(t.maxStartScale).clamp(t.minStartScale,t.maxStartScale),this.endScale=t.minEndScale.randomFloat(t.maxEndScale).clamp(t.minEndScale,t.maxEndScale),this.gravity=t.gravity,this.wind=t.wind,this.followTrajectory=t.followTrajectory,this.onlyInViewport=t.onlyInViewport,this.pos.z=t.z,this._deltaInv=me.sys.fps/1e3,t.followTrajectory||(this.angle=t.minRotation.randomFloat(t.maxRotation))},update:function(t){var e=t*this._deltaInv;this.life=this.life>t?this.life-t:0;var n=this.life/this.startLife,i=this.startScale;this.startScale>this.endScale?(i*=n,i=i<this.endScale?this.endScale:i):this.startScale<this.endScale&&(i/=n,i=i>this.endScale?this.endScale:i),this.alpha=n,this.vel.x+=this.wind*e,this.vel.y+=this.gravity*e;var r=this.followTrajectory?Math.atan2(this.vel.y,this.vel.x):this.angle;return this.pos.x+=this.vel.x*e,this.pos.y+=this.vel.y*e,this.currentTransform.setTransform(i,0,0,0,i,0,this.pos.x,this.pos.y,1).rotate(r),(this.inViewport||!this.onlyInViewport)&&this.life>0},draw:function(t){t.save(),t.setGlobalAlpha(t.globalAlpha()*this.alpha),t.transform(this.currentTransform);var e=this.width,n=this.height;t.drawImage(this.image,0,0,e,n,-e/2,-n/2,e,n),t.restore()}})}(window),__webpack_shim__define__module__export__("undefined"!=typeof me?me:global.me)}).call(global,void 0,void 0,void 0,void 0,function(t){module.exports=t})}).call(exports,__webpack_require__(2),__webpack_require__(12))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debug:!0,wrapper:"game",video:{fps:32,tile_size:32,renderer:"CANVAS",scale:1,preset:"GBC_2x",presets:{GBC:{width:160,height:144},GBC_2x:{width:320,height:288},GBA:{width:240,height:160},GBA_2x:{width:480,height:320},NDS:{width:256,height:192},NDS_2x:{width:512,height:384},"3DS":{width:400,height:240},"3DS_2x":{width:800,height:480},SWITCH:{width:1280,height:720}}},sound:{enabled:!0,volume:{music:40,effects:80}},player:{velocity_factor:1,allow_diagonal:!1},initial_scene:"S01_NewBarkTown"}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){(function(t,n,i,r,o){!function(t,e){"function"==typeof r&&r.amd?r(function(){return e(t)}):e(t)}(this,function(t){var e=function(){function e(t){return null==t?String(t):$[Z.call(t)]||"object"}function n(t){return"function"==e(t)}function i(t){return null!=t&&t==t.window}function r(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function o(t){return"object"==e(t)}function s(t){return o(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){var e=!!t&&"length"in t&&t.length,n=A.type(t);return"function"!=n&&!i(t)&&("array"==n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function u(t){return M.call(t,function(t){return null!=t})}function h(t){return t.length>0?A.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(t){return t in L?L[t]:L[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||D[l(t)]?e:e+"px"}function d(t){var e,n;return I[t]||(e=B.createElement(t),B.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),I[t]=n),I[t]}function p(t){return"children"in t?k.call(t.children):A.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function m(t,e){var n,i=t?t.length:0;for(n=0;n<i;n++)this[n]=t[n];this.length=i,this.selector=e||""}function g(t,e,n){for(E in e)n&&(s(e[E])||tt(e[E]))?(s(e[E])&&!s(t[E])&&(t[E]={}),tt(e[E])&&!tt(t[E])&&(t[E]=[]),g(t[E],e[E],n)):e[E]!==T&&(t[E]=e[E])}function v(t,e){return null==e?A(t):A(t).filter(e)}function y(t,e,i,r){return n(e)?e.call(t,i,r):e}function _(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function w(t,e){var n=t.className||"",i=n&&n.baseVal!==T;if(e===T)return i?n.baseVal:n;i?n.baseVal=e:t.className=e}function b(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?A.parseJSON(t):t):t}catch(e){return t}}function x(t,e){e(t);for(var n=0,i=t.childNodes.length;n<i;n++)x(t.childNodes[n],e)}var T,E,A,S,P,C,O=[],R=O.concat,M=O.filter,k=O.slice,B=t.document,I={},L={},D={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},j=/^\s*<(\w+|!)[^>]*>/,z=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,V=/([A-Z])/g,U=["val","css","html","text","data","width","height","offset"],G=["after","prepend","before","append"],X=B.createElement("table"),H=B.createElement("tr"),W={tr:B.createElement("tbody"),tbody:X,thead:X,tfoot:X,td:H,th:H,"*":B.createElement("div")},q=/complete|loaded|interactive/,Y=/^[\w-]*$/,$={},Z=$.toString,K={},J=B.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},tt=Array.isArray||function(t){return t instanceof Array};return K.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=J).appendChild(t),i=~K.qsa(r,e).indexOf(t),o&&J.removeChild(t),i},P=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},C=function(t){return M.call(t,function(e,n){return t.indexOf(e)==n})},K.fragment=function(t,e,n){var i,r,o;return z.test(t)&&(i=A(B.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(N,"<$1></$2>")),e===T&&(e=j.test(t)&&RegExp.$1),e in W||(e="*"),o=W[e],o.innerHTML=""+t,i=A.each(k.call(o.childNodes),function(){o.removeChild(this)})),s(n)&&(r=A(i),A.each(n,function(t,e){U.indexOf(t)>-1?r[t](e):r.attr(t,e)})),i},K.Z=function(t,e){return new m(t,e)},K.isZ=function(t){return t instanceof K.Z},K.init=function(t,e){var i;if(!t)return K.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&j.test(t))i=K.fragment(t,RegExp.$1,e),t=null;else{if(e!==T)return A(e).find(t);i=K.qsa(B,t)}else{if(n(t))return A(B).ready(t);if(K.isZ(t))return t;if(tt(t))i=u(t);else if(o(t))i=[t],t=null;else if(j.test(t))i=K.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==T)return A(e).find(t);i=K.qsa(B,t)}}return K.Z(i,t)},A=function(t,e){return K.init(t,e)},A.extend=function(t){var e,n=k.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){g(t,n,e)}),t},K.qsa=function(t,e){var n,i="#"==e[0],r=!i&&"."==e[0],o=i||r?e.slice(1):e,s=Y.test(o);return t.getElementById&&s&&i?(n=t.getElementById(o))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:k.call(s&&!i&&t.getElementsByClassName?r?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},A.contains=B.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},A.type=e,A.isFunction=n,A.isWindow=i,A.isArray=tt,A.isPlainObject=s,A.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},A.isNumeric=function(t){var e=Number(t),n=typeof t;return null!=t&&"boolean"!=n&&("string"!=n||t.length)&&!isNaN(e)&&isFinite(e)||!1},A.inArray=function(t,e,n){return O.indexOf.call(e,t,n)},A.camelCase=P,A.trim=function(t){return null==t?"":String.prototype.trim.call(t)},A.uuid=0,A.support={},A.expr={},A.noop=function(){},A.map=function(t,e){var n,i,r,o=[];if(a(t))for(i=0;i<t.length;i++)null!=(n=e(t[i],i))&&o.push(n);else for(r in t)null!=(n=e(t[r],r))&&o.push(n);return h(o)},A.each=function(t,e){var n,i;if(a(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(i in t)if(!1===e.call(t[i],i,t[i]))return t;return t},A.grep=function(t,e){return M.call(t,e)},t.JSON&&(A.parseJSON=JSON.parse),A.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){$["[object "+e+"]"]=e.toLowerCase()}),A.fn={constructor:K.Z,length:0,forEach:O.forEach,reduce:O.reduce,push:O.push,sort:O.sort,splice:O.splice,indexOf:O.indexOf,concat:function(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],n[t]=K.isZ(e)?e.toArray():e;return R.apply(K.isZ(this)?this.toArray():this,n)},map:function(t){return A(A.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return A(k.apply(this,arguments))},ready:function(t){return q.test(B.readyState)&&B.body?t(A):B.addEventListener("DOMContentLoaded",function(){t(A)},!1),this},get:function(t){return t===T?k.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return O.every.call(this,function(e,n){return!1!==t.call(e,n,e)}),this},filter:function(t){return n(t)?this.not(this.not(t)):A(M.call(this,function(e){return K.matches(e,t)}))},add:function(t,e){return A(C(this.concat(A(t,e))))},is:function(t){return this.length>0&&K.matches(this[0],t)},not:function(t){var e=[];if(n(t)&&t.call!==T)this.each(function(n){t.call(this,n)||e.push(this)});else{var i="string"==typeof t?this.filter(t):a(t)&&n(t.item)?k.call(t):A(t);this.forEach(function(t){i.indexOf(t)<0&&e.push(t)})}return A(e)},has:function(t){return this.filter(function(){return o(t)?A.contains(this,t):A(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!o(t)?t:A(t)},last:function(){var t=this[this.length-1];return t&&!o(t)?t:A(t)},find:function(t){var e=this;return t?"object"==typeof t?A(t).filter(function(){var t=this;return O.some.call(e,function(e){return A.contains(e,t)})}):1==this.length?A(K.qsa(this[0],t)):this.map(function(){return K.qsa(this,t)}):A()},closest:function(t,e){var n=[],i="object"==typeof t&&A(t);return this.each(function(o,s){for(;s&&!(i?i.indexOf(s)>=0:K.matches(s,t));)s=s!==e&&!r(s)&&s.parentNode;s&&n.indexOf(s)<0&&n.push(s)}),A(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=A.map(n,function(t){if((t=t.parentNode)&&!r(t)&&e.indexOf(t)<0)return e.push(t),t});return v(e,t)},parent:function(t){return v(C(this.pluck("parentNode")),t)},children:function(t){return v(this.map(function(){return p(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||k.call(this.childNodes)})},siblings:function(t){return v(this.map(function(t,e){return M.call(p(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return A.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=n(t);if(this[0]&&!e)var i=A(t).get(0),r=i.parentNode||this.length>1;return this.each(function(n){A(this).wrapAll(e?t.call(this,n):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){A(this[0]).before(t=A(t));for(var e;(e=t.children()).length;)t=e.first();A(t).append(this)}return this},wrapInner:function(t){var e=n(t);return this.each(function(n){var i=A(this),r=i.contents(),o=e?t.call(this,n):t;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){A(this).replaceWith(A(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=A(this);(t===T?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return A(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return A(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;A(this).empty().append(y(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=y(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(o(t))for(E in t)_(this,E,t[E]);else _(this,t,y(this,e,n,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(n=this[0].getAttribute(t))?n:T},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){_(this,t)},this)})},prop:function(t,e){return t=Q[t]||t,1 in arguments?this.each(function(n){this[t]=y(this,e,n,this[t])}):this[0]&&this[0][t]},removeProp:function(t){return t=Q[t]||t,this.each(function(){delete this[t]})},data:function(t,e){var n="data-"+t.replace(V,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,e):this.attr(n);return null!==i?b(i):T},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=y(this,t,e,this.value)})):this[0]&&(this[0].multiple?A(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=A(this),i=y(this,e,t,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;if(B.documentElement!==this[0]&&!A.contains(B.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+t.pageXOffset,top:n.top+t.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(t,n){if(arguments.length<2){var i=this[0];if("string"==typeof t){if(!i)return;return i.style[P(t)]||getComputedStyle(i,"").getPropertyValue(t)}if(tt(t)){if(!i)return;var r={},o=getComputedStyle(i,"");return A.each(t,function(t,e){r[e]=i.style[P(e)]||o.getPropertyValue(e)}),r}}var s="";if("string"==e(t))n||0===n?s=l(t)+":"+f(t,n):this.each(function(){this.style.removeProperty(l(t))});else for(E in t)t[E]||0===t[E]?s+=l(E)+":"+f(E,t[E])+";":this.each(function(){this.style.removeProperty(l(E))});return this.each(function(){this.style.cssText+=";"+s})},index:function(t){return t?this.indexOf(A(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&O.some.call(this,function(t){return this.test(w(t))},c(t))},addClass:function(t){return t?this.each(function(e){if("className"in this){S=[];var n=w(this);y(this,t,e,n).split(/\s+/g).forEach(function(t){A(this).hasClass(t)||S.push(t)},this),S.length&&w(this,n+(n?" ":"")+S.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===T)return w(this,"");S=w(this),y(this,t,e,S).split(/\s+/g).forEach(function(t){S=S.replace(c(t)," ")}),w(this,S.trim())}})},toggleClass:function(t,e){return t?this.each(function(n){var i=A(this);y(this,t,n,w(this)).split(/\s+/g).forEach(function(t){(e===T?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===T?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===T?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=F.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(A(t).css("margin-top"))||0,n.left-=parseFloat(A(t).css("margin-left"))||0,i.top+=parseFloat(A(e[0]).css("border-top-width"))||0,i.left+=parseFloat(A(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||B.body;t&&!F.test(t.nodeName)&&"static"==A(t).css("position");)t=t.offsetParent;return t})}},A.fn.detach=A.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});A.fn[t]=function(n){var o,s=this[0];return n===T?i(s)?s["inner"+e]:r(s)?s.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){s=A(this),s.css(t,y(this,n,e,s[t]()))})}}),G.forEach(function(n,i){var r=i%2;A.fn[n]=function(){var n,o,s=A.map(arguments,function(t){var i=[];return n=e(t),"array"==n?(t.forEach(function(t){return t.nodeType!==T?i.push(t):A.zepto.isZ(t)?i=i.concat(t.get()):void(i=i.concat(K.fragment(t)))}),i):"object"==n||null==t?t:K.fragment(t)}),a=this.length>1;return s.length<1?this:this.each(function(e,n){o=r?n:n.parentNode,n=0==i?n.nextSibling:1==i?n.firstChild:2==i?n:null;var u=A.contains(B.documentElement,o);s.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!o)return A(e).remove();o.insertBefore(e,n),u&&x(e,function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var n=e.ownerDocument?e.ownerDocument.defaultView:t;n.eval.call(n,e.innerHTML)}})})})},A.fn[r?n+"To":"insert"+(i?"Before":"After")]=function(t){return A(t)[n](this),this}}),K.Z.prototype=m.prototype=A.fn,K.uniq=C,K.deserializeValue=b,A.zepto=K,A}();return t.Zepto=e,void 0===t.$&&(t.$=e),function(e){function n(t){return t._zid||(t._zid=d++)}function i(t,e,i,s){if(e=r(e),e.ns)var a=o(e.ns);return(v[n(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||a.test(t.ns))&&(!i||n(t.fn)===n(i))&&(!s||t.sel==s)})}function r(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function o(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function s(t,e){return t.del&&!_&&t.e in w||!!e}function a(t){return b[t]||_&&w[t]||t}function u(t,i,o,u,h,c,d){var p=n(t),m=v[p]||(v[p]=[]);i.split(/\s/).forEach(function(n){if("ready"==n)return e(document).ready(o);var i=r(n);i.fn=o,i.sel=h,i.e in b&&(o=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return i.fn.apply(this,arguments)}),i.del=c;var p=c||o;i.proxy=function(e){if(e=l(e),!e.isImmediatePropagationStopped()){e.data=u;var n=p.apply(t,e._args==f?[e]:[e].concat(e._args));return!1===n&&(e.preventDefault(),e.stopPropagation()),n}},i.i=m.length,m.push(i),"addEventListener"in t&&t.addEventListener(a(i.e),i.proxy,s(i,d))})}function h(t,e,r,o,u){var h=n(t);(e||"").split(/\s/).forEach(function(e){i(t,e,r,o).forEach(function(e){delete v[h][e.i],"removeEventListener"in t&&t.removeEventListener(a(e.e),e.proxy,s(e,u))})})}function l(t,n){return!n&&t.isDefaultPrevented||(n||(n=t),e.each(A,function(e,i){var r=n[e];t[e]=function(){return this[i]=x,r&&r.apply(n,arguments)},t[i]=T}),t.timeStamp||(t.timeStamp=Date.now()),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=x)),t}function c(t){var e,n={originalEvent:t};for(e in t)E.test(e)||t[e]===f||(n[e]=t[e]);return l(n,t)}var f,d=1,p=Array.prototype.slice,m=e.isFunction,g=function(t){return"string"==typeof t},v={},y={},_="onfocusin"in t,w={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};y.click=y.mousedown=y.mouseup=y.mousemove="MouseEvents",e.event={add:u,remove:h},e.proxy=function(t,i){var r=2 in arguments&&p.call(arguments,2);if(m(t)){var o=function(){return t.apply(i,r?r.concat(p.call(arguments)):arguments)};return o._zid=n(t),o}if(g(i))return r?(r.unshift(t[i],t),e.proxy.apply(null,r)):e.proxy(t[i],t);throw new TypeError("expected function")},e.fn.bind=function(t,e,n){return this.on(t,e,n)},e.fn.unbind=function(t,e){return this.off(t,e)},e.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var x=function(){return!0},T=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,A={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,e,n){return this.on(e,t,n)},e.fn.undelegate=function(t,e,n){return this.off(e,t,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i,r,o){var s,a,l=this;return t&&!g(t)?(e.each(t,function(t,e){l.on(t,n,i,e,o)}),l):(g(n)||m(r)||!1===r||(r=i,i=n,n=f),r!==f&&!1!==i||(r=i,i=f),!1===r&&(r=T),l.each(function(l,f){o&&(s=function(t){return h(f,t.type,r),r.apply(this,arguments)}),n&&(a=function(t){var i,o=e(t.target).closest(n,f).get(0);if(o&&o!==f)return i=e.extend(c(t),{currentTarget:o,liveFired:f}),(s||r).apply(o,[i].concat(p.call(arguments,1)))}),u(f,t,r,i,n,a||s)}))},e.fn.off=function(t,n,i){var r=this;return t&&!g(t)?(e.each(t,function(t,e){r.off(t,n,e)}),r):(g(n)||m(i)||!1===i||(i=n,n=f),!1===i&&(i=T),r.each(function(){h(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=g(t)||e.isPlainObject(t)?e.Event(t):l(t),t._args=n,this.each(function(){t.type in w&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,o;return this.each(function(s,a){r=c(g(t)?e.Event(t):t),r._args=n,r.target=a,e.each(i(a,t.type||t),function(t,e){if(o=e.proxy(r),r.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(t,e){g(t)||(e=t,t=e.type);var n=document.createEvent(y[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),l(n)}}(e),function(e){function n(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}function i(t,e,i,r){if(t.global)return n(e||w,i,r)}function r(t){t.global&&0==e.active++&&i(t,null,"ajaxStart")}function o(t){t.global&&!--e.active&&i(t,null,"ajaxStop")}function s(t,e){var n=e.context;if(!1===e.beforeSend.call(n,t,e)||!1===i(e,n,"ajaxBeforeSend",[t,e]))return!1;i(e,n,"ajaxSend",[t,e])}function a(t,e,n,r){var o=n.context;n.success.call(o,t,"success",e),r&&r.resolveWith(o,[t,"success",e]),i(n,o,"ajaxSuccess",[e,n,t]),h("success",e,n)}function u(t,e,n,r,o){var s=r.context;r.error.call(s,n,e,t),o&&o.rejectWith(s,[n,e,t]),i(r,s,"ajaxError",[n,r,t||e]),h(e,n,r)}function h(t,e,n){var r=n.context;n.complete.call(r,e,t),i(n,r,"ajaxComplete",[e,n]),o(n)}function l(t,e,n){if(n.dataFilter==c)return t;var i=n.context;return n.dataFilter.call(i,t,e)}function c(){}function f(t){return t&&(t=t.split(";",2)[0]),t&&(t==A?"html":t==E?"json":x.test(t)?"script":T.test(t)&&"xml")||"text"}function d(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function p(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=d(t.url,t.data),t.data=void 0)}function m(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}function g(t,n,i,r){var o,s=e.isArray(n),a=e.isPlainObject(n);e.each(n,function(n,u){o=e.type(u),r&&(n=i?r:r+"["+(a||"object"==o||"array"==o?n:"")+"]"),!r&&s?t.add(u.name,u.value):"array"==o||!i&&"object"==o?g(t,u,i,n):t.add(n,u)})}var v,y,_=+new Date,w=t.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,T=/^(?:text|application)\/xml/i,E="application/json",A="text/html",S=/^\s*$/,P=w.createElement("a");P.href=t.location.href,e.active=0,e.ajaxJSONP=function(n,i){if(!("type"in n))return e.ajax(n);var r,o,h=n.jsonpCallback,l=(e.isFunction(h)?h():h)||"Zepto"+_++,c=w.createElement("script"),f=t[l],d=function(t){e(c).triggerHandler("error",t||"abort")},p={abort:d};return i&&i.promise(p),e(c).on("load error",function(s,h){clearTimeout(o),e(c).off().remove(),"error"!=s.type&&r?a(r[0],p,n,i):u(null,h||"error",p,n,i),t[l]=f,r&&e.isFunction(f)&&f(r[0]),f=r=void 0}),!1===s(p,n)?(d("abort"),p):(t[l]=function(){r=arguments},c.src=n.url.replace(/\?(.+)=\?/,"?$1="+l),w.head.appendChild(c),n.timeout>0&&(o=setTimeout(function(){d("timeout")},n.timeout)),p)},e.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new t.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:E,xml:"application/xml, text/xml",html:A,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:c},e.ajax=function(n){var i,o,h=e.extend({},n||{}),m=e.Deferred&&e.Deferred();for(v in e.ajaxSettings)void 0===h[v]&&(h[v]=e.ajaxSettings[v]);r(h),h.crossDomain||(i=w.createElement("a"),i.href=h.url,i.href=i.href,h.crossDomain=P.protocol+"//"+P.host!=i.protocol+"//"+i.host),h.url||(h.url=t.location.toString()),(o=h.url.indexOf("#"))>-1&&(h.url=h.url.slice(0,o)),p(h);var g=h.dataType,_=/\?.+=\?/.test(h.url);if(_&&(g="jsonp"),!1!==h.cache&&(n&&!0===n.cache||"script"!=g&&"jsonp"!=g)||(h.url=d(h.url,"_="+Date.now())),"jsonp"==g)return _||(h.url=d(h.url,h.jsonp?h.jsonp+"=?":!1===h.jsonp?"":"callback=?")),e.ajaxJSONP(h,m);var b,x=h.accepts[g],T={},E=function(t,e){T[t.toLowerCase()]=[t,e]},A=/^([\w-]+:)\/\//.test(h.url)?RegExp.$1:t.location.protocol,C=h.xhr(),O=C.setRequestHeader;if(m&&m.promise(C),h.crossDomain||E("X-Requested-With","XMLHttpRequest"),E("Accept",x||"*/*"),(x=h.mimeType||x)&&(x.indexOf(",")>-1&&(x=x.split(",",2)[0]),C.overrideMimeType&&C.overrideMimeType(x)),(h.contentType||!1!==h.contentType&&h.data&&"GET"!=h.type.toUpperCase())&&E("Content-Type",h.contentType||"application/x-www-form-urlencoded"),h.headers)for(y in h.headers)E(y,h.headers[y]);if(C.setRequestHeader=E,C.onreadystatechange=function(){if(4==C.readyState){C.onreadystatechange=c,clearTimeout(b);var t,n=!1;if(C.status>=200&&C.status<300||304==C.status||0==C.status&&"file:"==A){if(g=g||f(h.mimeType||C.getResponseHeader("content-type")),"arraybuffer"==C.responseType||"blob"==C.responseType)t=C.response;else{t=C.responseText;try{t=l(t,g,h),"script"==g?(0,eval)(t):"xml"==g?t=C.responseXML:"json"==g&&(t=S.test(t)?null:e.parseJSON(t))}catch(t){n=t}if(n)return u(n,"parsererror",C,h,m)}a(t,C,h,m)}else u(C.statusText||null,C.status?"error":"abort",C,h,m)}},!1===s(C,h))return C.abort(),u(null,"abort",C,h,m),C;var R=!("async"in h)||h.async;if(C.open(h.type,h.url,R,h.username,h.password),h.xhrFields)for(y in h.xhrFields)C[y]=h.xhrFields[y];for(y in T)O.apply(C,T[y]);return h.timeout>0&&(b=setTimeout(function(){C.onreadystatechange=c,C.abort(),u(null,"timeout",C,h,m)},h.timeout)),C.send(h.data?h.data:null),C},e.get=function(){return e.ajax(m.apply(null,arguments))},e.post=function(){var t=m.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=m.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,o=this,s=t.split(/\s/),a=m(t,n,i),u=a.success;return s.length>1&&(a.url=s[0],r=s[1]),a.success=function(t){o.html(r?e("<div>").html(t.replace(b,"")).find(r):t),u&&u.apply(o,arguments)},e.ajax(a),this};var C=encodeURIComponent;e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(C(t)+"="+C(n))},g(i,t,n),i.join("&").replace(/%20/g,"+")}}(e),function(t){t.fn.serializeArray=function(){var e,n,i=[],r=function(t){if(t.forEach)return t.forEach(r);i.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(i,o){n=o.type,e=o.name,e&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&r(t(o).val())}),i},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function(){try{getComputedStyle(void 0)}catch(n){var e=getComputedStyle;t.getComputedStyle=function(t,n){try{return e(t,n)}catch(t){return null}}}}(),e}),o("undefined"!=typeof Zepto?Zepto:e.Zepto)}).call(e,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(e,n(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={_files:[{name:"S01_NewBarkTown",type:"audio",src:"assets/bgm/"},{name:"S01_NewBarkTown",type:"tmx",src:"assets/map/S01_NewBarkTown.tmx"},{name:"overworld",type:"tsx",src:"assets/map/overworld.tsx"},{name:"collide",type:"audio",src:"assets/sfx/"},{name:"door_enter",type:"audio",src:"assets/sfx/"},{name:"door_exit",type:"audio",src:"assets/sfx/"},{name:"escape",type:"audio",src:"assets/sfx/"},{name:"heal",type:"audio",src:"assets/sfx/"},{name:"jump",type:"audio",src:"assets/sfx/"},{name:"select",type:"audio",src:"assets/sfx/"},{name:"frame_gold",type:"image",src:"assets/img/gui/frame_gold.png"},{name:"frame_gold_sm",type:"image",src:"assets/img/gui/frame_gold_sm.png"},{name:"frame_silver",type:"image",src:"assets/img/gui/frame_silver.png"},{name:"frame_silver_sm",type:"image",src:"assets/img/gui/frame_silver_sm.png"},{name:"overworld_tiles",type:"image",src:"assets/img/map/overworld_tiles.png"},{name:"modern_trainer_sprite",type:"image",src:"assets/img/sprite/modern_trainer_sprite.png"},{name:"trainer_sprite",type:"image",src:"assets/img/sprite/trainer_sprite.png"}],audios:{S01_NewBarkTown:"S01_NewBarkTown",collide:"collide",door_enter:"door_enter",door_exit:"door_exit",escape:"escape",heal:"heal",jump:"jump",select:"select"},maps:{S01_NewBarkTown:"S01_NewBarkTown"},tilesets:{overworld:"overworld"},images:{frame_gold:"frame_gold",frame_gold_sm:"frame_gold_sm",frame_silver:"frame_silver",frame_silver_sm:"frame_silver_sm",overworld_tiles:"overworld_tiles",modern_trainer_sprite:"modern_trainer_sprite",trainer_sprite:"trainer_sprite"}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=i(r),s=n(1),a=i(s);e.default={get preset(){return a.default.video.presets[a.default.video.preset]},get defaultWidth(){return this.preset.width},get defaultHeight(){return this.preset.height},get width(){return o.default.game.viewport.width},get height(){return o.default.game.viewport.height},get scale(){return a.default.video.scale}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=i(r),s=n(3),a=i(s),u=n(14),h=(i(u),n(1)),l=i(h),c=o.default.input,f=c.KEY,d=c.GAMEPAD.AXES,p=c.GAMEPAD.BUTTONS;e.default={UP:"UP",RIGHT:"RIGHT",DOWN:"DOWN",LEFT:"LEFT",L1:"L1",R1:"R1",X:"X",Y:"Y",A:"A",B:"B",SELECT:"SELECT",START:"START",bind:function(){c.bindKey(f.LEFT,this.LEFT,!1,!0),c.bindKey(f.RIGHT,this.RIGHT,!1,!0),c.bindKey(f.UP,this.UP,!1,!0),c.bindKey(f.DOWN,this.DOWN,!1,!0),c.bindKey(f.Q,this.L1),c.bindKey(f.W,this.R1),c.bindKey(f.A,this.SELECT),c.bindKey(f.S,this.START),c.bindKey(f.X,this.X),c.bindKey(f.Z,this.Y),c.bindKey(f.SPACE,this.A),c.bindKey(f.B,this.B),c.bindGamepad(0,{type:"axes",code:d.LX,threshold:-.5},f.LEFT),c.bindGamepad(0,{type:"axes",code:d.LX,threshold:.5},f.RIGHT),c.bindGamepad(0,{type:"axes",code:d.LY,threshold:-.5},f.UP),c.bindGamepad(0,{type:"axes",code:d.LY,threshold:.5},f.DOWN),c.bindGamepad(0,{type:"axes",code:d.RX,threshold:-.5},f.LEFT),c.bindGamepad(0,{type:"axes",code:d.RX,threshold:.5},f.RIGHT),c.bindGamepad(0,{type:"axes",code:d.RY,threshold:-.5},f.UP),c.bindGamepad(0,{type:"axes",code:d.RY,threshold:.5},f.DOWN),c.bindGamepad(0,{type:"buttons",code:p.LEFT},f.LEFT),c.bindGamepad(0,{type:"buttons",code:p.RIGHT},f.RIGHT),c.bindGamepad(0,{type:"buttons",code:p.UP},f.UP),c.bindGamepad(0,{type:"buttons",code:p.DOWN},f.DOWN),c.bindGamepad(0,{type:"buttons",code:p.L1},f.Q),c.bindGamepad(0,{type:"buttons",code:p.R1},f.W),c.bindGamepad(0,{type:"buttons",code:p.SELECT},f.A),c.bindGamepad(0,{type:"buttons",code:p.START},f.S),c.bindGamepad(0,{type:"buttons",code:p.FACE_3},f.X),c.bindGamepad(0,{type:"buttons",code:p.FACE_4},f.Z),c.bindGamepad(0,{type:"buttons",code:p.FACE_1},f.SPACE),c.bindGamepad(0,{type:"buttons",code:p.FACE_2},f.B);var t=(0,a.default)("#"+l.default.wrapper);this.bindTouchEvent(t,"swipeUp",f.UP),this.bindTouchEvent(t,"swipeRight",f.RIGHT),this.bindTouchEvent(t,"swipeDown",f.DOWN),this.bindTouchEvent(t,"swipeLeft",f.LEFT),this.bindTouchEvent(t,"swipeLeft",f.LEFT),this.bindTouchEvent(t,"tap",f.SPACE),this.bindTouchEvent(t,"longTap",f.S)},bindTouchEvent:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=null;t.on(e,function(){c.triggerKeyEvent(n,!0),r&&clearTimeout(r),r=setTimeout(function(){c.triggerKeyEvent(n,!1)},i)})},isPressed:function(t){return c.isKeyPressed(t)},isUpPressed:function(){return this.isPressed(this.UP)},isDownPressed:function(){return this.isPressed(this.DOWN)},isLeftPressed:function(){return this.isPressed(this.LEFT)},isRightPressed:function(){return this.isPressed(this.RIGHT)},isAPressed:function(){return this.isPressed(this.A)},isBPressed:function(){return this.isPressed(this.B)},isXPressed:function(){return this.isPressed(this.X)},isYPressed:function(){return this.isPressed(this.Y)},isSelectPressed:function(){return this.isPressed(this.SELECT)},isStartPressed:function(){return this.isPressed(this.START)},isL1Pressed:function(){return this.isPressed(this.L1)},isR1Pressed:function(){return this.isPressed(this.R1)},getPressed:function(){return this.isLeftPressed()?this.LEFT:this.isRightPressed()?this.RIGHT:this.isUpPressed()?this.UP:this.isDownPressed()?this.DOWN:this.isAPressed()?this.A:this.isBPressed()?this.B:this.isXPressed()?this.X:this.isYPressed()?this.Y:this.isSelectPressed()?this.SELECT:this.isStartPressed()?this.START:this.isL1Pressed()?this.L1:!!this.isR1Pressed()&&this.R1},isDirectionButtonPressed:function(){var t=this.getPressed();return t===this.LEFT||t===this.RIGHT||t===this.UP||t===this.DOWN},getPressedAxis:function(t){return t=t||this.getPressed(),t===this.LEFT||t===this.RIGHT?"x":(t===this.UP||t===this.DOWN)&&"y"},getPressedOppositeAxis:function(t){return!1!==t&&("x"===t?"y":"x")}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=i(r),s=n(1),a=i(s);e.default={channels:{BGM:!1,SFX_1:!1,SFX_2:!1},playMusic:function(t,e){if(!a.default.sound.enabled)return!1;this.channels.BGM=t,o.default.audio.playTrack(t,isNaN(e)?a.default.sound.volume.music/100:e)},playEffect:function(t,e,n){var i=this;return!!a.default.sound.enabled&&(n=n||"SFX_1",!1===this.channels[n]&&(this.channels[n]=t,void o.default.audio.play(t,!1,function(){i.channels[n]=!1},isNaN(e)?a.default.sound.volume.effects/100:e)))}}},function(t,e,n){(function(t,i){var r;(function(){function o(t,e){return t.set(e[0],e[1]),t}function s(t,e){return t.add(e),t}function a(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function u(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(i,s,n(s),t)}return i}function h(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function l(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function c(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function f(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function d(t,e){return!!(null==t?0:t.length)&&E(t,e,0)>-1}function p(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function m(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function g(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function v(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function y(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function _(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function w(t){return t.split("")}function b(t){return t.match(Fe)||[]}function x(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function T(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function E(t,e,n){return e===e?K(t,e,n):T(t,S,n)}function A(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function S(t){return t!==t}function P(t,e){var n=null==t?0:t.length;return n?k(t,e)/n:Lt}function C(t){return function(e){return null==e?rt:e[t]}}function O(t){return function(e){return null==t?rt:t[e]}}function R(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function M(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function k(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);o!==rt&&(n=n===rt?o:n+o)}return n}function B(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function I(t,e){return m(e,function(e){return[e,t[e]]})}function L(t){return function(e){return t(e)}}function D(t,e){return m(e,function(e){return t[e]})}function j(t,e){return t.has(e)}function z(t,e){for(var n=-1,i=t.length;++n<i&&E(e,t[n],0)>-1;);return n}function N(t,e){for(var n=t.length;n--&&E(e,t[n],0)>-1;);return n}function F(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function V(t){return"\\"+Cn[t]}function U(t,e){return null==t?rt:t[e]}function G(t){return _n.test(t)}function X(t){return wn.test(t)}function H(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function W(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function q(t,e){return function(n){return t(e(n))}}function Y(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n];s!==e&&s!==lt||(t[n]=lt,o[r++]=n)}return o}function $(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Z(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function K(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function J(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}function Q(t){return G(t)?et(t):Hn(t)}function tt(t){return G(t)?nt(t):w(t)}function et(t){for(var e=vn.lastIndex=0;vn.test(t);)++e;return e}function nt(t){return t.match(vn)||[]}function it(t){return t.match(yn)||[]}var rt,ot=200,st="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",at="Expected a function",ut="__lodash_hash_undefined__",ht=500,lt="__lodash_placeholder__",ct=1,ft=2,dt=4,pt=1,mt=2,gt=1,vt=2,yt=4,_t=8,wt=16,bt=32,xt=64,Tt=128,Et=256,At=512,St=30,Pt="...",Ct=800,Ot=16,Rt=1,Mt=2,kt=1/0,Bt=9007199254740991,It=1.7976931348623157e308,Lt=NaN,Dt=4294967295,jt=Dt-1,zt=Dt>>>1,Nt=[["ary",Tt],["bind",gt],["bindKey",vt],["curry",_t],["curryRight",wt],["flip",At],["partial",bt],["partialRight",xt],["rearg",Et]],Ft="[object Arguments]",Vt="[object Array]",Ut="[object AsyncFunction]",Gt="[object Boolean]",Xt="[object Date]",Ht="[object DOMException]",Wt="[object Error]",qt="[object Function]",Yt="[object GeneratorFunction]",$t="[object Map]",Zt="[object Number]",Kt="[object Null]",Jt="[object Object]",Qt="[object Proxy]",te="[object RegExp]",ee="[object Set]",ne="[object String]",ie="[object Symbol]",re="[object Undefined]",oe="[object WeakMap]",se="[object WeakSet]",ae="[object ArrayBuffer]",ue="[object DataView]",he="[object Float32Array]",le="[object Float64Array]",ce="[object Int8Array]",fe="[object Int16Array]",de="[object Int32Array]",pe="[object Uint8Array]",me="[object Uint8ClampedArray]",ge="[object Uint16Array]",ve="[object Uint32Array]",ye=/\b__p \+= '';/g,_e=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/&(?:amp|lt|gt|quot|#39);/g,xe=/[&<>"']/g,Te=RegExp(be.source),Ee=RegExp(xe.source),Ae=/<%-([\s\S]+?)%>/g,Se=/<%([\s\S]+?)%>/g,Pe=/<%=([\s\S]+?)%>/g,Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oe=/^\w*$/,Re=/^\./,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ke=/[\\^$.*+?()[\]{}|]/g,Be=RegExp(ke.source),Ie=/^\s+|\s+$/g,Le=/^\s+/,De=/\s+$/,je=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ze=/\{\n\/\* \[wrapped with (.+)\] \*/,Ne=/,? & /,Fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ve=/\\(\\)?/g,Ue=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ge=/\w*$/,Xe=/^[-+]0x[0-9a-f]+$/i,He=/^0b[01]+$/i,We=/^\[object .+?Constructor\]$/,qe=/^0o[0-7]+$/i,Ye=/^(?:0|[1-9]\d*)$/,$e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ze=/($^)/,Ke=/['\n\r\u2028\u2029\\]/g,Je="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tn="["+Qe+"]",en="["+Je+"]",nn="[a-z\\xdf-\\xf6\\xf8-\\xff]",rn="[^\\ud800-\\udfff"+Qe+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",on="\\ud83c[\\udffb-\\udfff]",sn="(?:\\ud83c[\\udde6-\\uddff]){2}",an="[\\ud800-\\udbff][\\udc00-\\udfff]",un="[A-Z\\xc0-\\xd6\\xd8-\\xde]",hn="(?:"+nn+"|"+rn+")",ln="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",cn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",sn,an].join("|")+")[\\ufe0e\\ufe0f]?"+ln+")*",fn="[\\ufe0e\\ufe0f]?"+ln+cn,dn="(?:"+["[\\u2700-\\u27bf]",sn,an].join("|")+")"+fn,pn="(?:"+["[^\\ud800-\\udfff]"+en+"?",en,sn,an,"[\\ud800-\\udfff]"].join("|")+")",mn=RegExp("['’]","g"),gn=RegExp(en,"g"),vn=RegExp(on+"(?="+on+")|"+pn+fn,"g"),yn=RegExp([un+"?"+nn+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[tn,un,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[tn,un+hn,"$"].join("|")+")",un+"?"+hn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",un+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",dn].join("|"),"g"),_n=RegExp("[\\u200d\\ud800-\\udfff"+Je+"\\ufe0e\\ufe0f]"),wn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xn=-1,Tn={};Tn[he]=Tn[le]=Tn[ce]=Tn[fe]=Tn[de]=Tn[pe]=Tn[me]=Tn[ge]=Tn[ve]=!0,Tn[Ft]=Tn[Vt]=Tn[ae]=Tn[Gt]=Tn[ue]=Tn[Xt]=Tn[Wt]=Tn[qt]=Tn[$t]=Tn[Zt]=Tn[Jt]=Tn[te]=Tn[ee]=Tn[ne]=Tn[oe]=!1;var En={};En[Ft]=En[Vt]=En[ae]=En[ue]=En[Gt]=En[Xt]=En[he]=En[le]=En[ce]=En[fe]=En[de]=En[$t]=En[Zt]=En[Jt]=En[te]=En[ee]=En[ne]=En[ie]=En[pe]=En[me]=En[ge]=En[ve]=!0,En[Wt]=En[qt]=En[oe]=!1;var An={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Sn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Cn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},On=parseFloat,Rn=parseInt,Mn="object"==typeof t&&t&&t.Object===Object&&t,kn="object"==typeof self&&self&&self.Object===Object&&self,Bn=Mn||kn||Function("return this")(),In="object"==typeof e&&e&&!e.nodeType&&e,Ln=In&&"object"==typeof i&&i&&!i.nodeType&&i,Dn=Ln&&Ln.exports===In,jn=Dn&&Mn.process,zn=function(){try{return jn&&jn.binding&&jn.binding("util")}catch(t){}}(),Nn=zn&&zn.isArrayBuffer,Fn=zn&&zn.isDate,Vn=zn&&zn.isMap,Un=zn&&zn.isRegExp,Gn=zn&&zn.isSet,Xn=zn&&zn.isTypedArray,Hn=C("length"),Wn=O(An),qn=O(Sn),Yn=O(Pn),$n=function t(e){function n(t){if(ou(t)&&!vf(t)&&!(t instanceof w)){if(t instanceof r)return t;if(gl.call(t,"__wrapped__"))return ns(t)}return new r(t)}function i(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=rt}function w(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}function O(){var t=new w(this.__wrapped__);return t.__actions__=jr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=jr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=jr(this.__views__),t}function K(){if(this.__filtered__){var t=new w(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,n=vf(t),i=e<0,r=n?t.length:0,o=Po(0,r,this.__views__),s=o.start,a=o.end,u=a-s,h=i?a:s-1,l=this.__iteratees__,c=l.length,f=0,d=Wl(u,this.__takeCount__);if(!n||!i&&r==u&&d==u)return yr(t,this.__actions__);var p=[];t:for(;u--&&f<d;){h+=e;for(var m=-1,g=t[h];++m<c;){var v=l[m],y=v.iteratee,_=v.type,w=y(g);if(_==Mt)g=w;else if(!w){if(_==Rt)continue t;break t}}p[f++]=g}return p}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Fe(){this.__data__=nc?nc(null):{},this.size=0}function Je(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Qe(t){var e=this.__data__;if(nc){var n=e[t];return n===ut?rt:n}return gl.call(e,t)?e[t]:rt}function tn(t){var e=this.__data__;return nc?e[t]!==rt:gl.call(e,t)}function en(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nc&&e===rt?ut:e,this}function nn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function rn(){this.__data__=[],this.size=0}function on(t){var e=this.__data__,n=Zn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Rl.call(e,n,1),--this.size,!0)}function sn(t){var e=this.__data__,n=Zn(e,t);return n<0?rt:e[n][1]}function an(t){return Zn(this.__data__,t)>-1}function un(t,e){var n=this.__data__,i=Zn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function ln(){this.size=0,this.__data__={hash:new nt,map:new(Jl||nn),string:new nt}}function cn(t){var e=To(this,t).delete(t);return this.size-=e?1:0,e}function fn(t){return To(this,t).get(t)}function dn(t){return To(this,t).has(t)}function pn(t,e){var n=To(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new hn;++e<n;)this.add(t[e])}function yn(t){return this.__data__.set(t,ut),this}function _n(t){return this.__data__.has(t)}function wn(t){var e=this.__data__=new nn(t);this.size=e.size}function An(){this.__data__=new nn,this.size=0}function Sn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Pn(t){return this.__data__.get(t)}function Cn(t){return this.__data__.has(t)}function Mn(t,e){var n=this.__data__;if(n instanceof nn){var i=n.__data__;if(!Jl||i.length<ot-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new hn(i)}return n.set(t,e),this.size=n.size,this}function kn(t,e){var n=vf(t),i=!n&&gf(t),r=!n&&!i&&_f(t),o=!n&&!i&&!r&&Ef(t),s=n||i||r||o,a=s?B(t.length,hl):[],u=a.length;for(var h in t)!e&&!gl.call(t,h)||s&&("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Lo(h,u))||a.push(h);return a}function In(t){var e=t.length;return e?t[Qi(0,e-1)]:rt}function Ln(t,e){return Jo(jr(t),ni(e,0,t.length))}function jn(t){return Jo(jr(t))}function zn(t,e,n){(n===rt||Ha(t[e],n))&&(n!==rt||e in t)||ti(t,e,n)}function Hn(t,e,n){var i=t[e];gl.call(t,e)&&Ha(i,n)&&(n!==rt||e in t)||ti(t,e,n)}function Zn(t,e){for(var n=t.length;n--;)if(Ha(t[n][0],e))return n;return-1}function Kn(t,e,n,i){return pc(t,function(t,r,o){e(i,t,n(t),o)}),i}function Jn(t,e){return t&&zr(e,Fu(e),t)}function Qn(t,e){return t&&zr(e,Vu(e),t)}function ti(t,e,n){"__proto__"==e&&Il?Il(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ei(t,e){for(var n=-1,i=e.length,r=nl(i),o=null==t;++n<i;)r[n]=o?rt:ju(t,e[n]);return r}function ni(t,e,n){return t===t&&(n!==rt&&(t=t<=n?t:n),e!==rt&&(t=t>=e?t:e)),t}function ii(t,e,n,i,r,o){var s,a=e&ct,u=e&ft,l=e&dt;if(n&&(s=r?n(t,i,r,o):n(t)),s!==rt)return s;if(!ru(t))return t;var c=vf(t);if(c){if(s=Ro(t),!a)return jr(t,s)}else{var f=Sc(t),d=f==qt||f==Yt;if(_f(t))return Ar(t,a);if(f==Jt||f==Ft||d&&!r){if(s=u||d?{}:Mo(t),!a)return u?Fr(t,Qn(s,t)):Nr(t,Jn(s,t))}else{if(!En[f])return r?t:{};s=ko(t,f,ii,a)}}o||(o=new wn);var p=o.get(t);if(p)return p;o.set(t,s);var m=l?u?_o:yo:u?Vu:Fu,g=c?rt:m(t);return h(g||t,function(i,r){g&&(r=i,i=t[r]),Hn(s,r,ii(i,e,n,r,t,o))}),s}function ri(t){var e=Fu(t);return function(n){return oi(n,t,e)}}function oi(t,e,n){var i=n.length;if(null==t)return!i;for(t=al(t);i--;){var r=n[i],o=e[r],s=t[r];if(s===rt&&!(r in t)||!o(s))return!1}return!0}function si(t,e,n){if("function"!=typeof t)throw new ll(at);return Oc(function(){t.apply(rt,n)},e)}function ai(t,e,n,i){var r=-1,o=d,s=!0,a=t.length,u=[],h=e.length;if(!a)return u;n&&(e=m(e,L(n))),i?(o=p,s=!1):e.length>=ot&&(o=j,s=!1,e=new vn(e));t:for(;++r<a;){var l=t[r],c=null==n?l:n(l);if(l=i||0!==l?l:0,s&&c===c){for(var f=h;f--;)if(e[f]===c)continue t;u.push(l)}else o(e,c,i)||u.push(l)}return u}function ui(t,e){var n=!0;return pc(t,function(t,i,r){return n=!!e(t,i,r)}),n}function hi(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],s=e(o);if(null!=s&&(a===rt?s===s&&!gu(s):n(s,a)))var a=s,u=o}return u}function li(t,e,n,i){var r=t.length;for(n=xu(n),n<0&&(n=-n>r?0:r+n),i=i===rt||i>r?r:xu(i),i<0&&(i+=r),i=n>i?0:Tu(i);n<i;)t[n++]=e;return t}function ci(t,e){var n=[];return pc(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function fi(t,e,n,i,r){var o=-1,s=t.length;for(n||(n=Io),r||(r=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?fi(a,e-1,n,i,r):g(r,a):i||(r[r.length]=a)}return r}function di(t,e){return t&&gc(t,e,Fu)}function pi(t,e){return t&&vc(t,e,Fu)}function mi(t,e){return f(e,function(e){return eu(t[e])})}function gi(t,e){e=Tr(e,t);for(var n=0,i=e.length;null!=t&&n<i;)t=t[Qo(e[n++])];return n&&n==i?t:rt}function vi(t,e,n){var i=e(t);return vf(t)?i:g(i,n(t))}function yi(t){return null==t?t===rt?re:Kt:Bl&&Bl in al(t)?So(t):Wo(t)}function _i(t,e){return t>e}function wi(t,e){return null!=t&&gl.call(t,e)}function bi(t,e){return null!=t&&e in al(t)}function xi(t,e,n){return t>=Wl(e,n)&&t<Hl(e,n)}function Ti(t,e,n){for(var i=n?p:d,r=t[0].length,o=t.length,s=o,a=nl(o),u=1/0,h=[];s--;){var l=t[s];s&&e&&(l=m(l,L(e))),u=Wl(l.length,u),a[s]=!n&&(e||r>=120&&l.length>=120)?new vn(s&&l):rt}l=t[0];var c=-1,f=a[0];t:for(;++c<r&&h.length<u;){var g=l[c],v=e?e(g):g;if(g=n||0!==g?g:0,!(f?j(f,v):i(h,v,n))){for(s=o;--s;){var y=a[s];if(!(y?j(y,v):i(t[s],v,n)))continue t}f&&f.push(v),h.push(g)}}return h}function Ei(t,e,n,i){return di(t,function(t,r,o){e(i,n(t),r,o)}),i}function Ai(t,e,n){e=Tr(e,t),t=Yo(t,e);var i=null==t?t:t[Qo(bs(e))];return null==i?rt:a(i,t,n)}function Si(t){return ou(t)&&yi(t)==Ft}function Pi(t){return ou(t)&&yi(t)==ae}function Ci(t){return ou(t)&&yi(t)==Xt}function Oi(t,e,n,i,r){return t===e||(null==t||null==e||!ou(t)&&!ou(e)?t!==t&&e!==e:Ri(t,e,n,i,Oi,r))}function Ri(t,e,n,i,r,o){var s=vf(t),a=vf(e),u=s?Vt:Sc(t),h=a?Vt:Sc(e);u=u==Ft?Jt:u,h=h==Ft?Jt:h;var l=u==Jt,c=h==Jt,f=u==h;if(f&&_f(t)){if(!_f(e))return!1;s=!0,l=!1}if(f&&!l)return o||(o=new wn),s||Ef(t)?po(t,e,n,i,r,o):mo(t,e,u,n,i,r,o);if(!(n&pt)){var d=l&&gl.call(t,"__wrapped__"),p=c&&gl.call(e,"__wrapped__");if(d||p){var m=d?t.value():t,g=p?e.value():e;return o||(o=new wn),r(m,g,n,i,o)}}return!!f&&(o||(o=new wn),go(t,e,n,i,r,o))}function Mi(t){return ou(t)&&Sc(t)==$t}function ki(t,e,n,i){var r=n.length,o=r,s=!i;if(null==t)return!o;for(t=al(t);r--;){var a=n[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){a=n[r];var u=a[0],h=t[u],l=a[1];if(s&&a[2]){if(h===rt&&!(u in t))return!1}else{var c=new wn;if(i)var f=i(h,l,u,t,e,c);if(!(f===rt?Oi(l,h,pt|mt,i,c):f))return!1}}return!0}function Bi(t){return!(!ru(t)||Fo(t))&&(eu(t)?xl:We).test(ts(t))}function Ii(t){return ou(t)&&yi(t)==te}function Li(t){return ou(t)&&Sc(t)==ee}function Di(t){return ou(t)&&iu(t.length)&&!!Tn[yi(t)]}function ji(t){return"function"==typeof t?t:null==t?Rh:"object"==typeof t?vf(t)?Gi(t[0],t[1]):Ui(t):zh(t)}function zi(t){if(!Vo(t))return Xl(t);var e=[];for(var n in al(t))gl.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ni(t){if(!ru(t))return Ho(t);var e=Vo(t),n=[];for(var i in t)("constructor"!=i||!e&&gl.call(t,i))&&n.push(i);return n}function Fi(t,e){return t<e}function Vi(t,e){var n=-1,i=Wa(t)?nl(t.length):[];return pc(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function Ui(t){var e=Eo(t);return 1==e.length&&e[0][2]?Go(e[0][0],e[0][1]):function(n){return n===t||ki(n,t,e)}}function Gi(t,e){return jo(t)&&Uo(e)?Go(Qo(t),e):function(n){var i=ju(n,t);return i===rt&&i===e?Nu(n,t):Oi(e,i,pt|mt)}}function Xi(t,e,n,i,r){t!==e&&gc(e,function(o,s){if(ru(o))r||(r=new wn),Hi(t,e,s,n,Xi,i,r);else{var a=i?i(t[s],o,s+"",t,e,r):rt;a===rt&&(a=o),zn(t,s,a)}},Vu)}function Hi(t,e,n,i,r,o,s){var a=t[n],u=e[n],h=s.get(u);if(h)return void zn(t,n,h);var l=o?o(a,u,n+"",t,e,s):rt,c=l===rt;if(c){var f=vf(u),d=!f&&_f(u),p=!f&&!d&&Ef(u);l=u,f||d||p?vf(a)?l=a:qa(a)?l=jr(a):d?(c=!1,l=Ar(u,!0)):p?(c=!1,l=kr(u,!0)):l=[]:du(u)||gf(u)?(l=a,gf(a)?l=Au(a):(!ru(a)||i&&eu(a))&&(l=Mo(u))):c=!1}c&&(s.set(u,l),r(l,u,i,o,s),s.delete(u)),zn(t,n,l)}function Wi(t,e){var n=t.length;if(n)return e+=e<0?n:0,Lo(e,n)?t[e]:rt}function qi(t,e,n){var i=-1;return e=m(e.length?e:[Rh],L(xo())),M(Vi(t,function(t,n,r){return{criteria:m(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return Ir(t,e,n)})}function Yi(t,e){return $i(t,e,function(e,n){return Nu(t,n)})}function $i(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var s=e[i],a=gi(t,s);n(a,s)&&or(o,Tr(s,t),a)}return o}function Zi(t){return function(e){return gi(e,t)}}function Ki(t,e,n,i){var r=i?A:E,o=-1,s=e.length,a=t;for(t===e&&(e=jr(e)),n&&(a=m(t,L(n)));++o<s;)for(var u=0,h=e[o],l=n?n(h):h;(u=r(a,l,u,i))>-1;)a!==t&&Rl.call(a,u,1),Rl.call(t,u,1);return t}function Ji(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;Lo(r)?Rl.call(t,r,1):mr(t,r)}}return t}function Qi(t,e){return t+Nl($l()*(e-t+1))}function tr(t,e,n,i){for(var r=-1,o=Hl(zl((e-t)/(n||1)),0),s=nl(o);o--;)s[i?o:++r]=t,t+=n;return s}function er(t,e){var n="";if(!t||e<1||e>Bt)return n;do{e%2&&(n+=t),(e=Nl(e/2))&&(t+=t)}while(e);return n}function nr(t,e){return Rc(qo(t,e,Rh),t+"")}function ir(t){return In(Qu(t))}function rr(t,e){var n=Qu(t);return Jo(n,ni(e,0,n.length))}function or(t,e,n,i){if(!ru(t))return t;e=Tr(e,t);for(var r=-1,o=e.length,s=o-1,a=t;null!=a&&++r<o;){var u=Qo(e[r]),h=n;if(r!=s){var l=a[u];h=i?i(l,u,a):rt,h===rt&&(h=ru(l)?l:Lo(e[r+1])?[]:{})}Hn(a,u,h),a=a[u]}return t}function sr(t){return Jo(Qu(t))}function ar(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=nl(r);++i<r;)o[i]=t[i+e];return o}function ur(t,e){var n;return pc(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function hr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&r<=zt){for(;i<r;){var o=i+r>>>1,s=t[o];null!==s&&!gu(s)&&(n?s<=e:s<e)?i=o+1:r=o}return r}return lr(t,e,Rh,n)}function lr(t,e,n,i){e=n(e);for(var r=0,o=null==t?0:t.length,s=e!==e,a=null===e,u=gu(e),h=e===rt;r<o;){var l=Nl((r+o)/2),c=n(t[l]),f=c!==rt,d=null===c,p=c===c,m=gu(c);if(s)var g=i||p;else g=h?p&&(i||f):a?p&&f&&(i||!d):u?p&&f&&!d&&(i||!m):!d&&!m&&(i?c<=e:c<e);g?r=l+1:o=l}return Wl(o,jt)}function cr(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!Ha(a,u)){var u=a;o[r++]=0===s?0:s}}return o}function fr(t){return"number"==typeof t?t:gu(t)?Lt:+t}function dr(t){if("string"==typeof t)return t;if(vf(t))return m(t,dr)+"";if(gu(t))return fc?fc.call(t):"";var e=t+"";return"0"==e&&1/t==-kt?"-0":e}function pr(t,e,n){var i=-1,r=d,o=t.length,s=!0,a=[],u=a;if(n)s=!1,r=p;else if(o>=ot){var h=e?null:xc(t);if(h)return $(h);s=!1,r=j,u=new vn}else u=e?[]:a;t:for(;++i<o;){var l=t[i],c=e?e(l):l;if(l=n||0!==l?l:0,s&&c===c){for(var f=u.length;f--;)if(u[f]===c)continue t;e&&u.push(c),a.push(l)}else r(u,c,n)||(u!==a&&u.push(c),a.push(l))}return a}function mr(t,e){return e=Tr(e,t),null==(t=Yo(t,e))||delete t[Qo(bs(e))]}function gr(t,e,n,i){return or(t,e,n(gi(t,e)),i)}function vr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?ar(t,i?0:o,i?o+1:r):ar(t,i?o+1:0,i?r:o)}function yr(t,e){var n=t;return n instanceof w&&(n=n.value()),v(e,function(t,e){return e.func.apply(e.thisArg,g([t],e.args))},n)}function _r(t,e,n){var i=t.length;if(i<2)return i?pr(t[0]):[];for(var r=-1,o=nl(i);++r<i;)for(var s=t[r],a=-1;++a<i;)a!=r&&(o[r]=ai(o[r]||s,t[a],e,n));return pr(fi(o,1),e,n)}function wr(t,e,n){for(var i=-1,r=t.length,o=e.length,s={};++i<r;){var a=i<o?e[i]:rt;n(s,t[i],a)}return s}function br(t){return qa(t)?t:[]}function xr(t){return"function"==typeof t?t:Rh}function Tr(t,e){return vf(t)?t:jo(t,e)?[t]:Mc(Pu(t))}function Er(t,e,n){var i=t.length;return n=n===rt?i:n,!e&&n>=i?t:ar(t,e,n)}function Ar(t,e){if(e)return t.slice();var n=t.length,i=Sl?Sl(n):new t.constructor(n);return t.copy(i),i}function Sr(t){var e=new t.constructor(t.byteLength);return new Al(e).set(new Al(t)),e}function Pr(t,e){var n=e?Sr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Cr(t,e,n){return v(e?n(W(t),ct):W(t),o,new t.constructor)}function Or(t){var e=new t.constructor(t.source,Ge.exec(t));return e.lastIndex=t.lastIndex,e}function Rr(t,e,n){return v(e?n($(t),ct):$(t),s,new t.constructor)}function Mr(t){return cc?al(cc.call(t)):{}}function kr(t,e){var n=e?Sr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Br(t,e){if(t!==e){var n=t!==rt,i=null===t,r=t===t,o=gu(t),s=e!==rt,a=null===e,u=e===e,h=gu(e);if(!a&&!h&&!o&&t>e||o&&s&&u&&!a&&!h||i&&s&&u||!n&&u||!r)return 1;if(!i&&!o&&!h&&t<e||h&&n&&r&&!i&&!o||a&&n&&r||!s&&r||!u)return-1}return 0}function Ir(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,a=n.length;++i<s;){var u=Br(r[i],o[i]);if(u){if(i>=a)return u;return u*("desc"==n[i]?-1:1)}}return t.index-e.index}function Lr(t,e,n,i){for(var r=-1,o=t.length,s=n.length,a=-1,u=e.length,h=Hl(o-s,0),l=nl(u+h),c=!i;++a<u;)l[a]=e[a];for(;++r<s;)(c||r<o)&&(l[n[r]]=t[r]);for(;h--;)l[a++]=t[r++];return l}function Dr(t,e,n,i){for(var r=-1,o=t.length,s=-1,a=n.length,u=-1,h=e.length,l=Hl(o-a,0),c=nl(l+h),f=!i;++r<l;)c[r]=t[r];for(var d=r;++u<h;)c[d+u]=e[u];for(;++s<a;)(f||r<o)&&(c[d+n[s]]=t[r++]);return c}function jr(t,e){var n=-1,i=t.length;for(e||(e=nl(i));++n<i;)e[n]=t[n];return e}function zr(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=i?i(n[a],t[a],a,n,t):rt;u===rt&&(u=t[a]),r?ti(n,a,u):Hn(n,a,u)}return n}function Nr(t,e){return zr(t,Ec(t),e)}function Fr(t,e){return zr(t,Ac(t),e)}function Vr(t,e){return function(n,i){var r=vf(n)?u:Kn,o=e?e():{};return r(n,t,xo(i,2),o)}}function Ur(t){return nr(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:rt,s=r>2?n[2]:rt;for(o=t.length>3&&"function"==typeof o?(r--,o):rt,s&&Do(n[0],n[1],s)&&(o=r<3?rt:o,r=1),e=al(e);++i<r;){var a=n[i];a&&t(e,a,i,o)}return e})}function Gr(t,e){return function(n,i){if(null==n)return n;if(!Wa(n))return t(n,i);for(var r=n.length,o=e?r:-1,s=al(n);(e?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function Xr(t){return function(e,n,i){for(var r=-1,o=al(e),s=i(e),a=s.length;a--;){var u=s[t?a:++r];if(!1===n(o[u],u,o))break}return e}}function Hr(t,e,n){function i(){return(this&&this!==Bn&&this instanceof i?o:t).apply(r?n:this,arguments)}var r=e&gt,o=Yr(t);return i}function Wr(t){return function(e){e=Pu(e);var n=G(e)?tt(e):rt,i=n?n[0]:e.charAt(0),r=n?Er(n,1).join(""):e.slice(1);return i[t]()+r}}function qr(t){return function(e){return v(Ah(oh(e).replace(mn,"")),t,"")}}function Yr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=dc(t.prototype),i=t.apply(n,e);return ru(i)?i:n}}function $r(t,e,n){function i(){for(var o=arguments.length,s=nl(o),u=o,h=bo(i);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==h&&s[o-1]!==h?[]:Y(s,h);return(o-=l.length)<n?so(t,e,Jr,i.placeholder,rt,s,l,rt,rt,n-o):a(this&&this!==Bn&&this instanceof i?r:t,this,s)}var r=Yr(t);return i}function Zr(t){return function(e,n,i){var r=al(e);if(!Wa(e)){var o=xo(n,3);e=Fu(e),n=function(t){return o(r[t],t,r)}}var s=t(e,n,i);return s>-1?r[o?e[s]:s]:rt}}function Kr(t){return vo(function(e){var n=e.length,i=n,o=r.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new ll(at);if(o&&!a&&"wrapper"==wo(s))var a=new r([],!0)}for(i=a?i:n;++i<n;){s=e[i];var u=wo(s),h="wrapper"==u?Tc(s):rt;a=h&&No(h[0])&&h[1]==(Tt|_t|bt|Et)&&!h[4].length&&1==h[9]?a[wo(h[0])].apply(a,h[3]):1==s.length&&No(s)?a[u]():a.thru(s)}return function(){var t=arguments,i=t[0];if(a&&1==t.length&&vf(i))return a.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}})}function Jr(t,e,n,i,r,o,s,a,u,h){function l(){for(var v=arguments.length,y=nl(v),_=v;_--;)y[_]=arguments[_];if(p)var w=bo(l),b=F(y,w);if(i&&(y=Lr(y,i,r,p)),o&&(y=Dr(y,o,s,p)),v-=b,p&&v<h){var x=Y(y,w);return so(t,e,Jr,l.placeholder,n,y,x,a,u,h-v)}var T=f?n:this,E=d?T[t]:t;return v=y.length,a?y=$o(y,a):m&&v>1&&y.reverse(),c&&u<v&&(y.length=u),this&&this!==Bn&&this instanceof l&&(E=g||Yr(E)),E.apply(T,y)}var c=e&Tt,f=e&gt,d=e&vt,p=e&(_t|wt),m=e&At,g=d?rt:Yr(t);return l}function Qr(t,e){return function(n,i){return Ei(n,t,e(i),{})}}function to(t,e){return function(n,i){var r;if(n===rt&&i===rt)return e;if(n!==rt&&(r=n),i!==rt){if(r===rt)return i;"string"==typeof n||"string"==typeof i?(n=dr(n),i=dr(i)):(n=fr(n),i=fr(i)),r=t(n,i)}return r}}function eo(t){return vo(function(e){return e=m(e,L(xo())),nr(function(n){var i=this;return t(e,function(t){return a(t,i,n)})})})}function no(t,e){e=e===rt?" ":dr(e);var n=e.length;if(n<2)return n?er(e,t):e;var i=er(e,zl(t/Q(e)));return G(e)?Er(tt(i),0,t).join(""):i.slice(0,t)}function io(t,e,n,i){function r(){for(var e=-1,u=arguments.length,h=-1,l=i.length,c=nl(l+u),f=this&&this!==Bn&&this instanceof r?s:t;++h<l;)c[h]=i[h];for(;u--;)c[h++]=arguments[++e];return a(f,o?n:this,c)}var o=e&gt,s=Yr(t);return r}function ro(t){return function(e,n,i){return i&&"number"!=typeof i&&Do(e,n,i)&&(n=i=rt),e=bu(e),n===rt?(n=e,e=0):n=bu(n),i=i===rt?e<n?1:-1:bu(i),tr(e,n,i,t)}}function oo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Eu(e),n=Eu(n)),t(e,n)}}function so(t,e,n,i,r,o,s,a,u,h){var l=e&_t,c=l?s:rt,f=l?rt:s,d=l?o:rt,p=l?rt:o;e|=l?bt:xt,(e&=~(l?xt:bt))&yt||(e&=~(gt|vt));var m=[t,e,r,d,c,p,f,a,u,h],g=n.apply(rt,m);return No(t)&&Cc(g,m),g.placeholder=i,Zo(g,t,e)}function ao(t){var e=sl[t];return function(t,n){if(t=Eu(t),n=null==n?0:Wl(xu(n),292)){var i=(Pu(t)+"e").split("e");return i=(Pu(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function uo(t){return function(e){var n=Sc(e);return n==$t?W(e):n==ee?Z(e):I(e,t(e))}}function ho(t,e,n,i,r,o,s,a){var u=e&vt;if(!u&&"function"!=typeof t)throw new ll(at);var h=i?i.length:0;if(h||(e&=~(bt|xt),i=r=rt),s=s===rt?s:Hl(xu(s),0),a=a===rt?a:xu(a),h-=r?r.length:0,e&xt){var l=i,c=r;i=r=rt}var f=u?rt:Tc(t),d=[t,e,n,i,r,l,c,o,s,a];if(f&&Xo(d,f),t=d[0],e=d[1],n=d[2],i=d[3],r=d[4],a=d[9]=d[9]===rt?u?0:t.length:Hl(d[9]-h,0),!a&&e&(_t|wt)&&(e&=~(_t|wt)),e&&e!=gt)p=e==_t||e==wt?$r(t,e,a):e!=bt&&e!=(gt|bt)||r.length?Jr.apply(rt,d):io(t,e,n,i);else var p=Hr(t,e,n);return Zo((f?yc:Cc)(p,d),t,e)}function lo(t,e,n,i){return t===rt||Ha(t,dl[n])&&!gl.call(i,n)?e:t}function co(t,e,n,i,r,o){return ru(t)&&ru(e)&&(o.set(e,t),Xi(t,e,rt,co,o),o.delete(e)),t}function fo(t){return du(t)?rt:t}function po(t,e,n,i,r,o){var s=n&pt,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var h=o.get(t);if(h&&o.get(e))return h==e;var l=-1,c=!0,f=n&mt?new vn:rt;for(o.set(t,e),o.set(e,t);++l<a;){var d=t[l],p=e[l];if(i)var m=s?i(p,d,l,e,t,o):i(d,p,l,t,e,o);if(m!==rt){if(m)continue;c=!1;break}if(f){if(!_(e,function(t,e){if(!j(f,e)&&(d===t||r(d,t,n,i,o)))return f.push(e)})){c=!1;break}}else if(d!==p&&!r(d,p,n,i,o)){c=!1;break}}return o.delete(t),o.delete(e),c}function mo(t,e,n,i,r,o,s){switch(n){case ue:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ae:return!(t.byteLength!=e.byteLength||!o(new Al(t),new Al(e)));case Gt:case Xt:case Zt:return Ha(+t,+e);case Wt:return t.name==e.name&&t.message==e.message;case te:case ne:return t==e+"";case $t:var a=W;case ee:var u=i&pt;if(a||(a=$),t.size!=e.size&&!u)return!1;var h=s.get(t);if(h)return h==e;i|=mt,s.set(t,e);var l=po(a(t),a(e),i,r,o,s);return s.delete(t),l;case ie:if(cc)return cc.call(t)==cc.call(e)}return!1}function go(t,e,n,i,r,o){var s=n&pt,a=yo(t),u=a.length;if(u!=yo(e).length&&!s)return!1;for(var h=u;h--;){var l=a[h];if(!(s?l in e:gl.call(e,l)))return!1}var c=o.get(t);if(c&&o.get(e))return c==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=s;++h<u;){l=a[h];var p=t[l],m=e[l];if(i)var g=s?i(m,p,l,e,t,o):i(p,m,l,t,e,o);if(!(g===rt?p===m||r(p,m,n,i,o):g)){f=!1;break}d||(d="constructor"==l)}if(f&&!d){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(t),o.delete(e),f}function vo(t){return Rc(qo(t,rt,ds),t+"")}function yo(t){return vi(t,Fu,Ec)}function _o(t){return vi(t,Vu,Ac)}function wo(t){for(var e=t.name+"",n=rc[e],i=gl.call(rc,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function bo(t){return(gl.call(n,"placeholder")?n:t).placeholder}function xo(){var t=n.iteratee||Mh;return t=t===Mh?ji:t,arguments.length?t(arguments[0],arguments[1]):t}function To(t,e){var n=t.__data__;return zo(e)?n["string"==typeof e?"string":"hash"]:n.map}function Eo(t){for(var e=Fu(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Uo(r)]}return e}function Ao(t,e){var n=U(t,e);return Bi(n)?n:rt}function So(t){var e=gl.call(t,Bl),n=t[Bl];try{t[Bl]=rt;var i=!0}catch(t){}var r=_l.call(t);return i&&(e?t[Bl]=n:delete t[Bl]),r}function Po(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Wl(e,t+s);break;case"takeRight":t=Hl(t,e-s)}}return{start:t,end:e}}function Co(t){var e=t.match(ze);return e?e[1].split(Ne):[]}function Oo(t,e,n){e=Tr(e,t);for(var i=-1,r=e.length,o=!1;++i<r;){var s=Qo(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&iu(r)&&Lo(s,r)&&(vf(t)||gf(t))}function Ro(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&gl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Mo(t){return"function"!=typeof t.constructor||Vo(t)?{}:dc(Pl(t))}function ko(t,e,n,i){var r=t.constructor;switch(e){case ae:return Sr(t);case Gt:case Xt:return new r(+t);case ue:return Pr(t,i);case he:case le:case ce:case fe:case de:case pe:case me:case ge:case ve:return kr(t,i);case $t:return Cr(t,i,n);case Zt:case ne:return new r(t);case te:return Or(t);case ee:return Rr(t,i,n);case ie:return Mr(t)}}function Bo(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(je,"{\n/* [wrapped with "+e+"] */\n")}function Io(t){return vf(t)||gf(t)||!!(Ml&&t&&t[Ml])}function Lo(t,e){return!!(e=null==e?Bt:e)&&("number"==typeof t||Ye.test(t))&&t>-1&&t%1==0&&t<e}function Do(t,e,n){if(!ru(n))return!1;var i=typeof e;return!!("number"==i?Wa(n)&&Lo(e,n.length):"string"==i&&e in n)&&Ha(n[e],t)}function jo(t,e){if(vf(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!gu(t))||(Oe.test(t)||!Ce.test(t)||null!=e&&t in al(e))}function zo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function No(t){var e=wo(t),i=n[e];if("function"!=typeof i||!(e in w.prototype))return!1;if(t===i)return!0;var r=Tc(i);return!!r&&t===r[0]}function Fo(t){return!!yl&&yl in t}function Vo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||dl)}function Uo(t){return t===t&&!ru(t)}function Go(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==rt||t in al(n)))}}function Xo(t,e){var n=t[1],i=e[1],r=n|i,o=r<(gt|vt|Tt),s=i==Tt&&n==_t||i==Tt&&n==Et&&t[7].length<=e[8]||i==(Tt|Et)&&e[7].length<=e[8]&&n==_t;if(!o&&!s)return t;i&gt&&(t[2]=e[2],r|=n&gt?0:yt);var a=e[3];if(a){var u=t[3];t[3]=u?Lr(u,a,e[4]):a,t[4]=u?Y(t[3],lt):e[4]}return a=e[5],a&&(u=t[5],t[5]=u?Dr(u,a,e[6]):a,t[6]=u?Y(t[5],lt):e[6]),a=e[7],a&&(t[7]=a),i&Tt&&(t[8]=null==t[8]?e[8]:Wl(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function Ho(t){var e=[];if(null!=t)for(var n in al(t))e.push(n);return e}function Wo(t){return _l.call(t)}function qo(t,e,n){return e=Hl(e===rt?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=Hl(i.length-e,0),s=nl(o);++r<o;)s[r]=i[e+r];r=-1;for(var u=nl(e+1);++r<e;)u[r]=i[r];return u[e]=n(s),a(t,this,u)}}function Yo(t,e){return e.length<2?t:gi(t,ar(e,0,-1))}function $o(t,e){for(var n=t.length,i=Wl(e.length,n),r=jr(t);i--;){var o=e[i];t[i]=Lo(o,n)?r[o]:rt}return t}function Zo(t,e,n){var i=e+"";return Rc(t,Bo(i,es(Co(i),n)))}function Ko(t){var e=0,n=0;return function(){var i=ql(),r=Ot-(i-n);if(n=i,r>0){if(++e>=Ct)return arguments[0]}else e=0;return t.apply(rt,arguments)}}function Jo(t,e){var n=-1,i=t.length,r=i-1;for(e=e===rt?i:e;++n<e;){var o=Qi(n,r),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}function Qo(t){if("string"==typeof t||gu(t))return t;var e=t+"";return"0"==e&&1/t==-kt?"-0":e}function ts(t){if(null!=t){try{return ml.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function es(t,e){return h(Nt,function(n){var i="_."+n[0];e&n[1]&&!d(t,i)&&t.push(i)}),t.sort()}function ns(t){if(t instanceof w)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=jr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function is(t,e,n){e=(n?Do(t,e,n):e===rt)?1:Hl(xu(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,o=0,s=nl(zl(i/e));r<i;)s[o++]=ar(t,r,r+=e);return s}function rs(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r}function os(){var t=arguments.length;if(!t)return[];for(var e=nl(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return g(vf(n)?jr(n):[n],fi(e,1))}function ss(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===rt?1:xu(e),ar(t,e<0?0:e,i)):[]}function as(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===rt?1:xu(e),e=i-e,ar(t,0,e<0?0:e)):[]}function us(t,e){return t&&t.length?vr(t,xo(e,3),!0,!0):[]}function hs(t,e){return t&&t.length?vr(t,xo(e,3),!0):[]}function ls(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Do(t,e,n)&&(n=0,i=r),li(t,e,n,i)):[]}function cs(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:xu(n);return r<0&&(r=Hl(i+r,0)),T(t,xo(e,3),r)}function fs(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==rt&&(r=xu(n),r=n<0?Hl(i+r,0):Wl(r,i-1)),T(t,xo(e,3),r,!0)}function ds(t){return(null==t?0:t.length)?fi(t,1):[]}function ps(t){return(null==t?0:t.length)?fi(t,kt):[]}function ms(t,e){return(null==t?0:t.length)?(e=e===rt?1:xu(e),fi(t,e)):[]}function gs(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}function vs(t){return t&&t.length?t[0]:rt}function ys(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:xu(n);return r<0&&(r=Hl(i+r,0)),E(t,e,r)}function _s(t){return(null==t?0:t.length)?ar(t,0,-1):[]}function ws(t,e){return null==t?"":Gl.call(t,e)}function bs(t){var e=null==t?0:t.length;return e?t[e-1]:rt}function xs(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==rt&&(r=xu(n),r=r<0?Hl(i+r,0):Wl(r,i-1)),e===e?J(t,e,r):T(t,S,r,!0)}function Ts(t,e){return t&&t.length?Wi(t,xu(e)):rt}function Es(t,e){return t&&t.length&&e&&e.length?Ki(t,e):t}function As(t,e,n){return t&&t.length&&e&&e.length?Ki(t,e,xo(n,2)):t}function Ss(t,e,n){return t&&t.length&&e&&e.length?Ki(t,e,rt,n):t}function Ps(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=xo(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return Ji(t,r),n}function Cs(t){return null==t?t:Zl.call(t)}function Os(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Do(t,e,n)?(e=0,n=i):(e=null==e?0:xu(e),n=n===rt?i:xu(n)),ar(t,e,n)):[]}function Rs(t,e){return hr(t,e)}function Ms(t,e,n){return lr(t,e,xo(n,2))}function ks(t,e){var n=null==t?0:t.length;if(n){var i=hr(t,e);if(i<n&&Ha(t[i],e))return i}return-1}function Bs(t,e){return hr(t,e,!0)}function Is(t,e,n){return lr(t,e,xo(n,2),!0)}function Ls(t,e){if(null==t?0:t.length){var n=hr(t,e,!0)-1;if(Ha(t[n],e))return n}return-1}function Ds(t){return t&&t.length?cr(t):[]}function js(t,e){return t&&t.length?cr(t,xo(e,2)):[]}function zs(t){var e=null==t?0:t.length;return e?ar(t,1,e):[]}function Ns(t,e,n){return t&&t.length?(e=n||e===rt?1:xu(e),ar(t,0,e<0?0:e)):[]}function Fs(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===rt?1:xu(e),e=i-e,ar(t,e<0?0:e,i)):[]}function Vs(t,e){return t&&t.length?vr(t,xo(e,3),!1,!0):[]}function Us(t,e){return t&&t.length?vr(t,xo(e,3)):[]}function Gs(t){return t&&t.length?pr(t):[]}function Xs(t,e){return t&&t.length?pr(t,xo(e,2)):[]}function Hs(t,e){return e="function"==typeof e?e:rt,t&&t.length?pr(t,rt,e):[]}function Ws(t){if(!t||!t.length)return[];var e=0;return t=f(t,function(t){if(qa(t))return e=Hl(t.length,e),!0}),B(e,function(e){return m(t,C(e))})}function qs(t,e){if(!t||!t.length)return[];var n=Ws(t);return null==e?n:m(n,function(t){return a(e,rt,t)})}function Ys(t,e){return wr(t||[],e||[],Hn)}function $s(t,e){return wr(t||[],e||[],or)}function Zs(t){var e=n(t);return e.__chain__=!0,e}function Ks(t,e){return e(t),t}function Js(t,e){return e(t)}function Qs(){return Zs(this)}function ta(){return new r(this.value(),this.__chain__)}function ea(){this.__values__===rt&&(this.__values__=wu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?rt:this.__values__[this.__index__++]}}function na(){return this}function ia(t){for(var e,n=this;n instanceof i;){var r=ns(n);r.__index__=0,r.__values__=rt,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e}function ra(){var t=this.__wrapped__;if(t instanceof w){var e=t;return this.__actions__.length&&(e=new w(this)),e=e.reverse(),e.__actions__.push({func:Js,args:[Cs],thisArg:rt}),new r(e,this.__chain__)}return this.thru(Cs)}function oa(){return yr(this.__wrapped__,this.__actions__)}function sa(t,e,n){var i=vf(t)?c:ui;return n&&Do(t,e,n)&&(e=rt),i(t,xo(e,3))}function aa(t,e){return(vf(t)?f:ci)(t,xo(e,3))}function ua(t,e){return fi(pa(t,e),1)}function ha(t,e){return fi(pa(t,e),kt)}function la(t,e,n){return n=n===rt?1:xu(n),fi(pa(t,e),n)}function ca(t,e){return(vf(t)?h:pc)(t,xo(e,3))}function fa(t,e){return(vf(t)?l:mc)(t,xo(e,3))}function da(t,e,n,i){t=Wa(t)?t:Qu(t),n=n&&!i?xu(n):0;var r=t.length;return n<0&&(n=Hl(r+n,0)),mu(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&E(t,e,n)>-1}function pa(t,e){return(vf(t)?m:Vi)(t,xo(e,3))}function ma(t,e,n,i){return null==t?[]:(vf(e)||(e=null==e?[]:[e]),n=i?rt:n,vf(n)||(n=null==n?[]:[n]),qi(t,e,n))}function ga(t,e,n){var i=vf(t)?v:R,r=arguments.length<3;return i(t,xo(e,4),n,r,pc)}function va(t,e,n){var i=vf(t)?y:R,r=arguments.length<3;return i(t,xo(e,4),n,r,mc)}function ya(t,e){return(vf(t)?f:ci)(t,ka(xo(e,3)))}function _a(t){return(vf(t)?In:ir)(t)}function wa(t,e,n){return e=(n?Do(t,e,n):e===rt)?1:xu(e),(vf(t)?Ln:rr)(t,e)}function ba(t){return(vf(t)?jn:sr)(t)}function xa(t){if(null==t)return 0;if(Wa(t))return mu(t)?Q(t):t.length;var e=Sc(t);return e==$t||e==ee?t.size:zi(t).length}function Ta(t,e,n){var i=vf(t)?_:ur;return n&&Do(t,e,n)&&(e=rt),i(t,xo(e,3))}function Ea(t,e){if("function"!=typeof e)throw new ll(at);return t=xu(t),function(){if(--t<1)return e.apply(this,arguments)}}function Aa(t,e,n){return e=n?rt:e,e=t&&null==e?t.length:e,ho(t,Tt,rt,rt,rt,rt,e)}function Sa(t,e){var n;if("function"!=typeof e)throw new ll(at);return t=xu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=rt),n}}function Pa(t,e,n){e=n?rt:e;var i=ho(t,_t,rt,rt,rt,rt,rt,e);return i.placeholder=Pa.placeholder,i}function Ca(t,e,n){e=n?rt:e;var i=ho(t,wt,rt,rt,rt,rt,rt,e);return i.placeholder=Ca.placeholder,i}function Oa(t,e,n){function i(e){var n=f,i=d;return f=d=rt,y=e,m=t.apply(i,n)}function r(t){return y=t,g=Oc(a,e),_?i(t):m}function o(t){var n=t-v,i=t-y,r=e-n;return w?Wl(r,p-i):r}function s(t){var n=t-v,i=t-y;return v===rt||n>=e||n<0||w&&i>=p}function a(){var t=of();if(s(t))return u(t);g=Oc(a,o(t))}function u(t){return g=rt,b&&f?i(t):(f=d=rt,m)}function h(){g!==rt&&bc(g),y=0,f=v=d=g=rt}function l(){return g===rt?m:u(of())}function c(){var t=of(),n=s(t);if(f=arguments,d=this,v=t,n){if(g===rt)return r(v);if(w)return g=Oc(a,e),i(v)}return g===rt&&(g=Oc(a,e)),m}var f,d,p,m,g,v,y=0,_=!1,w=!1,b=!0;if("function"!=typeof t)throw new ll(at);return e=Eu(e)||0,ru(n)&&(_=!!n.leading,w="maxWait"in n,p=w?Hl(Eu(n.maxWait)||0,e):p,b="trailing"in n?!!n.trailing:b),c.cancel=h,c.flush=l,c}function Ra(t){return ho(t,At)}function Ma(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ll(at);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Ma.Cache||hn),n}function ka(t){if("function"!=typeof t)throw new ll(at);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ba(t){return Sa(2,t)}function Ia(t,e){if("function"!=typeof t)throw new ll(at);return e=e===rt?e:xu(e),nr(t,e)}function La(t,e){if("function"!=typeof t)throw new ll(at);return e=null==e?0:Hl(xu(e),0),nr(function(n){var i=n[e],r=Er(n,0,e);return i&&g(r,i),a(t,this,r)})}function Da(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new ll(at);return ru(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Oa(t,e,{leading:i,maxWait:e,trailing:r})}function ja(t){return Aa(t,1)}function za(t,e){return cf(xr(e),t)}function Na(){if(!arguments.length)return[];var t=arguments[0];return vf(t)?t:[t]}function Fa(t){return ii(t,dt)}function Va(t,e){return e="function"==typeof e?e:rt,ii(t,dt,e)}function Ua(t){return ii(t,ct|dt)}function Ga(t,e){return e="function"==typeof e?e:rt,ii(t,ct|dt,e)}function Xa(t,e){return null==e||oi(t,e,Fu(e))}function Ha(t,e){return t===e||t!==t&&e!==e}function Wa(t){return null!=t&&iu(t.length)&&!eu(t)}function qa(t){return ou(t)&&Wa(t)}function Ya(t){return!0===t||!1===t||ou(t)&&yi(t)==Gt}function $a(t){return ou(t)&&1===t.nodeType&&!du(t)}function Za(t){if(null==t)return!0;if(Wa(t)&&(vf(t)||"string"==typeof t||"function"==typeof t.splice||_f(t)||Ef(t)||gf(t)))return!t.length;var e=Sc(t);if(e==$t||e==ee)return!t.size;if(Vo(t))return!zi(t).length;for(var n in t)if(gl.call(t,n))return!1;return!0}function Ka(t,e){return Oi(t,e)}function Ja(t,e,n){n="function"==typeof n?n:rt;var i=n?n(t,e):rt;return i===rt?Oi(t,e,rt,n):!!i}function Qa(t){if(!ou(t))return!1;var e=yi(t);return e==Wt||e==Ht||"string"==typeof t.message&&"string"==typeof t.name&&!du(t)}function tu(t){return"number"==typeof t&&Ul(t)}function eu(t){if(!ru(t))return!1;var e=yi(t);return e==qt||e==Yt||e==Ut||e==Qt}function nu(t){return"number"==typeof t&&t==xu(t)}function iu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Bt}function ru(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ou(t){return null!=t&&"object"==typeof t}function su(t,e){return t===e||ki(t,e,Eo(e))}function au(t,e,n){return n="function"==typeof n?n:rt,ki(t,e,Eo(e),n)}function uu(t){return fu(t)&&t!=+t}function hu(t){if(Pc(t))throw new rl(st);return Bi(t)}function lu(t){return null===t}function cu(t){return null==t}function fu(t){return"number"==typeof t||ou(t)&&yi(t)==Zt}function du(t){if(!ou(t)||yi(t)!=Jt)return!1;var e=Pl(t);if(null===e)return!0;var n=gl.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ml.call(n)==wl}function pu(t){return nu(t)&&t>=-Bt&&t<=Bt}function mu(t){return"string"==typeof t||!vf(t)&&ou(t)&&yi(t)==ne}function gu(t){return"symbol"==typeof t||ou(t)&&yi(t)==ie}function vu(t){return t===rt}function yu(t){return ou(t)&&Sc(t)==oe}function _u(t){return ou(t)&&yi(t)==se}function wu(t){if(!t)return[];if(Wa(t))return mu(t)?tt(t):jr(t);if(kl&&t[kl])return H(t[kl]());var e=Sc(t);return(e==$t?W:e==ee?$:Qu)(t)}function bu(t){if(!t)return 0===t?t:0;if((t=Eu(t))===kt||t===-kt){return(t<0?-1:1)*It}return t===t?t:0}function xu(t){var e=bu(t),n=e%1;return e===e?n?e-n:e:0}function Tu(t){return t?ni(xu(t),0,Dt):0}function Eu(t){if("number"==typeof t)return t;if(gu(t))return Lt;if(ru(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ru(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ie,"");var n=He.test(t);return n||qe.test(t)?Rn(t.slice(2),n?2:8):Xe.test(t)?Lt:+t}function Au(t){return zr(t,Vu(t))}function Su(t){return t?ni(xu(t),-Bt,Bt):0===t?t:0}function Pu(t){return null==t?"":dr(t)}function Cu(t,e){var n=dc(t);return null==e?n:Jn(n,e)}function Ou(t,e){return x(t,xo(e,3),di)}function Ru(t,e){return x(t,xo(e,3),pi)}function Mu(t,e){return null==t?t:gc(t,xo(e,3),Vu)}function ku(t,e){return null==t?t:vc(t,xo(e,3),Vu)}function Bu(t,e){return t&&di(t,xo(e,3))}function Iu(t,e){return t&&pi(t,xo(e,3))}function Lu(t){return null==t?[]:mi(t,Fu(t))}function Du(t){return null==t?[]:mi(t,Vu(t))}function ju(t,e,n){var i=null==t?rt:gi(t,e);return i===rt?n:i}function zu(t,e){return null!=t&&Oo(t,e,wi)}function Nu(t,e){return null!=t&&Oo(t,e,bi)}function Fu(t){return Wa(t)?kn(t):zi(t)}function Vu(t){return Wa(t)?kn(t,!0):Ni(t)}function Uu(t,e){var n={};return e=xo(e,3),di(t,function(t,i,r){ti(n,e(t,i,r),t)}),n}function Gu(t,e){var n={};return e=xo(e,3),di(t,function(t,i,r){ti(n,i,e(t,i,r))}),n}function Xu(t,e){return Hu(t,ka(xo(e)))}function Hu(t,e){if(null==t)return{};var n=m(_o(t),function(t){return[t]});return e=xo(e),$i(t,n,function(t,n){return e(t,n[0])})}function Wu(t,e,n){e=Tr(e,t);var i=-1,r=e.length;for(r||(r=1,t=rt);++i<r;){var o=null==t?rt:t[Qo(e[i])];o===rt&&(i=r,o=n),t=eu(o)?o.call(t):o}return t}function qu(t,e,n){return null==t?t:or(t,e,n)}function Yu(t,e,n,i){return i="function"==typeof i?i:rt,null==t?t:or(t,e,n,i)}function $u(t,e,n){var i=vf(t),r=i||_f(t)||Ef(t);if(e=xo(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:ru(t)&&eu(o)?dc(Pl(t)):{}}return(r?h:di)(t,function(t,i,r){return e(n,t,i,r)}),n}function Zu(t,e){return null==t||mr(t,e)}function Ku(t,e,n){return null==t?t:gr(t,e,xr(n))}function Ju(t,e,n,i){return i="function"==typeof i?i:rt,null==t?t:gr(t,e,xr(n),i)}function Qu(t){return null==t?[]:D(t,Fu(t))}function th(t){return null==t?[]:D(t,Vu(t))}function eh(t,e,n){return n===rt&&(n=e,e=rt),n!==rt&&(n=Eu(n),n=n===n?n:0),e!==rt&&(e=Eu(e),e=e===e?e:0),ni(Eu(t),e,n)}function nh(t,e,n){return e=bu(e),n===rt?(n=e,e=0):n=bu(n),t=Eu(t),xi(t,e,n)}function ih(t,e,n){if(n&&"boolean"!=typeof n&&Do(t,e,n)&&(e=n=rt),n===rt&&("boolean"==typeof e?(n=e,e=rt):"boolean"==typeof t&&(n=t,t=rt)),t===rt&&e===rt?(t=0,e=1):(t=bu(t),e===rt?(e=t,t=0):e=bu(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=$l();return Wl(t+r*(e-t+On("1e-"+((r+"").length-1))),e)}return Qi(t,e)}function rh(t){return Zf(Pu(t).toLowerCase())}function oh(t){return(t=Pu(t))&&t.replace($e,Wn).replace(gn,"")}function sh(t,e,n){t=Pu(t),e=dr(e);var i=t.length;n=n===rt?i:ni(xu(n),0,i);var r=n;return(n-=e.length)>=0&&t.slice(n,r)==e}function ah(t){return t=Pu(t),t&&Ee.test(t)?t.replace(xe,qn):t}function uh(t){return t=Pu(t),t&&Be.test(t)?t.replace(ke,"\\$&"):t}function hh(t,e,n){t=Pu(t),e=xu(e);var i=e?Q(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return no(Nl(r),n)+t+no(zl(r),n)}function lh(t,e,n){t=Pu(t),e=xu(e);var i=e?Q(t):0;return e&&i<e?t+no(e-i,n):t}function ch(t,e,n){t=Pu(t),e=xu(e);var i=e?Q(t):0;return e&&i<e?no(e-i,n)+t:t}function fh(t,e,n){return n||null==e?e=0:e&&(e=+e),Yl(Pu(t).replace(Le,""),e||0)}function dh(t,e,n){return e=(n?Do(t,e,n):e===rt)?1:xu(e),er(Pu(t),e)}function ph(){var t=arguments,e=Pu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function mh(t,e,n){return n&&"number"!=typeof n&&Do(t,e,n)&&(e=n=rt),(n=n===rt?Dt:n>>>0)?(t=Pu(t),t&&("string"==typeof e||null!=e&&!xf(e))&&!(e=dr(e))&&G(t)?Er(tt(t),0,n):t.split(e,n)):[]}function gh(t,e,n){return t=Pu(t),n=null==n?0:ni(xu(n),0,t.length),e=dr(e),t.slice(n,n+e.length)==e}function vh(t,e,i){var r=n.templateSettings;i&&Do(t,e,i)&&(e=rt),t=Pu(t),e=Of({},e,r,lo);var o,s,a=Of({},e.imports,r.imports,lo),u=Fu(a),h=D(a,u),l=0,c=e.interpolate||Ze,f="__p += '",d=ul((e.escape||Ze).source+"|"+c.source+"|"+(c===Pe?Ue:Ze).source+"|"+(e.evaluate||Ze).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++xn+"]")+"\n";t.replace(d,function(e,n,i,r,a,u){return i||(i=r),f+=t.slice(l,u).replace(Ke,V),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),f+="';\n";var m=e.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(ye,""):f).replace(_e,"$1").replace(we,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Kf(function(){return ol(u,p+"return "+f).apply(rt,h)});if(g.source=f,Qa(g))throw g;return g}function yh(t){return Pu(t).toLowerCase()}function _h(t){return Pu(t).toUpperCase()}function wh(t,e,n){if((t=Pu(t))&&(n||e===rt))return t.replace(Ie,"");if(!t||!(e=dr(e)))return t;var i=tt(t),r=tt(e);return Er(i,z(i,r),N(i,r)+1).join("")}function bh(t,e,n){if((t=Pu(t))&&(n||e===rt))return t.replace(De,"");if(!t||!(e=dr(e)))return t;var i=tt(t);return Er(i,0,N(i,tt(e))+1).join("")}function xh(t,e,n){if((t=Pu(t))&&(n||e===rt))return t.replace(Le,"");if(!t||!(e=dr(e)))return t;var i=tt(t);return Er(i,z(i,tt(e))).join("")}function Th(t,e){var n=St,i=Pt;if(ru(e)){var r="separator"in e?e.separator:r;n="length"in e?xu(e.length):n,i="omission"in e?dr(e.omission):i}t=Pu(t);var o=t.length;if(G(t)){var s=tt(t);o=s.length}if(n>=o)return t;var a=n-Q(i);if(a<1)return i;var u=s?Er(s,0,a).join(""):t.slice(0,a);if(r===rt)return u+i;if(s&&(a+=u.length-a),xf(r)){if(t.slice(a).search(r)){var h,l=u;for(r.global||(r=ul(r.source,Pu(Ge.exec(r))+"g")),r.lastIndex=0;h=r.exec(l);)var c=h.index;u=u.slice(0,c===rt?a:c)}}else if(t.indexOf(dr(r),a)!=a){var f=u.lastIndexOf(r);f>-1&&(u=u.slice(0,f))}return u+i}function Eh(t){return t=Pu(t),t&&Te.test(t)?t.replace(be,Yn):t}function Ah(t,e,n){return t=Pu(t),e=n?rt:e,e===rt?X(t)?it(t):b(t):t.match(e)||[]}function Sh(t){var e=null==t?0:t.length,n=xo();return t=e?m(t,function(t){if("function"!=typeof t[1])throw new ll(at);return[n(t[0]),t[1]]}):[],nr(function(n){for(var i=-1;++i<e;){var r=t[i];if(a(r[0],this,n))return a(r[1],this,n)}})}function Ph(t){return ri(ii(t,ct))}function Ch(t){return function(){return t}}function Oh(t,e){return null==t||t!==t?e:t}function Rh(t){return t}function Mh(t){return ji("function"==typeof t?t:ii(t,ct))}function kh(t){return Ui(ii(t,ct))}function Bh(t,e){return Gi(t,ii(e,ct))}function Ih(t,e,n){var i=Fu(e),r=mi(e,i);null!=n||ru(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=mi(e,Fu(e)));var o=!(ru(n)&&"chain"in n&&!n.chain),s=eu(t);return h(r,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=jr(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,g([this.value()],arguments))})}),t}function Lh(){return Bn._===this&&(Bn._=bl),this}function Dh(){}function jh(t){return t=xu(t),nr(function(e){return Wi(e,t)})}function zh(t){return jo(t)?C(Qo(t)):Zi(t)}function Nh(t){return function(e){return null==t?rt:gi(t,e)}}function Fh(){return[]}function Vh(){return!1}function Uh(){return{}}function Gh(){return""}function Xh(){return!0}function Hh(t,e){if((t=xu(t))<1||t>Bt)return[];var n=Dt,i=Wl(t,Dt);e=xo(e),t-=Dt;for(var r=B(i,e);++n<t;)e(n);return r}function Wh(t){return vf(t)?m(t,Qo):gu(t)?[t]:jr(Mc(Pu(t)))}function qh(t){var e=++vl;return Pu(t)+e}function Yh(t){return t&&t.length?hi(t,Rh,_i):rt}function $h(t,e){return t&&t.length?hi(t,xo(e,2),_i):rt}function Zh(t){return P(t,Rh)}function Kh(t,e){return P(t,xo(e,2))}function Jh(t){return t&&t.length?hi(t,Rh,Fi):rt}function Qh(t,e){return t&&t.length?hi(t,xo(e,2),Fi):rt}function tl(t){return t&&t.length?k(t,Rh):0}function el(t,e){return t&&t.length?k(t,xo(e,2)):0}e=null==e?Bn:$n.defaults(Bn.Object(),e,$n.pick(Bn,bn));var nl=e.Array,il=e.Date,rl=e.Error,ol=e.Function,sl=e.Math,al=e.Object,ul=e.RegExp,hl=e.String,ll=e.TypeError,cl=nl.prototype,fl=ol.prototype,dl=al.prototype,pl=e["__core-js_shared__"],ml=fl.toString,gl=dl.hasOwnProperty,vl=0,yl=function(){var t=/[^.]+$/.exec(pl&&pl.keys&&pl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_l=dl.toString,wl=ml.call(al),bl=Bn._,xl=ul("^"+ml.call(gl).replace(ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tl=Dn?e.Buffer:rt,El=e.Symbol,Al=e.Uint8Array,Sl=Tl?Tl.allocUnsafe:rt,Pl=q(al.getPrototypeOf,al),Cl=al.create,Ol=dl.propertyIsEnumerable,Rl=cl.splice,Ml=El?El.isConcatSpreadable:rt,kl=El?El.iterator:rt,Bl=El?El.toStringTag:rt,Il=function(){try{var t=Ao(al,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ll=e.clearTimeout!==Bn.clearTimeout&&e.clearTimeout,Dl=il&&il.now!==Bn.Date.now&&il.now,jl=e.setTimeout!==Bn.setTimeout&&e.setTimeout,zl=sl.ceil,Nl=sl.floor,Fl=al.getOwnPropertySymbols,Vl=Tl?Tl.isBuffer:rt,Ul=e.isFinite,Gl=cl.join,Xl=q(al.keys,al),Hl=sl.max,Wl=sl.min,ql=il.now,Yl=e.parseInt,$l=sl.random,Zl=cl.reverse,Kl=Ao(e,"DataView"),Jl=Ao(e,"Map"),Ql=Ao(e,"Promise"),tc=Ao(e,"Set"),ec=Ao(e,"WeakMap"),nc=Ao(al,"create"),ic=ec&&new ec,rc={},oc=ts(Kl),sc=ts(Jl),ac=ts(Ql),uc=ts(tc),hc=ts(ec),lc=El?El.prototype:rt,cc=lc?lc.valueOf:rt,fc=lc?lc.toString:rt,dc=function(){function t(){}return function(e){if(!ru(e))return{};if(Cl)return Cl(e);t.prototype=e;var n=new t;return t.prototype=rt,n}}();n.templateSettings={escape:Ae,evaluate:Se,interpolate:Pe,variable:"",imports:{_:n}},n.prototype=i.prototype,n.prototype.constructor=n,r.prototype=dc(i.prototype),r.prototype.constructor=r,w.prototype=dc(i.prototype),w.prototype.constructor=w,nt.prototype.clear=Fe,nt.prototype.delete=Je,nt.prototype.get=Qe,nt.prototype.has=tn,nt.prototype.set=en,nn.prototype.clear=rn,nn.prototype.delete=on,nn.prototype.get=sn,nn.prototype.has=an,nn.prototype.set=un,hn.prototype.clear=ln,hn.prototype.delete=cn,hn.prototype.get=fn,hn.prototype.has=dn,hn.prototype.set=pn,vn.prototype.add=vn.prototype.push=yn,vn.prototype.has=_n,wn.prototype.clear=An,wn.prototype.delete=Sn,wn.prototype.get=Pn,wn.prototype.has=Cn,wn.prototype.set=Mn;var pc=Gr(di),mc=Gr(pi,!0),gc=Xr(),vc=Xr(!0),yc=ic?function(t,e){return ic.set(t,e),t}:Rh,_c=Il?function(t,e){return Il(t,"toString",{configurable:!0,enumerable:!1,value:Ch(e),writable:!0})}:Rh,wc=nr,bc=Ll||function(t){return Bn.clearTimeout(t)},xc=tc&&1/$(new tc([,-0]))[1]==kt?function(t){return new tc(t)}:Dh,Tc=ic?function(t){return ic.get(t)}:Dh,Ec=Fl?function(t){return null==t?[]:(t=al(t),f(Fl(t),function(e){return Ol.call(t,e)}))}:Fh,Ac=Fl?function(t){for(var e=[];t;)g(e,Ec(t)),t=Pl(t);return e}:Fh,Sc=yi;(Kl&&Sc(new Kl(new ArrayBuffer(1)))!=ue||Jl&&Sc(new Jl)!=$t||Ql&&"[object Promise]"!=Sc(Ql.resolve())||tc&&Sc(new tc)!=ee||ec&&Sc(new ec)!=oe)&&(Sc=function(t){var e=yi(t),n=e==Jt?t.constructor:rt,i=n?ts(n):"";if(i)switch(i){case oc:return ue;case sc:return $t;case ac:return"[object Promise]";case uc:return ee;case hc:return oe}return e});var Pc=pl?eu:Vh,Cc=Ko(yc),Oc=jl||function(t,e){return Bn.setTimeout(t,e)},Rc=Ko(_c),Mc=function(t){var e=Ma(t,function(t){return n.size===ht&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return Re.test(t)&&e.push(""),t.replace(Me,function(t,n,i,r){e.push(i?r.replace(Ve,"$1"):n||t)}),e}),kc=nr(function(t,e){return qa(t)?ai(t,fi(e,1,qa,!0)):[]}),Bc=nr(function(t,e){var n=bs(e);return qa(n)&&(n=rt),qa(t)?ai(t,fi(e,1,qa,!0),xo(n,2)):[]}),Ic=nr(function(t,e){var n=bs(e);return qa(n)&&(n=rt),qa(t)?ai(t,fi(e,1,qa,!0),rt,n):[]}),Lc=nr(function(t){var e=m(t,br);return e.length&&e[0]===t[0]?Ti(e):[]}),Dc=nr(function(t){var e=bs(t),n=m(t,br);return e===bs(n)?e=rt:n.pop(),n.length&&n[0]===t[0]?Ti(n,xo(e,2)):[]}),jc=nr(function(t){var e=bs(t),n=m(t,br);return e="function"==typeof e?e:rt,e&&n.pop(),n.length&&n[0]===t[0]?Ti(n,rt,e):[]}),zc=nr(Es),Nc=vo(function(t,e){var n=null==t?0:t.length,i=ei(t,e);return Ji(t,m(e,function(t){return Lo(t,n)?+t:t}).sort(Br)),i}),Fc=nr(function(t){return pr(fi(t,1,qa,!0))}),Vc=nr(function(t){var e=bs(t);return qa(e)&&(e=rt),pr(fi(t,1,qa,!0),xo(e,2))}),Uc=nr(function(t){var e=bs(t);return e="function"==typeof e?e:rt,pr(fi(t,1,qa,!0),rt,e)}),Gc=nr(function(t,e){return qa(t)?ai(t,e):[]}),Xc=nr(function(t){return _r(f(t,qa))}),Hc=nr(function(t){var e=bs(t);return qa(e)&&(e=rt),_r(f(t,qa),xo(e,2))}),Wc=nr(function(t){var e=bs(t);return e="function"==typeof e?e:rt,_r(f(t,qa),rt,e)}),qc=nr(Ws),Yc=nr(function(t){var e=t.length,n=e>1?t[e-1]:rt;return n="function"==typeof n?(t.pop(),n):rt,qs(t,n)}),$c=vo(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return ei(e,t)};return!(e>1||this.__actions__.length)&&i instanceof w&&Lo(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:Js,args:[o],thisArg:rt}),new r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(rt),t})):this.thru(o)}),Zc=Vr(function(t,e,n){gl.call(t,n)?++t[n]:ti(t,n,1)}),Kc=Zr(cs),Jc=Zr(fs),Qc=Vr(function(t,e,n){gl.call(t,n)?t[n].push(e):ti(t,n,[e])}),tf=nr(function(t,e,n){var i=-1,r="function"==typeof e,o=Wa(t)?nl(t.length):[];return pc(t,function(t){o[++i]=r?a(e,t,n):Ai(t,e,n)}),o}),ef=Vr(function(t,e,n){ti(t,n,e)}),nf=Vr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),rf=nr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Do(t,e[0],e[1])?e=[]:n>2&&Do(e[0],e[1],e[2])&&(e=[e[0]]),qi(t,fi(e,1),[])}),of=Dl||function(){return Bn.Date.now()},sf=nr(function(t,e,n){var i=gt;if(n.length){var r=Y(n,bo(sf));i|=bt}return ho(t,i,e,n,r)}),af=nr(function(t,e,n){var i=gt|vt;if(n.length){var r=Y(n,bo(af));i|=bt}return ho(e,i,t,n,r)}),uf=nr(function(t,e){return si(t,1,e)}),hf=nr(function(t,e,n){return si(t,Eu(e)||0,n)});Ma.Cache=hn;var lf=wc(function(t,e){e=1==e.length&&vf(e[0])?m(e[0],L(xo())):m(fi(e,1),L(xo()));var n=e.length;return nr(function(i){for(var r=-1,o=Wl(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return a(t,this,i)})}),cf=nr(function(t,e){var n=Y(e,bo(cf));return ho(t,bt,rt,e,n)}),ff=nr(function(t,e){var n=Y(e,bo(ff));return ho(t,xt,rt,e,n)}),df=vo(function(t,e){return ho(t,Et,rt,rt,rt,e)}),pf=oo(_i),mf=oo(function(t,e){return t>=e}),gf=Si(function(){return arguments}())?Si:function(t){return ou(t)&&gl.call(t,"callee")&&!Ol.call(t,"callee")},vf=nl.isArray,yf=Nn?L(Nn):Pi,_f=Vl||Vh,wf=Fn?L(Fn):Ci,bf=Vn?L(Vn):Mi,xf=Un?L(Un):Ii,Tf=Gn?L(Gn):Li,Ef=Xn?L(Xn):Di,Af=oo(Fi),Sf=oo(function(t,e){return t<=e}),Pf=Ur(function(t,e){if(Vo(e)||Wa(e))return void zr(e,Fu(e),t);for(var n in e)gl.call(e,n)&&Hn(t,n,e[n])}),Cf=Ur(function(t,e){zr(e,Vu(e),t)}),Of=Ur(function(t,e,n,i){zr(e,Vu(e),t,i)}),Rf=Ur(function(t,e,n,i){zr(e,Fu(e),t,i)}),Mf=vo(ei),kf=nr(function(t){return t.push(rt,lo),a(Of,rt,t)}),Bf=nr(function(t){return t.push(rt,co),a(zf,rt,t)}),If=Qr(function(t,e,n){t[e]=n},Ch(Rh)),Lf=Qr(function(t,e,n){gl.call(t,e)?t[e].push(n):t[e]=[n]},xo),Df=nr(Ai),jf=Ur(function(t,e,n){Xi(t,e,n)}),zf=Ur(function(t,e,n,i){Xi(t,e,n,i)}),Nf=vo(function(t,e){var n={};if(null==t)return n;var i=!1;e=m(e,function(e){return e=Tr(e,t),i||(i=e.length>1),e}),zr(t,_o(t),n),i&&(n=ii(n,ct|ft|dt,fo));for(var r=e.length;r--;)mr(n,e[r]);return n}),Ff=vo(function(t,e){return null==t?{}:Yi(t,e)}),Vf=uo(Fu),Uf=uo(Vu),Gf=qr(function(t,e,n){return e=e.toLowerCase(),t+(n?rh(e):e)}),Xf=qr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Hf=qr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Wf=Wr("toLowerCase"),qf=qr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Yf=qr(function(t,e,n){return t+(n?" ":"")+Zf(e)}),$f=qr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Zf=Wr("toUpperCase"),Kf=nr(function(t,e){try{return a(t,rt,e)}catch(t){return Qa(t)?t:new rl(t)}}),Jf=vo(function(t,e){return h(e,function(e){e=Qo(e),ti(t,e,sf(t[e],t))}),t}),Qf=Kr(),td=Kr(!0),ed=nr(function(t,e){return function(n){return Ai(n,t,e)}}),nd=nr(function(t,e){return function(n){return Ai(t,n,e)}}),id=eo(m),rd=eo(c),od=eo(_),sd=ro(),ad=ro(!0),ud=to(function(t,e){return t+e},0),hd=ao("ceil"),ld=to(function(t,e){return t/e},1),cd=ao("floor"),fd=to(function(t,e){return t*e},1),dd=ao("round"),pd=to(function(t,e){return t-e},0);return n.after=Ea,n.ary=Aa,n.assign=Pf,n.assignIn=Cf,n.assignInWith=Of,n.assignWith=Rf,n.at=Mf,n.before=Sa,n.bind=sf,n.bindAll=Jf,n.bindKey=af,n.castArray=Na,n.chain=Zs,n.chunk=is,n.compact=rs,n.concat=os,n.cond=Sh,n.conforms=Ph,n.constant=Ch,n.countBy=Zc,n.create=Cu,n.curry=Pa,n.curryRight=Ca,n.debounce=Oa,n.defaults=kf,n.defaultsDeep=Bf,n.defer=uf,n.delay=hf,n.difference=kc,n.differenceBy=Bc,n.differenceWith=Ic,n.drop=ss,n.dropRight=as,n.dropRightWhile=us,n.dropWhile=hs,n.fill=ls,n.filter=aa,n.flatMap=ua,n.flatMapDeep=ha,n.flatMapDepth=la,n.flatten=ds,n.flattenDeep=ps,n.flattenDepth=ms,n.flip=Ra,n.flow=Qf,n.flowRight=td,n.fromPairs=gs,n.functions=Lu,n.functionsIn=Du,n.groupBy=Qc,n.initial=_s,n.intersection=Lc,n.intersectionBy=Dc,n.intersectionWith=jc,n.invert=If,n.invertBy=Lf,n.invokeMap=tf,n.iteratee=Mh,n.keyBy=ef,n.keys=Fu,n.keysIn=Vu,n.map=pa,n.mapKeys=Uu,n.mapValues=Gu,n.matches=kh,n.matchesProperty=Bh,n.memoize=Ma,n.merge=jf,n.mergeWith=zf,n.method=ed,n.methodOf=nd,n.mixin=Ih,n.negate=ka,n.nthArg=jh,n.omit=Nf,n.omitBy=Xu,n.once=Ba,n.orderBy=ma,n.over=id,n.overArgs=lf,n.overEvery=rd,n.overSome=od,n.partial=cf,n.partialRight=ff,n.partition=nf,n.pick=Ff,n.pickBy=Hu,n.property=zh,n.propertyOf=Nh,n.pull=zc,n.pullAll=Es,n.pullAllBy=As,n.pullAllWith=Ss,n.pullAt=Nc,n.range=sd,n.rangeRight=ad,n.rearg=df,n.reject=ya,n.remove=Ps,n.rest=Ia,n.reverse=Cs,n.sampleSize=wa,n.set=qu,n.setWith=Yu,n.shuffle=ba,n.slice=Os,n.sortBy=rf,n.sortedUniq=Ds,n.sortedUniqBy=js,n.split=mh,n.spread=La,n.tail=zs,n.take=Ns,n.takeRight=Fs,n.takeRightWhile=Vs,n.takeWhile=Us,n.tap=Ks,n.throttle=Da,n.thru=Js,n.toArray=wu,n.toPairs=Vf,n.toPairsIn=Uf,n.toPath=Wh,n.toPlainObject=Au,n.transform=$u,n.unary=ja,n.union=Fc,n.unionBy=Vc,n.unionWith=Uc,n.uniq=Gs,n.uniqBy=Xs,n.uniqWith=Hs,n.unset=Zu,n.unzip=Ws,n.unzipWith=qs,n.update=Ku,n.updateWith=Ju,n.values=Qu,n.valuesIn=th,n.without=Gc,n.words=Ah,n.wrap=za,n.xor=Xc,n.xorBy=Hc,n.xorWith=Wc,n.zip=qc,n.zipObject=Ys,n.zipObjectDeep=$s,n.zipWith=Yc,n.entries=Vf,n.entriesIn=Uf,n.extend=Cf,n.extendWith=Of,Ih(n,n),n.add=ud,n.attempt=Kf,n.camelCase=Gf,n.capitalize=rh,n.ceil=hd,n.clamp=eh,n.clone=Fa,n.cloneDeep=Ua,n.cloneDeepWith=Ga,n.cloneWith=Va,n.conformsTo=Xa,n.deburr=oh,n.defaultTo=Oh,n.divide=ld,n.endsWith=sh,n.eq=Ha,n.escape=ah,n.escapeRegExp=uh,n.every=sa,n.find=Kc,n.findIndex=cs,n.findKey=Ou,n.findLast=Jc,n.findLastIndex=fs,n.findLastKey=Ru,n.floor=cd,n.forEach=ca,n.forEachRight=fa,n.forIn=Mu,n.forInRight=ku,n.forOwn=Bu,n.forOwnRight=Iu,n.get=ju,n.gt=pf,n.gte=mf,n.has=zu,n.hasIn=Nu,n.head=vs,n.identity=Rh,n.includes=da,n.indexOf=ys,n.inRange=nh,n.invoke=Df,n.isArguments=gf,n.isArray=vf,n.isArrayBuffer=yf,n.isArrayLike=Wa,n.isArrayLikeObject=qa,n.isBoolean=Ya,n.isBuffer=_f,n.isDate=wf,n.isElement=$a,n.isEmpty=Za,n.isEqual=Ka,n.isEqualWith=Ja,n.isError=Qa,n.isFinite=tu,n.isFunction=eu,n.isInteger=nu,n.isLength=iu,n.isMap=bf,n.isMatch=su,n.isMatchWith=au,n.isNaN=uu,n.isNative=hu,n.isNil=cu,n.isNull=lu,n.isNumber=fu,n.isObject=ru,n.isObjectLike=ou,n.isPlainObject=du,n.isRegExp=xf,n.isSafeInteger=pu,n.isSet=Tf,n.isString=mu,n.isSymbol=gu,n.isTypedArray=Ef,n.isUndefined=vu,n.isWeakMap=yu,n.isWeakSet=_u,n.join=ws,n.kebabCase=Xf,n.last=bs,n.lastIndexOf=xs,n.lowerCase=Hf,n.lowerFirst=Wf,n.lt=Af,n.lte=Sf,n.max=Yh,n.maxBy=$h,n.mean=Zh,n.meanBy=Kh,n.min=Jh,n.minBy=Qh,n.stubArray=Fh,n.stubFalse=Vh,n.stubObject=Uh,n.stubString=Gh,n.stubTrue=Xh,n.multiply=fd,n.nth=Ts,n.noConflict=Lh,n.noop=Dh,n.now=of,n.pad=hh,n.padEnd=lh,n.padStart=ch,n.parseInt=fh,n.random=ih,n.reduce=ga,n.reduceRight=va,n.repeat=dh,n.replace=ph,n.result=Wu,n.round=dd,n.runInContext=t,n.sample=_a,n.size=xa,n.snakeCase=qf,n.some=Ta,n.sortedIndex=Rs,n.sortedIndexBy=Ms,n.sortedIndexOf=ks,n.sortedLastIndex=Bs,n.sortedLastIndexBy=Is,n.sortedLastIndexOf=Ls,n.startCase=Yf,n.startsWith=gh,n.subtract=pd,n.sum=tl,n.sumBy=el,n.template=vh,n.times=Hh,n.toFinite=bu,n.toInteger=xu,n.toLength=Tu,n.toLower=yh,n.toNumber=Eu,n.toSafeInteger=Su,n.toString=Pu,n.toUpper=_h,n.trim=wh,n.trimEnd=bh,n.trimStart=xh,n.truncate=Th,n.unescape=Eh,n.uniqueId=qh,n.upperCase=$f,n.upperFirst=Zf,n.each=ca,n.eachRight=fa,n.first=vs,Ih(n,function(){var t={};return di(n,function(e,i){gl.call(n.prototype,i)||(t[i]=e)}),t}(),{chain:!1}),n.VERSION="4.17.4",h(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),h(["drop","take"],function(t,e){w.prototype[t]=function(n){n=n===rt?1:Hl(xu(n),0);var i=this.__filtered__&&!e?new w(this):this.clone();return i.__filtered__?i.__takeCount__=Wl(n,i.__takeCount__):i.__views__.push({size:Wl(n,Dt),type:t+(i.__dir__<0?"Right":"")}),i},w.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),h(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==Rt||3==n;w.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:xo(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),h(["head","last"],function(t,e){var n="take"+(e?"Right":"");w.prototype[t]=function(){return this[n](1).value()[0]}}),h(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");w.prototype[t]=function(){return this.__filtered__?new w(this):this[n](1)}}),w.prototype.compact=function(){return this.filter(Rh)},w.prototype.find=function(t){return this.filter(t).head()},w.prototype.findLast=function(t){return this.reverse().find(t)},w.prototype.invokeMap=nr(function(t,e){return"function"==typeof t?new w(this):this.map(function(n){return Ai(n,t,e)})}),w.prototype.reject=function(t){return this.filter(ka(xo(t)))},w.prototype.slice=function(t,e){t=xu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new w(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==rt&&(e=xu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},w.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},w.prototype.toArray=function(){return this.take(Dt)},di(w.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),s=n[o?"take"+("last"==e?"Right":""):e],a=o||/^find/.test(e);s&&(n.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,h=e instanceof w,l=u[0],c=h||vf(e),f=function(t){var e=s.apply(n,g([t],u));return o&&d?e[0]:e};c&&i&&"function"==typeof l&&1!=l.length&&(h=c=!1);var d=this.__chain__,p=!!this.__actions__.length,m=a&&!d,v=h&&!p;if(!a&&c){e=v?e:new w(this);var y=t.apply(e,u);return y.__actions__.push({func:Js,args:[f],thisArg:rt}),new r(y,d)}return m&&v?t.apply(this,u):(y=this.thru(f),m?o?y.value()[0]:y.value():y)})}),h(["pop","push","shift","sort","splice","unshift"],function(t){var e=cl[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var n=this.value();return e.apply(vf(n)?n:[],t)}return this[i](function(n){return e.apply(vf(n)?n:[],t)})}}),di(w.prototype,function(t,e){var i=n[e];if(i){var r=i.name+"";(rc[r]||(rc[r]=[])).push({name:e,func:i})}}),rc[Jr(rt,vt).name]=[{name:"wrapper",func:rt}],w.prototype.clone=O,w.prototype.reverse=K,w.prototype.value=et,n.prototype.at=$c,n.prototype.chain=Qs,n.prototype.commit=ta,n.prototype.next=ea,n.prototype.plant=ia,n.prototype.reverse=ra,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=oa,n.prototype.first=n.prototype.head,kl&&(n.prototype[kl]=na),n}();Bn._=$n,(r=function(){return $n}.call(e,n,e,i))!==rt&&(i.exports=r)}).call(this)}).call(e,n(2),n(19)(t))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=i(r),s=n(5),a=i(s),u=o.default.Renderable.extend({init:function(t,e,n){this._super(o.default.Renderable,"init",[t.x,t.y,e,n]),this.invalidate=!1,this.barHeight=4,this.progress=0,this.padding=5},onProgressUpdate:function(t){this.progress=~~(t*(this.width-2*this.padding)),this.invalidate=!0},update:function(){return!0===this.invalidate&&(this.invalidate=!1,!0)},draw:function(t){t.setColor("#64F865"),t.fillRect(this.padding,this.height/2-this.barHeight/2,this.progress,this.barHeight),t.setColor("white")}});e.default=o.default.ScreenObject.extend({ProgressBar:u,onResetEvent:function(){o.default.game.world.addChild(new o.default.ColorLayer("background","#000000",0),0);var t=new this.ProgressBar(new o.default.Vector2d,o.default.video.renderer.getWidth(),o.default.video.renderer.getHeight());this.loaderHdlr=o.default.event.subscribe(o.default.event.LOADER_PROGRESS,t.onProgressUpdate.bind(t)),this.resizeHdlr=o.default.event.subscribe(o.default.event.VIEWPORT_ONRESIZE,t.resize.bind(t)),o.default.game.world.addChild(t,1),this.iconCanvas=o.default.video.createCanvas(a.default.width,a.default.height,!1)},onDestroyEvent:function(){o.default.event.unsubscribe(this.loaderHdlr),o.default.event.unsubscribe(this.resizeHdlr),this.loaderHdlr=this.resizeHdlr=null}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(11),o=i(r),s=n(13),a=i(s),u=n(9),h=i(u);o.default.load(h.default).play(a.default)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=i(r),s=n(1),a=i(s),u={get fps(){return o.default.sys.fps},set fps(t){o.default.sys.fps=t},load:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(void 0===window)throw new Error("The environment is not compatible. The window object is undefined.");return this.fps=a.default.video.fps,o.default.sys.gravity=0,a.default.debug=!0===a.default.debug&&window.location.hash&&window.location.hash.toLowerCase().match(/debug/gi),a.default.debug&&(o.default.game.config=a.default),"GBC_2x"===a.default.video.preset&&1===a.default.video.scale&&document.body.classList.add("with-frame"),isNaN(a.default.video.scale)||void 0===window.devicePixelRatio||(document.getElementById("game").style.zoom=window.devicePixelRatio),o.default.Body=o.default.Body.extend({respondToCollision:function(t){var e=t.overlapV;this.entity.pos.sub(e),0!==e.x&&(this.vel.x=0),0!==e.y&&(this.vel.y=0),this.falling=!1,this.jumping=!1}}),a.default.debug||(o.default.game.onLevelLoaded=function(){o.default.game.world.children.forEach(function(t,e){t.name.match(/debug/gi)&&(o.default.game.world.children[e].alpha=0)})}),t&&(o.default.DefaultLoadingScreen=t),this},play:function(t){return window.onReady(function(){t.load()}),this}};e.default=u},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(c===clearTimeout)return clearTimeout(t);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function s(){m&&d&&(m=!1,d.length?p=d.concat(p):g=-1,p.length&&a())}function a(){if(!m){var t=r(s);m=!0;for(var e=p.length;e;){for(d=p,p=[];++g<e;)d&&d[g].run();g=-1,e=p.length}d=null,m=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function h(){}var l,c,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(t){c=i}}();var d,p=[],m=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||m||r(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=h,f.addListener=h,f.once=h,f.off=h,f.removeListener=h,f.removeAllListeners=h,f.emit=h,f.prependListener=h,f.prependOnceListener=h,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=i(r),s=n(1),a=i(s),u=n(5),h=i(u),l=n(6),c=i(l),f=n(15),d=i(f),p=n(4),m=i(p),g=n(24),v=i(g),y=n(8),_=i(y);e.default={get wrapper(){return document.getElementById(a.default.wrapper)},load:function(){if(!o.default.video.init(h.default.defaultWidth,h.default.defaultHeight,{wrapper:a.default.wrapper,scale:h.default.scale,renderer:o.default.video[a.default.video.renderer],antiAlias:!1}))return void alert("Your browser does not support the HTML5 "+a.default.video.renderer+" renderer.");a.default.debug&&o.default.debug&&(o.default.debug.renderHitBox=!0),o.default.audio.init("mp3,ogg"),o.default.loader.preload(m.default._files,this.onLoad.bind(this))},onLoad:function(){_.default.forOwn(d.default,function(t,e){o.default.pool.register(e.toLowerCase(),t)}),c.default.bind(),this.start()},start:function(){o.default.state.set(o.default.state.READY,new v.default.TitleScreen),o.default.state.set(o.default.state.PLAY,new v.default[a.default.initial_scene]),o.default.state.change(o.default.state.PLAY)},reset:function(){this.start()}}},function(t,e,n){(function(t){var e=t.Zepto=n(3);t.$=n(3);(function(t,n,i,r){!function(t){function e(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){l=null,f.last&&(f.el.trigger("longTap"),f={})}function i(){l&&clearTimeout(l),l=null}function r(){a&&clearTimeout(a),u&&clearTimeout(u),h&&clearTimeout(h),l&&clearTimeout(l),a=u=h=l=null,f={}}function o(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function s(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var a,u,h,l,c,f={};t(document).ready(function(){var d,p,m,g,v=0,y=0;"MSGesture"in window&&(c=new MSGesture,c.target=document.body),t(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(f.el.trigger("swipe"),f.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(e){(g=s(e,"down"))&&!o(e)||(m=g?e:e.touches[0],e.touches&&1===e.touches.length&&f.x2&&(f.x2=void 0,f.y2=void 0),d=Date.now(),p=d-(f.last||d),f.el=t("tagName"in m.target?m.target:m.target.parentNode),a&&clearTimeout(a),f.x1=m.pageX,f.y1=m.pageY,p>0&&p<=250&&(f.isDoubleTap=!0),f.last=d,l=setTimeout(n,750),c&&g&&c.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(g=s(t,"move"))&&!o(t)||(m=g?t:t.touches[0],i(),f.x2=m.pageX,f.y2=m.pageY,v+=Math.abs(f.x1-f.x2),y+=Math.abs(f.y1-f.y2))}).on("touchend MSPointerUp pointerup",function(n){(g=s(n,"up"))&&!o(n)||(i(),f.x2&&Math.abs(f.x1-f.x2)>30||f.y2&&Math.abs(f.y1-f.y2)>30?h=setTimeout(function(){f.el&&(f.el.trigger("swipe"),f.el.trigger("swipe"+e(f.x1,f.x2,f.y1,f.y2))),f={}},0):"last"in f&&(v<30&&y<30?u=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=r,f.el&&f.el.trigger(e),f.isDoubleTap?(f.el&&f.el.trigger("doubleTap"),f={}):a=setTimeout(function(){a=null,f.el&&f.el.trigger("singleTap"),f={}},250)},0):f={}),v=y=0)}).on("touchcancel MSPointerCancel pointercancel",r),t(window).on("scroll",r)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(e)}).call(t,void 0,void 0,void 0,void 0)}).call(e,n(2))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Warp=e.Tree=e.Text=e.Shore=e.Player=void 0;var r=n(16),o=i(r),s=n(20),a=i(s),u=n(21),h=i(u),l=n(22),c=i(l),f=n(23),d=i(f);e.default={Player:o.default,Shore:a.default,Text:h.default,Tree:c.default,Warp:d.default},e.Player=o.default,e.Shore=a.default,e.Text=h.default,e.Tree=c.default,e.Warp=d.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),o=i(r),s=n(0),a=i(s);e.default=o.default.extend({initProperties:function(){this._super(o.default,"initProperties"),this.defaultSettings.anchorPoint=new a.default.Vector2d(.5,.25),this.defaultSettings.collisionType="PLAYER_OBJECT",this.debugAnimation.frames=[0],this.animations.walk_up.frames=[9,8,10,8],this.animations.walk_right.frames=[2,1],this.animations.walk_down.frames=[6,5,7,5],this.animations.walk_left.frames=[4,3],this.animations.stand_up.frames=[8],this.animations.stand_right.frames=[1],this.animations.stand_down.frames=[5],this.animations.stand_left.frames=[3]}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=i(r),s=n(6),a=i(s),u=n(7),h=i(u),l=n(18),c=i(l),f=n(1),d=i(f),p=n(4),m=i(p),g=n(8),v=i(g),y=function(t){if(1===t.length)return t;var e=[];return t.forEach(function(t){t.name?e.push(t):v.default.isArray(t)&&t.length>=2?e.push({name:t[0],delay:t[1]}):e.push({name:t,delay:125})}),e},_=o.default.Entity.extend({initProperties:function(){this.defaultSettings={anchorPoint:new o.default.Vector2d(0,0)},this.pixelBuffer=0,this.remainingPixels=0,this.lastPressedButton=null,this.animations={walk_up:{frames:[]},walk_right:{frames:[]},walk_down:{frames:[]},walk_left:{frames:[]},stand_up:{frames:[]},stand_right:{frames:[]},stand_down:{frames:[]},stand_left:{frames:[]}},this.initialAnimation="stand_down",this.debugAnimation={frames:[0]}},init:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.initProperties(),i=v.default.extend(this.defaultSettings,i),this._super(o.default.Entity,"init",[t,e,i]),this.mainSprite=this.renderable,v.default.forOwn(this.animations,function(t,e){0!==t.frames.length&&n.mainSprite.addAnimation(e,y(t.frames))}),d.default.debug){this.debugSprite=new o.default.Sprite(0,0,{image:this.mainSprite.image,framewidth:this.mainSprite.framewidth,frameheight:this.mainSprite.frameheight,spacing:this.mainSprite.spacing,margin:this.mainSprite.margin}),this.debugSprite.addAnimation("debug",y(this.debugAnimation.frames)),this.debugSprite.setCurrentAnimation("debug"),this.debugSprite.alwaysUpdate=!0,this.mainSprite.alwaysUpdate=!0,this.debugSprite.inViewport=!0,this.mainSprite.inViewport=!0;var r=new o.default.Container;r.ancestor=this,r.inViewport=!0,r.alwaysUpdate=!0,r.updateBoundsPos(0,0),r.addChild(this.debugSprite),r.addChild(this.mainSprite),r.updateChildBounds(),this.renderable=r}this.mainSprite.setCurrentAnimation(this.initialAnimation),this.body.vel.set(1,1),this.body.maxVel.set(1,1),this.body.friction.set(0,0),this.body.gravity=0,this.body.jumping=!1,this.body.falling=!1,this.anchorPoint.set(i.anchorPoint.x,i.anchorPoint.y),o.default.game.viewport.follow(this.pos,o.default.game.viewport.AXIS.BOTH),this.alwaysUpdate=!0},update:function(t){this.isMoving()||(this.body.vel.x=0,this.body.vel.y=0,this.lastPressedButton&&this.mainSprite.setCurrentAnimation("stand_"+this.lastPressedButton.toLowerCase()),this.lastPressedButton=null);var e=this.getMoveDirection();return!(!e&&!this.isMoving())&&(e&&!this.lastPressedButton&&(this.lastPressedButton=e),e&&!this.isMoving()&&(this.remainingPixels=c.default.pixelsPerMove),e&&this.processPixelsToMove()&&this.move(e),d.default.debug&&this.debugUpdate(e,t),void 0!==this.debugSprite&&(this.debugSprite.inViewport=!0===d.default.debug),this.mainSprite.inViewport=!0,this.body.update(t),o.default.collision.check(this),this._super(o.default.Entity,"update",[t])||0!==this.body.vel.x||0!==this.body.vel.y)},move:function(t){if(!t)throw new Error("Called move() with no button.");var e=a.default.getPressedAxis(t);if(!e)return!1;var n=a.default.getPressedOppositeAxis(e);c.default.allowDiagonal||(this.body.vel[n]=0),t===a.default.LEFT||t===a.default.UP?this.body.vel[e]-=c.default.velocityFactor:this.body.vel[e]+=c.default.velocityFactor,this.mainSprite.isCurrentAnimation("walk_"+t.toLowerCase())||this.mainSprite.setCurrentAnimation("walk_"+t.toLowerCase())},processPixelsToMove:function(){return 0===this.remainingPixels&&0===this.pixelBuffer?0:(this.remainingPixels>0&&(this.pixelBuffer+=c.default.pixelsPerFrame),0===this.remainingPixels&&this.pixelBuffer<1&&this.pixelBuffer>0?(this.pixelBuffer=0,1):this.pixelBuffer<1?0:0===this.remainingPixels&&this.pixelBuffer>1?(console.warn("Unexpected value for pixelBuffer: "+this.pixelBuffer+". Remaining pixels: "+this.remainingPixels),this.pixelBuffer-=1,1):(this.remainingPixels-=1,this.pixelBuffer-=1,1))},onCollision:function(t,e){if(t.overlap<1)return!1;t.a.body.gravity=0,t.a.body.friction.set(0,0),t.a.body.jumping=!1,t.a.body.falling=!1,t.b.body.gravity=0,t.b.body.friction.set(0,0),t.b.body.jumping=!1,t.b.body.falling=!1,e.body.gravity=0,e.body.friction.set(0,0),e.body.jumping=!1,e.body.falling=!1,h.default.playEffect(m.default.audios.collide),this.debugCollision(t,e)},isMoving:function(){return this.remainingPixels>0||this.pixelBuffer>0},getMoveDirection:function(){if(this.isMoving()&&this.lastPressedButton)return this.lastPressedButton;var t=a.default.getPressed();return!(!t||!1===a.default.getPressedAxis(t))&&t},debugUpdate:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"debug";if(d.default.debug){var i=document.getElementById(n);i&&(i.innerHTML="\n        <table>\n          <tr><td><b>FPS:</b></td><td>"+c.default.fps+"</td></tr>\n          <tr><td><b>Delta Time:</b></td><td>"+e+"</td></tr>\n          <tr><td><b>Direction:</b></td><td>"+t+"</td></tr>\n          <tr><td><b>Pixels per move:</b></td><td>"+c.default.pixelsPerMove+"</td></tr>\n          <tr><td><b>Pixels per frame:</b></td><td>"+c.default.pixelsPerFrame+"</td></tr>\n          <tr><td><b>Remaining Pixels:</b></td><td>"+this.remainingPixels+"</td></tr>\n          <tr><td><b>Pixel Buffer:</b></td><td>"+this.pixelBuffer+'</td></tr>\n          <tr><td><b>Last Collision:</b></td><td id="debug_collision">-</td></tr>\n        </table>\n      ')}},debugCollision:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"debug_collision";if(d.default.debug){var i=document.getElementById(n);if(i){var r=t.b.name||"default";i.innerHTML=""+r}}}});e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),a=i(s),u=n(1),h=i(u),l=function(){function t(){r(this,t)}return o(t,null,[{key:"fps",get:function(){return a.default.sys.fps},set:function(t){a.default.sys.fps=t}},{key:"pixelsPerMove",get:function(){return void 0===h.default.player.pixels_per_move?h.default.video.tile_size:h.default.player.pixels_per_move},set:function(t){h.default.player.pixels_per_move=t}},{key:"pixelsPerFrame",get:function(){return void 0===h.default.player.pixels_per_frame?this.pixelsPerMove/this.fps:h.default.player.pixels_per_frame},set:function(t){h.default.player.pixels_per_frame=t}},{key:"velocityFactor",get:function(){return void 0===h.default.player.velocity_factor?1:h.default.player.velocity_factor},set:function(t){h.default.player.velocity_factor=t}},{key:"allowDiagonal",get:function(){return void 0!==h.default.player.allow_diagonal&&h.default.player.allow_diagonal},set:function(t){h.default.player.allow_diagonal=t}}]),t}();e.default=l},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default.Entity.extend({init:function(t,e,n){this._super(r.default.Entity,"init",[t,e,n])}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default.Entity.extend({init:function(t,e,n){this._super(r.default.Entity,"init",[t,e,n])}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default.Entity.extend({init:function(t,e,n){this._super(r.default.Entity,"init",[t,e,n])}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default.Entity.extend({init:function(t,e,n){this._super(r.default.Entity,"init",[t,e,n])}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.TitleScreen=e.S01_NewBarkTown=e.LoadingScreen=void 0;var r=n(9),o=i(r),s=n(25),a=i(s),u=n(26),h=i(u);e.default={LoadingScreen:o.default,S01_NewBarkTown:a.default,TitleScreen:h.default},e.LoadingScreen=o.default,e.S01_NewBarkTown=a.default,e.TitleScreen=h.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=i(r),s=n(7),a=i(s),u=n(4),h=i(u);e.default=o.default.ScreenObject.extend({onResetEvent:function(){o.default.levelDirector.loadLevel(h.default.maps.S01_NewBarkTown),a.default.playMusic(h.default.audios.S01_NewBarkTown)},onDestroyEvent:function(){}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default.ScreenObject.extend({onResetEvent:function(){},onDestroyEvent:function(){}})}]);